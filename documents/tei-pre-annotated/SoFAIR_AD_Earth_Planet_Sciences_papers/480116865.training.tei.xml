<?xml version="1.0" encoding="UTF-8"?>
<tei xmlns="http://www.tei-c.org/ns/1.0">
    <teiHeader>
        <fileDesc xml:id="_1"/>
        <encodingDesc>
            <appInfo>
                <application version="0.8.1-SNAPSHOT" ident="GROBID" when="2024-06-13T16:15+0000">
                    <ref target="https://github.com/kermitt2/grobid">A machine learning software for extracting information from scholarly documents</ref>
                </application>
            </appInfo>
        </encodingDesc>
    </teiHeader>
    <text xml:lang="en">
        <p>In this study we assess the quality of multi-GNSS observations of recent Android smartphones. The results reveal a significant drop of smartphone carrier-to-noise density ratio (C/N0) with respect to geodetic receivers, and discernible differences among constellations and frequency bands. We show that the higher the elevation of the satellite, the larger discrepancy in C/N0 between the geodetic receivers and smartphones. Thus we show that a C/N0 weighting scheme may be superior to the elevation dependent one usually adopted for GNSS observations. We also discover that smartphone code pseudoranges are noisier by about one order of magnitude as compared to geodetic receivers, and that the code signals on L5 and E5a outperform those on L1 and E1, respectively. It is shown that smartphone phase observations are contaminated by the effects that can destroy the integer property and time-constancy of the ambiguities. There are long term drifts detected for GPS L5, Galileo E1, E5a and BDS B1 phase observations of Huawei P30. We highlight competitive phase noise characteristics for the Xiaomi Mi 8 when compared to the geodetic receivers. We also reveal a poor quality of other than GPS L1 phase signals for the Huawei P30 smartphones related to the unexpected drifts of the observations. Finally, the positioning experiment proves that it is feasible to obtain a precise cm-level solution of a smartphone to smartphone relative positioning with fixed integer ambiguities.In this study we assess the quality of multi-GNSS observations of recent Android smartphones. The results reveal a significant drop of smartphone carrier-to-noise density ratio (C/N0) with respect to geodetic receivers, and discernible differences among constellations and frequency bands. We show that the higher the elevation of the satellite, the larger discrepancy in C/N0 between the geodetic receivers and smartphones. Thus we show that a C/N0 weighting scheme may be superior to the elevation dependent one usually adopted for GNSS observations. We also discover that smartphone code pseudoranges are noisier by about one order of magnitude as compared to geodetic receivers, and that the code signals on L5 and E5a outperform those on L1 and E1, respectively. It is shown that smartphone phase observations are contaminated by the effects that can destroy the integer property and time-constancy of the ambiguities. There are long term drifts detected for GPS L5, Galileo E1, E5a and BDS B1 phase observations of Huawei P30. We highlight competitive phase noise characteristics for the Xiaomi Mi 8 when compared to the geodetic receivers. We also reveal a poor quality of other than GPS L1 phase signals for the Huawei P30 smartphones related to the unexpected drifts of the observations. Finally, the positioning experiment proves that it is feasible to obtain a precise cm-level solution of a smartphone to smartphone relative positioning with fixed integer ambiguities.</p>
        <p>Smartphones, handheld and low-cost GNSS receivers, due to their low costs and ubiquitous availability, have been already treasured in a broad spectrum of applications such as personal and professional navigation, vehicle tracking, safety management, social networking and many others [1][2][3][4][5]. In these applications the single point positioning mode based on single-frequency code observations, which offers the accuracy of several meters, is mostly satisfactory. Nonetheless, smartphone GNSS measurements have recently been subject to extensive studies on their application to precise positioning techniques such as Precise Point Positioning (PPP) or Real Time Kinematics (RTK) [6][7][8][9][10]. These studies are driven by the availability of phase observations collected by recent Android devices. Further advances in this field may stimulate the expansion of traditional applications of smartphones across novel areas of science and technology, which require precise position-based services [11][12][13]. It is also anticipated that ongoing progress in smartphone and low-cost receiver GNSS positioning will induce perception of these devices as a favourable complement to geodetic grade receivers [14][15][16][17][18].Smartphones, handheld and low-cost GNSS receivers, due to their low costs and ubiquitous availability, have been already treasured in a broad spectrum of applications such as personal and professional navigation, vehicle tracking, safety management, social networking and many others [1][2][3][4][5]. In these applications the single point positioning mode based on single-frequency code observations, which offers the accuracy of several meters, is mostly satisfactory. Nonetheless, smartphone GNSS measurements have recently been subject to extensive studies on their application to precise positioning techniques such as Precise Point Positioning (PPP) or Real Time Kinematics (RTK) [6][7][8][9][10]. These studies are driven by the availability of phase observations collected by recent Android devices. Further advances in this field may stimulate the expansion of traditional applications of smartphones across novel areas of science and technology, which require precise position-based services [11][12][13]. It is also anticipated that ongoing progress in smartphone and low-cost receiver GNSS positioning will induce perception of these devices as a favourable complement to geodetic grade receivers [14][15][16][17][18].</p>
        <p>More than a few studies have already investigated the quality of smartphone GNSS observations. Overall, they found that such measurements are susceptible to high multipath and are a subject to low signal-to-noise ratio and inhomogeneous pattern of antenna gain, which in turn is reflected in several times higher observational noise as compared to geodetic receivers [19][20][21][22]. Fortunately, it seems that one of other important constraints of precise positioning with smartphone observations, which is duty cycling mode, is currently not an issue [23,24]. On the other hand, several anomalous phenomena present in smartphone GNSS phase observation may prevent their application to the most precise positioning techniques [25][26][27][28]. These abnormal effects strictly depend on the smartphone, or, to be more specific, the GNSS chipset and antenna, and therefore their presence and properties should be explored for each new smart device, which motivates our study.More than a few studies have already investigated the quality of smartphone GNSS observations. Overall, they found that such measurements are susceptible to high multipath and are a subject to low signal-to-noise ratio and inhomogeneous pattern of antenna gain, which in turn is reflected in several times higher observational noise as compared to geodetic receivers [19][20][21][22]. Fortunately, it seems that one of other important constraints of precise positioning with smartphone observations, which is duty cycling mode, is currently not an issue [23,24]. On the other hand, several anomalous phenomena present in smartphone GNSS phase observation may prevent their application to the most precise positioning techniques [25][26][27][28]. These abnormal effects strictly depend on the smartphone, or, to be more specific, the GNSS chipset and antenna, and therefore their presence and properties should be explored for each new smart device, which motivates our study.</p>
        <p>Most of the studies on smartphone GNSS observations took advantage of a single smart device or were confined to the analysis of the observation noise and multipath effects of single frequency signals and selected GNSS systems [29,30]. A few recent papers investigated the feasibility of precise positioning with the smartphones equipped with dual-frequency GNSS chipsets such as Huawei P30 or Xiaomi Mi 8. These studies were however limited to e.g. the application of selected frequency bands without an in-sight evaluation of signals of all frequencies and constellations, or collation with other smart devices [31][32][33][34].Most of the studies on smartphone GNSS observations took advantage of a single smart device or were confined to the analysis of the observation noise and multipath effects of single frequency signals and selected GNSS systems [29,30]. A few recent papers investigated the feasibility of precise positioning with the smartphones equipped with dual-frequency GNSS chipsets such as Huawei P30 or Xiaomi Mi 8. These studies were however limited to e.g. the application of selected frequency bands without an in-sight evaluation of signals of all frequencies and constellations, or collation with other smart devices [31][32][33][34].</p>
        <p>To extend the knowledge in this field, we comprehensively assess and compare the quality of GPS, Galileo, BDS and GLONASS observations collected by several recent 
            <rs type="software">Android</rs> smartphones including these equipped with dual-frequency chipsets such as Huawei P30, Xiaomi Mi 8 and Mi 9, as well as Huawei P20 and P Smart that acquire only singlefrequency GNSS signals. We evaluate the observational noise and signal strength of the available frequencies for quadruple GNSS constellations. We analyse the phase observations of smartphone GNSS signals in terms of their integer and time-constant properties. Utilisation of pairs of homogenous smart devices allow us to also verify whether a similar performance can be obtained with smartphone of the same model. The results of the evaluation make it possible to draw conclusions on the anticipated performance of positioning with smart devices, including the feasibility of providing reliable and precise positioning based on carrier phase observations. Furthermore, the information of GNSS observation noise is performed for the first time for smartphone phase observations with the so called 'variometric approach' [35], which allow the development of a stochastic model for positioning [36]. To support the GNSS measurement analysis, we investigate the propagation of smartphone observation noise into coordinate estimates in smartphone to smartphone relative positioning.
        </p>
        <p>This study is organized as follows. In the following section we describe the experiment design and comment on the GNSS signals tracking capability of the employed smartphones. Then we evaluate the GNSS signal strength in terms of a carrier-to-noise density ratio. In the next section we analyse the noise of the code pseudoranges collected by smartphones. In the following section we focus on phase observations in terms of the feasibility of ambiguity fixing, as well as assessing the observational noise. Finally, we evaluate the performance of smartphone to smartphone relative positioning with a selected pair of homogeneous devices. In the last section we draw the conclusions and anticipate future work.This study is organized as follows. In the following section we describe the experiment design and comment on the GNSS signals tracking capability of the employed smartphones. Then we evaluate the GNSS signal strength in terms of a carrier-to-noise density ratio. In the next section we analyse the noise of the code pseudoranges collected by smartphones. In the following section we focus on phase observations in terms of the feasibility of ambiguity fixing, as well as assessing the observational noise. Finally, we evaluate the performance of smartphone to smartphone relative positioning with a selected pair of homogeneous devices. In the last section we draw the conclusions and anticipate future work.</p>
        <p>GNSS observations from selected recent smartphones were collected in the vicinity of the UWM campus with 1 s sampling rate using the 
            <rs type="software">Android GEO++ RINEX Logger</rs> ver. 
            <rs type="version">2.1.6</rs> [37] for approximately 5 h between 8 and 13 UTC time on December 11, 2019. The smartphones were placed under relatively unobstructed sky environment alongside two high-grade receivers, namely Topcon NetG5 (TOR1) and Trimble Alloy (ALR1) with geodetic-grade antennas Septentrio PolaNt* MC and Trimble Zephyr GNSS Geodetic II, respectively. Since we used a tripod setup shown in Fig. 1, the smartphones formed a straight line with the inter-antenna distances equalled to approximately 20 cm. The benchmark coordinates of the temporal sites were determined in a static positioning model with observations collected by the geodetic receivers. We take into account vertical offsets of smartphone antennas but neglect the impact of horizontal components. As showed by Wanninger and Heßelbarth [33], such simplification is justified in most applications.
        </p>
        <p>Table 1 lists the employed smartphones with corresponding abbreviation of RINEX files and summarizes GNSS signal tracking capabilities. In the experiment we used pairs of Xiaomi Mi 8, Xiaomi Mi 9 and Huawei P30 pro smartphones, as well as single devices of Huawei P Smart and Huawei P20. The Xiaomi Mi 8, Huawei P30 pro and Xiaomi Mi 9 smartphones are all equipped with dual-frequency GNSS chipsets. Since the Xiaomi Mi 9 device does not acquire phase observations, we can only assess the code pseudoranges. As can be seen in Table 1, the Huawei P Smart tracks single frequency GPS + GLONASS code observables. Finally Huawei P20 is able to acquire single frequency phase and code quadruple constellation observables, however this receiver is subject to a duty cycling effect. As a consequence and after approximately 5 min of data collection, when the duty cycling was turned on, the GEO++ RINEX Logger stopped logging phase observables.Table 1 lists the employed smartphones with corresponding abbreviation of RINEX files and summarizes GNSS signal tracking capabilities. In the experiment we used pairs of Xiaomi Mi 8, Xiaomi Mi 9 and Huawei P30 pro smartphones, as well as single devices of Huawei P Smart and Huawei P20. The Xiaomi Mi 8, Huawei P30 pro and Xiaomi Mi 9 smartphones are all equipped with dual-frequency GNSS chipsets. Since the Xiaomi Mi 9 device does not acquire phase observations, we can only assess the code pseudoranges. As can be seen in Table 1, the Huawei P Smart tracks single frequency GPS + GLONASS code observables. Finally Huawei P20 is able to acquire single frequency phase and code quadruple constellation observables, however this receiver is subject to a duty cycling effect. As a consequence and after approximately 5 min of data collection, when the duty cycling was turned on, the GEO++ RINEX Logger stopped logging phase observables.</p>
        <p>We begin the investigations with the analysis of the number of tracked satellites. We distinguish between frequency bands and constellations, therefore Fig. 2a visualizes the number of satellites of which code observations on L1/E1/B1/G1 bands were acquired, whereas Fig. 2b shows the corresponding results for L5 and E5a, all given with an elevation cut-off angle of 10 • . Finally in Table 2 we report the mean number of satellites over all epochs.We begin the investigations with the analysis of the number of tracked satellites. We distinguish between frequency bands and constellations, therefore Fig. 2a visualizes the number of satellites of which code observations on L1/E1/B1/G1 bands were acquired, whereas Fig. 2b shows the corresponding results for L5 and E5a, all given with an elevation cut-off angle of 10 • . Finally in Table 2 we report the mean number of satellites over all epochs.</p>
        <p>Table 2 demonstrates that the most recent smartphones, namely Xiaomi Mi 8, Xiaomi Mi 9 and Huawei P30, acquired comparable number of GPS satellites, which is close to that of the geodetic receivers. This is reflected in the mean number of satellites, which fitted the range of 9.5-11.2 and 3.4-4.6 for L1 and L5 bands, respectively. A significantly lower number of acquired satellites offering L5 signals is an obvious consequence of their low number in the GPS constellation [38]. Both Huawei P20 and Huawei P Smart were characterized with noticeable poorer performance in terms of GPS and GLONASS satellite tracking capability with respect to the most recent smart devices such as Xiaomi Mi 8, Mi 9 and Huawei P 30.Table 2 demonstrates that the most recent smartphones, namely Xiaomi Mi 8, Xiaomi Mi 9 and Huawei P30, acquired comparable number of GPS satellites, which is close to that of the geodetic receivers. This is reflected in the mean number of satellites, which fitted the range of 9.5-11.2 and 3.4-4.6 for L1 and L5 bands, respectively. A significantly lower number of acquired satellites offering L5 signals is an obvious consequence of their low number in the GPS constellation [38]. Both Huawei P20 and Huawei P Smart were characterized with noticeable poorer performance in terms of GPS and GLONASS satellite tracking capability with respect to the most recent smart devices such as Xiaomi Mi 8, Mi 9 and Huawei P 30.</p>
        <p>We noticed that the number of satellites for Galileo constellation was much more diversified among smartphones. What follows from Table 1 and Fig. 2a is that the highest number of Galileo satellites with E1 signal were acquired by one of the Xiaomi Mi 9 smartphones (XI9M), as depicted by blue line in Fig. 2a. In this case the mean number of satellites was even slightly higher than that of Trimble Alloy (ALR1). Other smartphones had acquired up to a half of this number of satellites. We also discovered a low number of Galileo satellites with E1 signals tracked by both Huawei P30 smartphones, which was maximally 3 but mostly up to 2 as depicted by light and dark green lines in Fig. 2a. Unexpectedly, three more Galileo satellites were tracked at the E5a band by these smartphones (Fig. 2b). Such nonhomogeneous number of acquired signals between Galileo E1 and E5a bands by Huawei P30 seems to be an effect of low quality of raw measurements indicators not reaching the thresholds internal to the GNSS logger [34]. Being that these thresholds are smartphone independent, the different number of tracked signals is a result in terms of observation quality assessment and not a lack of data.We noticed that the number of satellites for Galileo constellation was much more diversified among smartphones. What follows from Table 1 and Fig. 2a is that the highest number of Galileo satellites with E1 signal were acquired by one of the Xiaomi Mi 9 smartphones (XI9M), as depicted by blue line in Fig. 2a. In this case the mean number of satellites was even slightly higher than that of Trimble Alloy (ALR1). Other smartphones had acquired up to a half of this number of satellites. We also discovered a low number of Galileo satellites with E1 signals tracked by both Huawei P30 smartphones, which was maximally 3 but mostly up to 2 as depicted by light and dark green lines in Fig. 2a. Unexpectedly, three more Galileo satellites were tracked at the E5a band by these smartphones (Fig. 2b). Such nonhomogeneous number of acquired signals between Galileo E1 and E5a bands by Huawei P30 seems to be an effect of low quality of raw measurements indicators not reaching the thresholds internal to the GNSS logger [34]. Being that these thresholds are smartphone independent, the different number of tracked signals is a result in terms of observation quality assessment and not a lack of data.</p>
        <p>Both Huawei P30 smartphones (H30U and H30M) showed a comparable performance in terms of the number of tracked satellites. In case of Xiaomi Mi 9 smartphones this holds true only for GPS and GLONASS constellations, since we can see obvious differences for BDS and Galileo systems. XI9M acquired the average number of 8 and 6.4 satellites for Galileo and BDS systems, respectively, while for XI9W this statistics reached only 3 and 2. After careful inspection of the RINEX files we also discovered that quite frequently the smartphones were not acquiring the same satellites. Moreover despite the fact that both Xiaomi Mi 8 smartphones are equipped with the same GNSS chipset, one of the smartphones (XI8R) did not acquire Galileo and BDS signals during the experiment. Being that the GNSS Logger is the same for all the smartphones, the different number of tracked signals is an initial result in terms of observation quality assessment that demonstrates the different behaviours of identical models in similar conditions.Both Huawei P30 smartphones (H30U and H30M) showed a comparable performance in terms of the number of tracked satellites. In case of Xiaomi Mi 9 smartphones this holds true only for GPS and GLONASS constellations, since we can see obvious differences for BDS and Galileo systems. XI9M acquired the average number of 8 and 6.4 satellites for Galileo and BDS systems, respectively, while for XI9W this statistics reached only 3 and 2. After careful inspection of the RINEX files we also discovered that quite frequently the smartphones were not acquiring the same satellites. Moreover despite the fact that both Xiaomi Mi 8 smartphones are equipped with the same GNSS chipset, one of the smartphones (XI8R) did not acquire Galileo and BDS signals during the experiment. Being that the GNSS Logger is the same for all the smartphones, the different number of tracked signals is an initial result in terms of observation quality assessment that demonstrates the different behaviours of identical models in similar conditions.</p>
        <p>In view of the above results we can conclude that the smartphones may be characterized with varied performance in terms of GNSS satellite tracking capabilities for the location at hand.In view of the above results we can conclude that the smartphones may be characterized with varied performance in terms of GNSS satellite tracking capabilities for the location at hand.</p>
        <p>We take advantage of a carrier-to-noise density ratio (C/N0) to characterise the strength of the signals collected by the employed smartphones. We define C/N0 as the ratio of the signal to noise power in a 1 Hz bandwidth. C/N0 reflects the quality of collected GNSS observations, since this indicator is prone to the losses and gains driven by receiver hardware, propagation errors and satellite antenna and payload [39]. We should note in the results that the data collection was not performed in a zero-baseline scenario, but the antenna location of each unit was slightly different (c.f. Fig. 1).We take advantage of a carrier-to-noise density ratio (C/N0) to characterise the strength of the signals collected by the employed smartphones. We define C/N0 as the ratio of the signal to noise power in a 1 Hz bandwidth. C/N0 reflects the quality of collected GNSS observations, since this indicator is prone to the losses and gains driven by receiver hardware, propagation errors and satellite antenna and payload [39]. We should note in the results that the data collection was not performed in a zero-baseline scenario, but the antenna location of each unit was slightly different (c.f. Fig. 1).</p>
        <p>Figs. 3a and 3b show the frequency distribution histograms of C/N0 logged by the smartphones and the geodetic receivers which were used in the experiment. In particular, Fig. 3a depicts the values related to the first frequency band (L1, E1, B1 and G1), whereas Fig. 3b illustrates the results corresponding to the second band, which in this case is L5 and E5a of GPS and Galileo, respectively. What transpires from the figures is that the C/N0 values of the smartphones are generally concentrated in 30-40 dB-Hz bin, which is the most noticeable for GPS and GLONASS at first frequency band (top left and bottom right panels of Fig. 3a). With regard to the geodetic receivers (black and grey coloured bins), the highest concentration is seen in the range of 40-50 dB-Hz. Such results confirm the noticeably higher strength expected of the signals collected by geodetic receivers with respect to that of the smartphones.Figs. 3a and 3b show the frequency distribution histograms of C/N0 logged by the smartphones and the geodetic receivers which were used in the experiment. In particular, Fig. 3a depicts the values related to the first frequency band (L1, E1, B1 and G1), whereas Fig. 3b illustrates the results corresponding to the second band, which in this case is L5 and E5a of GPS and Galileo, respectively. What transpires from the figures is that the C/N0 values of the smartphones are generally concentrated in 30-40 dB-Hz bin, which is the most noticeable for GPS and GLONASS at first frequency band (top left and bottom right panels of Fig. 3a). With regard to the geodetic receivers (black and grey coloured bins), the highest concentration is seen in the range of 40-50 dB-Hz. Such results confirm the noticeably higher strength expected of the signals collected by geodetic receivers with respect to that of the smartphones.</p>
        <p>The average C/N0 differences between the Trimble Alloy and the employed smartphones, as computed over all epochs and satellites, are given in Table 3. In general GPS L1 signals of the smartphones are of similar strength when compared to each other, and they are approximately 5-6 dB-Hz weaker than that of the Trimble receiver. The corresponding differences for Galileo E1 band are almost two times higher than that of other frequencies and fit the range of 8.5-10.8 dB-Hz. Relatively homogenous results were also obtained for the GLONASS constellation. In this case the drop in C/N0 with respect to geodetic receiver reaches up to 11.9 dB-Hz. For BDS constellation we discovered that smartphone signals are characterized with lower C/N0 values of about 3.8-6.9 dB-Hz as compared to signals collected by the geodetic receivers. The C/N0 of the signals at L5/E5a frequency bands collected by the smartphones show noticeably lower values when compared to L1/E1. A similar finding was also discovered by Massarweh et al. [40]. What is interesting however, is that both the Xiaomi Mi 8 and Huawei P30 smartphones were subject to significantly higher drop in C/N0 than the Xiaomi Mi 9. In the latter case the C/N0 difference with respect to Trimble Alloy went from 5.3 to 5.7 dB-Hz for L1 to 6.5-6.6 dB-Hz for L5. For the Galileo constellation, the signals collected by Xiaomi Mi 9 showed even slightly higher values for E5a than for E1 frequency band. The highest discrepancies in C/N0 between the geodetic receiver and the smartphone were obtained for L5 and E5a signals collected by Huawei P30. In this case the C/N0 difference were in the range of 14.0-15.5 dB-Hz. Such low signal strength for L5/E5a observations of Huawei P30 may indicate potential further consequences reflected in e.g. higher signal noise and multipath, more frequent cycle slips or presence of some other phenomena.The average C/N0 differences between the Trimble Alloy and the employed smartphones, as computed over all epochs and satellites, are given in Table 3. In general GPS L1 signals of the smartphones are of similar strength when compared to each other, and they are approximately 5-6 dB-Hz weaker than that of the Trimble receiver. The corresponding differences for Galileo E1 band are almost two times higher than that of other frequencies and fit the range of 8.5-10.8 dB-Hz. Relatively homogenous results were also obtained for the GLONASS constellation. In this case the drop in C/N0 with respect to geodetic receiver reaches up to 11.9 dB-Hz. For BDS constellation we discovered that smartphone signals are characterized with lower C/N0 values of about 3.8-6.9 dB-Hz as compared to signals collected by the geodetic receivers. The C/N0 of the signals at L5/E5a frequency bands collected by the smartphones show noticeably lower values when compared to L1/E1. A similar finding was also discovered by Massarweh et al. [40]. What is interesting however, is that both the Xiaomi Mi 8 and Huawei P30 smartphones were subject to significantly higher drop in C/N0 than the Xiaomi Mi 9. In the latter case the C/N0 difference with respect to Trimble Alloy went from 5.3 to 5.7 dB-Hz for L1 to 6.5-6.6 dB-Hz for L5. For the Galileo constellation, the signals collected by Xiaomi Mi 9 showed even slightly higher values for E5a than for E1 frequency band. The highest discrepancies in C/N0 between the geodetic receiver and the smartphone were obtained for L5 and E5a signals collected by Huawei P30. In this case the C/N0 difference were in the range of 14.0-15.5 dB-Hz. Such low signal strength for L5/E5a observations of Huawei P30 may indicate potential further consequences reflected in e.g. higher signal noise and multipath, more frequent cycle slips or presence of some other phenomena.</p>
        <p>In the consecutive panels of Fig. 4 we show C/N0 as a function of the satellite elevation for the analysed smartphones and geodetic receivers. For the sake of a clear comparison the values corresponding to different satellites were distinguished by different colours and were averaged in 1 • bins. The figure illustrates that a strong elevation dependence of the signal strength holds true for geodetic receivers, but may not always be a valid assumption for the smartphones. Moreover, the results even give us the impression of occasional lower C/N0 at high elevations (&gt;70 • ) with respect to elevations at 30 • -50 • for the smartphones. At the same time, we can read from the figure that for low-elevated satellites (10 • -30 • ) the C/N0 of the signals collected by the smartphones show much more of a discrete pattern than for C/N0 values at higher elevation angles.In the consecutive panels of Fig. 4 we show C/N0 as a function of the satellite elevation for the analysed smartphones and geodetic receivers. For the sake of a clear comparison the values corresponding to different satellites were distinguished by different colours and were averaged in 1 • bins. The figure illustrates that a strong elevation dependence of the signal strength holds true for geodetic receivers, but may not always be a valid assumption for the smartphones. Moreover, the results even give us the impression of occasional lower C/N0 at high elevations (&gt;70 • ) with respect to elevations at 30 • -50 • for the smartphones. At the same time, we can read from the figure that for low-elevated satellites (10 • -30 • ) the C/N0 of the signals collected by the smartphones show much more of a discrete pattern than for C/N0 values at higher elevation angles.</p>
        <p>In Fig. 5 we focus on the C/N0 values of GPS L1 as a function of the elevation for a few selected satellites. We distinguish between the selected satellites in the separate panels, and combine the results of the smartphones and the geodetic receivers into the same figure panels. The plots confirm noticeable higher strength of the signals collected by both geodetic receivers (black and grey lines) with respect to the smartphones. Moreover, even though the C/N0 were averaged in 1 • bins, smartphone C/N0 series are noticeably of noisier nature than those of geodetic receivers. We also discover that the higher elevation of the tracked satellite, the larger discrepancy in C/N0 between the geodetic receivers and the smartphones. This effect is not only driven by increasing C/N0 as a function of satellite elevation for geodetic receivers, but also by occasional drops in the C/N0 at high elevations for the smartphones. The latter effect is clearly depicted particularly for the GPS PRN 23 satellite in the bottom right panel of Fig. 5.In Fig. 5 we focus on the C/N0 values of GPS L1 as a function of the elevation for a few selected satellites. We distinguish between the selected satellites in the separate panels, and combine the results of the smartphones and the geodetic receivers into the same figure panels. The plots confirm noticeable higher strength of the signals collected by both geodetic receivers (black and grey lines) with respect to the smartphones. Moreover, even though the C/N0 were averaged in 1 • bins, smartphone C/N0 series are noticeably of noisier nature than those of geodetic receivers. We also discover that the higher elevation of the tracked satellite, the larger discrepancy in C/N0 between the geodetic receivers and the smartphones. This effect is not only driven by increasing C/N0 as a function of satellite elevation for geodetic receivers, but also by occasional drops in the C/N0 at high elevations for the smartphones. The latter effect is clearly depicted particularly for the GPS PRN 23 satellite in the bottom right panel of Fig. 5.</p>
        <p>In Fig. 6 we present the skyplots of C/N0 for Trimble Alloy (ALR1) and Xiaomi Mi 8 (XI8J) in left and right panels respectively, and in Fig. 7 we show the differences between the C/N0 of the GNSS signals collected by Trimble Alloy and the consecutive smartphones. Fig. 6 demonstrates a clear azimuthal symmetry and a high elevation dependency of C/N0 of the signals collected by Trimble Alloy. On the contrary, as we can read from the right panel of Fig. 6, C/N0 values of Xiaomi Mi 8 are subject to azimuthal asymmetry and occasional outstanding drops of C/N0 at high elevations. The skyplots of the C/N0 differences between Trimble Alloy and smartphones given in Fig. 7 confirm that at high elevations smartphones are characterised with significantly higher differences of C/N0 with respect to geodetic receiver and when compared to that of low elevation angles (up to 30 • ). Occasionally, these C/N0 differences may reach up to 15 dB-Hz for the elevations over 60 • , but at the same time for the elevation angles up to 30 • they do mostly not exceed 5 dB-Hz, except for a few outliers.In Fig. 6 we present the skyplots of C/N0 for Trimble Alloy (ALR1) and Xiaomi Mi 8 (XI8J) in left and right panels respectively, and in Fig. 7 we show the differences between the C/N0 of the GNSS signals collected by Trimble Alloy and the consecutive smartphones. Fig. 6 demonstrates a clear azimuthal symmetry and a high elevation dependency of C/N0 of the signals collected by Trimble Alloy. On the contrary, as we can read from the right panel of Fig. 6, C/N0 values of Xiaomi Mi 8 are subject to azimuthal asymmetry and occasional outstanding drops of C/N0 at high elevations. The skyplots of the C/N0 differences between Trimble Alloy and smartphones given in Fig. 7 confirm that at high elevations smartphones are characterised with significantly higher differences of C/N0 with respect to geodetic receiver and when compared to that of low elevation angles (up to 30 • ). Occasionally, these C/N0 differences may reach up to 15 dB-Hz for the elevations over 60 • , but at the same time for the elevation angles up to 30 • they do mostly not exceed 5 dB-Hz, except for a few outliers.</p>
        <p>The availability of phase observations collected by modern smartphones creates an opportunity to employ code-minus-carrier phase (CMC) linear combination (LC) and therefore assess the stochastic properties of code pseudoranges [41]. We use CMC LC in undifferenced form, which for satellite s and receiver r is expressed as follows:The availability of phase observations collected by modern smartphones creates an opportunity to employ code-minus-carrier phase (CMC) linear combination (LC) and therefore assess the stochastic properties of code pseudoranges [41]. We use CMC LC in undifferenced form, which for satellite s and receiver r is expressed as follows:</p>
        <p>where Φ is the carrier phase observable in the unit of meters; P denotes the code pseudorange in meters; λ is the signal wavelength in meters; N s r is the integer ambiguity of the undifferenced phase observable in cycles;ϕ r,0 and ϕ s 0 denote the receiver and the satellite initial phase bias in cycles, respectively; δ r and δ s are the receiver and satellite phase delay in meters, while d r and d s correspond to the receiver and satellite code pseudorange delay in meters, respectively; I denotes the ionospheric delay in meters,M is the multipath effect in the unit of meters, and finally ∊ denotes the observation noise.where Φ is the carrier phase observable in the unit of meters; P denotes the code pseudorange in meters; λ is the signal wavelength in meters; N s r is the integer ambiguity of the undifferenced phase observable in cycles;ϕ r,0 and ϕ s 0 denote the receiver and the satellite initial phase bias in cycles, respectively; δ r and δ s are the receiver and satellite phase delay in meters, while d r and d s correspond to the receiver and satellite code pseudorange delay in meters, respectively; I denotes the ionospheric delay in meters,M is the multipath effect in the unit of meters, and finally ∊ denotes the observation noise.</p>
        <p>The undifferenced CMC LC aggregates the combination of observation noise and multipath effect but is also subject to a doubled ionospheric delay, and, considered as constant over time, an ambiguity term, as well as a combination of satellite and receiver code/phase biases. To isolate the pseudorange noise from other effects in CMC time series, following de Bakker et al. [42], a polynomial fitting between jumps of the LC series that are caused by cycle slips was computed, and the mean values using a 120 s time span were subtracted from the time-series. CMC LC was computed for the smartphones that offer phase observations, namely Huawei P30, and Xiaomi Mi 8. We excluded Huawei P20 from the analysis since its observations are contaminated by the earlier referenced duty cycling effect.The undifferenced CMC LC aggregates the combination of observation noise and multipath effect but is also subject to a doubled ionospheric delay, and, considered as constant over time, an ambiguity term, as well as a combination of satellite and receiver code/phase biases. To isolate the pseudorange noise from other effects in CMC time series, following de Bakker et al. [42], a polynomial fitting between jumps of the LC series that are caused by cycle slips was computed, and the mean values using a 120 s time span were subtracted from the time-series. CMC LC was computed for the smartphones that offer phase observations, namely Huawei P30, and Xiaomi Mi 8. We excluded Huawei P20 from the analysis since its observations are contaminated by the earlier referenced duty cycling effect.</p>
        <p>Figs. 8 and 9 depict the example time series of CMC LC for GPS PRN 9 satellite computed from C1-L1 and C5-L5 signals, respectively. We show also the C/N0 records to illustrate their impact on signal noise. The top panels of both figures show the results for Trimble Alloy (ALR1), which serve as the benchmark values. We remark that we use different CMC axis limits for Trimble Alloy and the smartphones. The standard deviations (STD) depicted in Table 4 are computed as a mean over all epochs and satellites of the CMC LC for particular GNSS signals. In general, both Figs. 8 and9 demonstrate that the noise of smartphone code pseudoranges is larger by approximately one order of magnitude as compared to the geodetic receiver. The time series of C1-L1 CMC LC of smartphones, excluding outliers, fit the range of +/-10 m, while for the geodetic receiver these values do not exceed approximately 0.7 m. As Table 4 shows, the conclusion that smartphone code pseudoranges are several times noisier with respect to those of geodetic receivers, basically holds true for all constellations and signals. Taking as an example If we inspect the CMC time series in Figs. 8 and9 again, it gives us the impression that smartphone code pseudoranges transmitted on L5 frequency indeed outperform the L1 frequency in terms of lower observational noise. Such results were expected and are in line with the former studies conducted with geodetic receivers, as several researchers have already reported high precision of code pseudoranges on the L5 frequency band [43][44][45]. We note that a higher precision of smartphone code on L5 with respect to that on L1 is in contrary to the fact that the former signal is characterised with lower carrier-to-noise density ratio. As can be seen in Table 4, the statistics also confirmed a corresponding advantage of code signal on E5a over that on E1 in terms of a precision. Specifically, the STD of E5a code was reduced approximately by a factor of two with respect to that on E1 and reached 1.16 m and 1.34-2.06 m for Xiaomi Mi 8 and Huawei P30 smartphones, respectively. Table 4 reveals that code observations of Xiaomi Mi 8 are characterised with lower noise as compared to Huawei P30 in terms of GPS L5, Galileo E1/E5a and BDS B1 signals. The opposite situation occurs for code measurements on L1 and G1 frequencies of GPS and GLONASS, respectively. Nonetheless, except for GLONASS constellation, these divergences between Xiaomi Mi 8 and Huawei P30 smartphones are not significant. Warnant et al. [46] came to similar conclusions on the noticeable divergences between constellations in terms of the precision of code pseudoranges collected by smartphones. That study was, however, conducted with different smartphones, namely Samsung Galaxy S8 and Huawei Mate 9. After careful inspection of the statistics given in Table 4, we found a high agreement with the past results given by Chen et al., [47], who also analysed the code noise for Xiaomi Mi 8 smartphones. We confirm that the observations of this smartphone are indeed characterised with the highest noise for GLONASS pseudoranges, the [36,[48][49][50], who basically reported a high precision of code on E5a and L5 frequencies of Galileo and GPS constellations, respectively, and the lowest for the GLONASS pseudoranges.Figs. 8 and 9 depict the example time series of CMC LC for GPS PRN 9 satellite computed from C1-L1 and C5-L5 signals, respectively. We show also the C/N0 records to illustrate their impact on signal noise. The top panels of both figures show the results for Trimble Alloy (ALR1), which serve as the benchmark values. We remark that we use different CMC axis limits for Trimble Alloy and the smartphones. The standard deviations (STD) depicted in Table 4 are computed as a mean over all epochs and satellites of the CMC LC for particular GNSS signals. In general, both Figs. 8 and9 demonstrate that the noise of smartphone code pseudoranges is larger by approximately one order of magnitude as compared to the geodetic receiver. The time series of C1-L1 CMC LC of smartphones, excluding outliers, fit the range of +/-10 m, while for the geodetic receiver these values do not exceed approximately 0.7 m. As Table 4 shows, the conclusion that smartphone code pseudoranges are several times noisier with respect to those of geodetic receivers, basically holds true for all constellations and signals. Taking as an example If we inspect the CMC time series in Figs. 8 and9 again, it gives us the impression that smartphone code pseudoranges transmitted on L5 frequency indeed outperform the L1 frequency in terms of lower observational noise. Such results were expected and are in line with the former studies conducted with geodetic receivers, as several researchers have already reported high precision of code pseudoranges on the L5 frequency band [43][44][45]. We note that a higher precision of smartphone code on L5 with respect to that on L1 is in contrary to the fact that the former signal is characterised with lower carrier-to-noise density ratio. As can be seen in Table 4, the statistics also confirmed a corresponding advantage of code signal on E5a over that on E1 in terms of a precision. Specifically, the STD of E5a code was reduced approximately by a factor of two with respect to that on E1 and reached 1.16 m and 1.34-2.06 m for Xiaomi Mi 8 and Huawei P30 smartphones, respectively. Table 4 reveals that code observations of Xiaomi Mi 8 are characterised with lower noise as compared to Huawei P30 in terms of GPS L5, Galileo E1/E5a and BDS B1 signals. The opposite situation occurs for code measurements on L1 and G1 frequencies of GPS and GLONASS, respectively. Nonetheless, except for GLONASS constellation, these divergences between Xiaomi Mi 8 and Huawei P30 smartphones are not significant. Warnant et al. [46] came to similar conclusions on the noticeable divergences between constellations in terms of the precision of code pseudoranges collected by smartphones. That study was, however, conducted with different smartphones, namely Samsung Galaxy S8 and Huawei Mate 9. After careful inspection of the statistics given in Table 4, we found a high agreement with the past results given by Chen et al., [47], who also analysed the code noise for Xiaomi Mi 8 smartphones. We confirm that the observations of this smartphone are indeed characterised with the highest noise for GLONASS pseudoranges, the [36,[48][49][50], who basically reported a high precision of code on E5a and L5 frequencies of Galileo and GPS constellations, respectively, and the lowest for the GLONASS pseudoranges.</p>
        <p>In the previous section we could only analyse the CMC LC for a subset of the smartphones, since some of them do not acquire phase observations (c.f. Table 1). Therefore to analyse the baseline code precision for Xiaomi Mi 9, Huawei P Smart and Huawei P20, in the following, we take advantage of double differenced (DD) code observation residuals. The residuals were obtained by removing DD satellite-to-receiver geometric distance with known ultra-short baseline coordinates and precise satellite orbits [51] from DD code observations tracked by Trimble Alloy and the smartphones. As a result such residuals are considered free from the influence of both dispersive and non-dispersive propagation errors, hardware and clock biases, and satellite-to-receiver geometry. The variations of the residuals should be predominately driven by the noise of code observations as well as multipath effect, which is said to be a systematic effect over a short time span and periodic over a longer one [52]. The residuals for DD code observations read as follows:In the previous section we could only analyse the CMC LC for a subset of the smartphones, since some of them do not acquire phase observations (c.f. Table 1). Therefore to analyse the baseline code precision for Xiaomi Mi 9, Huawei P Smart and Huawei P20, in the following, we take advantage of double differenced (DD) code observation residuals. The residuals were obtained by removing DD satellite-to-receiver geometric distance with known ultra-short baseline coordinates and precise satellite orbits [51] from DD code observations tracked by Trimble Alloy and the smartphones. As a result such residuals are considered free from the influence of both dispersive and non-dispersive propagation errors, hardware and clock biases, and satellite-to-receiver geometry. The variations of the residuals should be predominately driven by the noise of code observations as well as multipath effect, which is said to be a systematic effect over a short time span and periodic over a longer one [52]. The residuals for DD code observations read as follows:</p>
        <p>where the satellite (m, n) to receiver (k, l) distance (ρ) were computed using known ground truth coordinates and precise satellite orbits. We use STD of the DD residuals time series as the statistical indicator of the observational noise. We note that the STDs will be amplified according to the error propagation law with respect to that related to undifferenced observables, as a result of double differencing process. In view of the low elevation dependence of smartphone observation noise as well as nonhomogeneous receivers forming the baseline, we do not provide undifferenced and zenith-referenced values here which may be derived by e.g. taking advantage of least-squares variance component estimation [53,54]. However we can still assess the code observation noise of smartphones by referring the results to the benchmark results as obtained with geodetic grade receivers [22].where the satellite (m, n) to receiver (k, l) distance (ρ) were computed using known ground truth coordinates and precise satellite orbits. We use STD of the DD residuals time series as the statistical indicator of the observational noise. We note that the STDs will be amplified according to the error propagation law with respect to that related to undifferenced observables, as a result of double differencing process. In view of the low elevation dependence of smartphone observation noise as well as nonhomogeneous receivers forming the baseline, we do not provide undifferenced and zenith-referenced values here which may be derived by e.g. taking advantage of least-squares variance component estimation [53,54]. However we can still assess the code observation noise of smartphones by referring the results to the benchmark results as obtained with geodetic grade receivers [22].</p>
        <p>In Table 5 we show the STD of DD code residuals for ultra-short baselines of mixed receivers, and in Table 6 we present corresponding values formed of a pair of homogenous smartphones. If we compare the STD of DD residuals for the baseline based on geodetic receivers (Trimble Alloy -Topcon NetG5) with the baselines formulated with smartphones, the conclusion is corroborated that smartphone code observations are at least ten times noisier with respect to those of surveying receivers. This is in line with the findings in the previous section. For instance for GPS L1 pseudoranges, the STD of DD code signals equalled to 0.68 m for the geodetic receivers and vary in the range of 5.00-9.58 m for the smartphones.In Table 5 we show the STD of DD code residuals for ultra-short baselines of mixed receivers, and in Table 6 we present corresponding values formed of a pair of homogenous smartphones. If we compare the STD of DD residuals for the baseline based on geodetic receivers (Trimble Alloy -Topcon NetG5) with the baselines formulated with smartphones, the conclusion is corroborated that smartphone code observations are at least ten times noisier with respect to those of surveying receivers. This is in line with the findings in the previous section. For instance for GPS L1 pseudoranges, the STD of DD code signals equalled to 0.68 m for the geodetic receivers and vary in the range of 5.00-9.58 m for the smartphones.</p>
        <p>The results obtained for the code DD observation residuals of Xiaomi Mi 8 (XI8J, XI8R) and Huawei P30 (H30U, H30M), see Table 5, are indeed coherent with the results obtained with CMC linear combination in Table 4. In specific pseudorange observations of Xiaomi Mi 8 are noisier than those of Huawei P30 for GPS L1 and GLONASS G1 signals. STD of code residuals given in Table 5 confirm that code signals on L5 and E5a always outperform those on L1 and E1, respectively, in terms of precision. Some divergences between CMC and DD residual analysis were however discovered in terms of L5 code precision of Xiaomi Mi 8 and Huawei P30. In specific, DD residuals revealed higher precision of the latter device (see Table 5) but CMC showed lower noise of the former (see Table 4). We attribute this inconsistence to the low number of acquired GPS satellites with L5 signal (3.4-4 depending on the smartphone, c.f. Table 2), when any single satellite has got relatively high impact on the statistics. We also recall the fact that basically slightly different satellites were tracked by the smartphones. The results in Table 5 show also that Huawei P Smart showed comparable to Xiaomi Mi 8 and Huawei P 30 precision of code observations on GPS L1 and the highest, among all smartphones, on GLONASS G1. We should however note that this smartphone tracked the lowest, among all smartphones, number of GLONASS satellites (c.f. Table 2).The results obtained for the code DD observation residuals of Xiaomi Mi 8 (XI8J, XI8R) and Huawei P30 (H30U, H30M), see Table 5, are indeed coherent with the results obtained with CMC linear combination in Table 4. In specific pseudorange observations of Xiaomi Mi 8 are noisier than those of Huawei P30 for GPS L1 and GLONASS G1 signals. STD of code residuals given in Table 5 confirm that code signals on L5 and E5a always outperform those on L1 and E1, respectively, in terms of precision. Some divergences between CMC and DD residual analysis were however discovered in terms of L5 code precision of Xiaomi Mi 8 and Huawei P30. In specific, DD residuals revealed higher precision of the latter device (see Table 5) but CMC showed lower noise of the former (see Table 4). We attribute this inconsistence to the low number of acquired GPS satellites with L5 signal (3.4-4 depending on the smartphone, c.f. Table 2), when any single satellite has got relatively high impact on the statistics. We also recall the fact that basically slightly different satellites were tracked by the smartphones. The results in Table 5 show also that Huawei P Smart showed comparable to Xiaomi Mi 8 and Huawei P 30 precision of code observations on GPS L1 and the highest, among all smartphones, on GLONASS G1. We should however note that this smartphone tracked the lowest, among all smartphones, number of GLONASS satellites (c.f. Table 2).</p>
        <p>If we inspect Table 5 further, we discover a distinctive noise of DD residuals of code observations on GPS L1, Galileo E5a, BDS and GLO-NASS frequencies for baselines formed by Xiaomi Mi 9 smartphones. For instance, the STD of DD code residuals on GPS L1 band reaches up to 9.58 m while for Xiaomi Mi 8, Huawei P Smart and P30, fits the range of 5.00-6.07 m. This finding is clearly confirmed by the result of DD residuals of homogenous receiver baselines showed in Table 6. For example, the STD of DD code on GPS L1 of 12.31 m for Xiaomi Mi 9 is significantly higher than of 7.53 m and 8.19 m for Huawei P30 and Xiaomi Mi 8, respectively. Basically, Xiaomi Mi 9 smartphones showed the highest noise of code observations on all frequencies with respect to other devices. Given also a lack of phase observations for this smartphone, we consider this successor of Xiaomi Mi 8 as a step backward in terms of application of smartphones to precise GNSS positioning.If we inspect Table 5 further, we discover a distinctive noise of DD residuals of code observations on GPS L1, Galileo E5a, BDS and GLO-NASS frequencies for baselines formed by Xiaomi Mi 9 smartphones. For instance, the STD of DD code residuals on GPS L1 band reaches up to 9.58 m while for Xiaomi Mi 8, Huawei P Smart and P30, fits the range of 5.00-6.07 m. This finding is clearly confirmed by the result of DD residuals of homogenous receiver baselines showed in Table 6. For example, the STD of DD code on GPS L1 of 12.31 m for Xiaomi Mi 9 is significantly higher than of 7.53 m and 8.19 m for Huawei P30 and Xiaomi Mi 8, respectively. Basically, Xiaomi Mi 9 smartphones showed the highest noise of code observations on all frequencies with respect to other devices. Given also a lack of phase observations for this smartphone, we consider this successor of Xiaomi Mi 8 as a step backward in terms of application of smartphones to precise GNSS positioning.</p>
        <p>The noise level highlighted in pseudorange measurements from 
            <rs type="software">Android</rs> devices (Table 4 andTable 5) may be reduced using different approaches. Despite its efficiency with geodetic receivers, the traditional phase-based Hatch filter [55] may not be the best approach to follow using GNSS observations from Android devices. In fact, cycle slips detection, which is crucial for the effectiveness of phase-based Hatch filter, can be limited by the quality of carrier-phase measurements (see sections 4.3 and 4.4). In this sense, Geng et al. [56] present a modified Hatch filter where a system of thresholds is used to optimize the smoothing process in the case of 
            <rs type="software">Android</rs> raw GNSS measurements. The use of doppler measurements, in combination with carrier-phase, is also beneficial to smooth the final positioning estimates as demonstrated from the Kalman filter presented in [19] and [24]. We remark however, that the use of e.g. carrier-phase smoothing of the code measurements is likely to introduce time correlation into the code measurements. If this is unaccounted for in a stochastic model, it can give poorer multi-epoch (Kalman-filter based) precise positioning results [54].
        </p>
        <p>This subsection aims to explore any unusual phenomena present in smartphone phase observations and therefore to assess the feasibility of fixing smartphone GPS, Galileo and BDS phase ambiguities to integer values. We employ DD phase observations between geodetic receiver and the smartphones through ultra-short baselines (2.21-3.63 m). We expect that the corresponding residuals should be characterised with white noise reflecting the precision of the phase signals, combined with potential multipath effects, all provided that the geometry effect and ambiguities are removed. The former factor was eliminated by the means of geometry-fixed model using known ground truth coordinates and precise satellite orbits [51]. Subtraction of the rounded mean value from the phase observation time series eliminates the ambiguities [42]. Any shifts or fluctuations present in the residual time series may manifest the presence of chipset so called initial phase biases (IPB) as shown in [28], or that the smartphones do not offer true full carrier-phase but an accumulated delta range with arbitrary IPBs [25,26,28]. DD ambiguities derived from such phase observations cannot be considered as time-constant and of integer property, and therefore cannot be fixed to integers to achieve centimetre-level positioning precisions. As a result, the performance of other precise positioning methods that require timeconstant ambiguities, and the use of multiple GNSS epochs and phase observations, would also deteriorate, such as PPP or PPP-RTK.This subsection aims to explore any unusual phenomena present in smartphone phase observations and therefore to assess the feasibility of fixing smartphone GPS, Galileo and BDS phase ambiguities to integer values. We employ DD phase observations between geodetic receiver and the smartphones through ultra-short baselines (2.21-3.63 m). We expect that the corresponding residuals should be characterised with white noise reflecting the precision of the phase signals, combined with potential multipath effects, all provided that the geometry effect and ambiguities are removed. The former factor was eliminated by the means of geometry-fixed model using known ground truth coordinates and precise satellite orbits [51]. Subtraction of the rounded mean value from the phase observation time series eliminates the ambiguities [42]. Any shifts or fluctuations present in the residual time series may manifest the presence of chipset so called initial phase biases (IPB) as shown in [28], or that the smartphones do not offer true full carrier-phase but an accumulated delta range with arbitrary IPBs [25,26,28]. DD ambiguities derived from such phase observations cannot be considered as time-constant and of integer property, and therefore cannot be fixed to integers to achieve centimetre-level positioning precisions. As a result, the performance of other precise positioning methods that require timeconstant ambiguities, and the use of multiple GNSS epochs and phase observations, would also deteriorate, such as PPP or PPP-RTK.</p>
        <p>In Figs. 10 and 11 we show the time series of L1 and L5 GPS DD phase residuals obtained from observations collected by Trimble Alloy and the smartphones that offer phase measurements (Xiaomi Mi 8 and Huawei P30). In the top panels of both figures we depict the respective residuals for the baseline built of a pair of geodetic receivers. One should note in Fig. 11 that different axis limits were applied for phase residuals in the bottom two panels when compared to other panels. As expected, Fig. 10 shows that the L1 residuals for baselines based on smartphone observations are much noisier when compared to geodetic receivers, and are subject to several outliers. More importantly, since the mean values of the former are close to zero and do not reveal any important long-term trends larger than one full cycle of carrier phase, we may anticipate that it is justified to consider ambiguities derived from such observations as time-constant and of integer nature. However we should not ignore the presence and, to some extent, fluctuations of fractional parts of cycle for mixed smartphone-to-geodetic receiver baselines. These may manifest the impact of multipath or phase biases inconstancy, which however requires further investigations.In Figs. 10 and 11 we show the time series of L1 and L5 GPS DD phase residuals obtained from observations collected by Trimble Alloy and the smartphones that offer phase measurements (Xiaomi Mi 8 and Huawei P30). In the top panels of both figures we depict the respective residuals for the baseline built of a pair of geodetic receivers. One should note in Fig. 11 that different axis limits were applied for phase residuals in the bottom two panels when compared to other panels. As expected, Fig. 10 shows that the L1 residuals for baselines based on smartphone observations are much noisier when compared to geodetic receivers, and are subject to several outliers. More importantly, since the mean values of the former are close to zero and do not reveal any important long-term trends larger than one full cycle of carrier phase, we may anticipate that it is justified to consider ambiguities derived from such observations as time-constant and of integer nature. However we should not ignore the presence and, to some extent, fluctuations of fractional parts of cycle for mixed smartphone-to-geodetic receiver baselines. These may manifest the impact of multipath or phase biases inconstancy, which however requires further investigations.</p>
        <p>If we inspect Fig. 11, we discover that residuals of L5 phase measurements of Huawei P30 show dissimilar pattern to those on its L1 frequency, since in the former we detect clear long-term drifts. L5 phase residuals do not show coincidence between pairs of satellites, therefore the effect should not be linked to malfunctioning of the GNSS chipset clock. These unusual and, in the case of geodetic receivers, unlikely effects prevent us from considering L5 DD ambiguities of Huawei P30 as time-constant and integer. On the other hand, similarly to L1 phase measurements, also those on L5 of Xiaomi Mi 8 are free from any longterm divergences and thus may be considered as usable for precise positioning.If we inspect Fig. 11, we discover that residuals of L5 phase measurements of Huawei P30 show dissimilar pattern to those on its L1 frequency, since in the former we detect clear long-term drifts. L5 phase residuals do not show coincidence between pairs of satellites, therefore the effect should not be linked to malfunctioning of the GNSS chipset clock. These unusual and, in the case of geodetic receivers, unlikely effects prevent us from considering L5 DD ambiguities of Huawei P30 as time-constant and integer. On the other hand, similarly to L1 phase measurements, also those on L5 of Xiaomi Mi 8 are free from any longterm divergences and thus may be considered as usable for precise positioning.</p>
        <p>In Figs. 12 and 13 we present the respective residuals for Galileo E1 and E5a phase observations. Since during the experiment both Huawei P30 smartphones acquired a low number of Galileo E1 signals (see Table 2), we augment these results with additional dataset collected on August 14, 2020 and plot the corresponding residuals in Fig. 14. Looking at the Figures we may conclude that the ambiguities derived from E1 and E5a observations of the Xiaomi Mi 8 can likely be considered integer and of time-constant nature. On the contrary, the E1 and E5a observation residuals of Huawei P30 manifest existence of significant unwanted drifts. Such disappointing results for GPS L5 and Galileo signals of Huawei P30 are in line with the findings of Geng and Li [28] and Wanninger and Heßelbarth [33], and this indicate properties of smartphone phase ambiguities or receiver phase biases which are dissimilar to geodetic receivers. Darugna et al. [7] showed likewise that ambiguities of their selected smartphones do not have integer characteristics, but seem to be the subject to unexplained biases. Since also Fig. 15 illustrates that BDS phase residuals of Huawei P30 are subject to noticeable fluctuations, at this time we consider only GPS L1 phase observations of Huawei P30 as useful for precise positioning with integer ambiguity fixing. Fortunately, phase observations of the Xiaomi Mi 8 are free from such long-term divergences. We proved that DD phase residuals of the smartphones are not only subject to observational noise but also are contaminated by other unwanted effects, which can inhibit integer ambiguity resolution and not allow for treating the ambiguities as time-constant parameters. Therefore, to isolate the observation noise from low frequency effects we take advantage of time differencing, and the noise of the phase observations is assessed with the so called 'variometric approach' in the next section.In Figs. 12 and 13 we present the respective residuals for Galileo E1 and E5a phase observations. Since during the experiment both Huawei P30 smartphones acquired a low number of Galileo E1 signals (see Table 2), we augment these results with additional dataset collected on August 14, 2020 and plot the corresponding residuals in Fig. 14. Looking at the Figures we may conclude that the ambiguities derived from E1 and E5a observations of the Xiaomi Mi 8 can likely be considered integer and of time-constant nature. On the contrary, the E1 and E5a observation residuals of Huawei P30 manifest existence of significant unwanted drifts. Such disappointing results for GPS L5 and Galileo signals of Huawei P30 are in line with the findings of Geng and Li [28] and Wanninger and Heßelbarth [33], and this indicate properties of smartphone phase ambiguities or receiver phase biases which are dissimilar to geodetic receivers. Darugna et al. [7] showed likewise that ambiguities of their selected smartphones do not have integer characteristics, but seem to be the subject to unexplained biases. Since also Fig. 15 illustrates that BDS phase residuals of Huawei P30 are subject to noticeable fluctuations, at this time we consider only GPS L1 phase observations of Huawei P30 as useful for precise positioning with integer ambiguity fixing. Fortunately, phase observations of the Xiaomi Mi 8 are free from such long-term divergences. We proved that DD phase residuals of the smartphones are not only subject to observational noise but also are contaminated by other unwanted effects, which can inhibit integer ambiguity resolution and not allow for treating the ambiguities as time-constant parameters. Therefore, to isolate the observation noise from low frequency effects we take advantage of time differencing, and the noise of the phase observations is assessed with the so called 'variometric approach' in the next section.</p>
        <p>The aim of this section is to assess the carrier-phase noise variation for the different handsets and the different signals considered in this work. In addition to this, frequency and correlationbetween smartphones -(if any) of faulty measurements are also investigated. Carrierphase tracking stability is analysed using the variometric approach Fig. 10. DD phase residuals for GPS L1. Different colours represent different satellites employed in DD observations. We distinguish between the baselines in the separate panels. Fig. 11. DD phase residuals for GPS L5. One should note that the bottom two panels, which correspond to Huawei P30 baselines, have different axis limits of phase residuals when compared to the top three panels. developed within the Geodesy and Geomatics Division of Sapienza University of Rome [12,35,57]. The method corresponds to the concept of time-differencing of GNSS measurements, which has proved its wide applicability over the years [58][59][60]19,61]. The variometric-phasei.e. . the time variation of carrier-phase measurements on a given frequency between two consecutive epochs is detailed in the following equation [23,35].The aim of this section is to assess the carrier-phase noise variation for the different handsets and the different signals considered in this work. In addition to this, frequency and correlationbetween smartphones -(if any) of faulty measurements are also investigated. Carrierphase tracking stability is analysed using the variometric approach Fig. 10. DD phase residuals for GPS L1. Different colours represent different satellites employed in DD observations. We distinguish between the baselines in the separate panels. Fig. 11. DD phase residuals for GPS L5. One should note that the bottom two panels, which correspond to Huawei P30 baselines, have different axis limits of phase residuals when compared to the top three panels. developed within the Geodesy and Geomatics Division of Sapienza University of Rome [12,35,57]. The method corresponds to the concept of time-differencing of GNSS measurements, which has proved its wide applicability over the years [58][59][60]19,61]. The variometric-phasei.e. . the time variation of carrier-phase measurements on a given frequency between two consecutive epochs is detailed in the following equation [23,35].</p>
        <p>where Δ denotes epoch differences, e s r is the unit vector linking receiver and satellite, and Δξ r is the displacement vector of the receiver between the two epochs (the symbol • is representative of a scalar products between the two vectors); Δδ r and Δδ s are the frequency dependent receiver and satellite clock error variation,where Δ denotes epoch differences, e s r is the unit vector linking receiver and satellite, and Δξ r is the displacement vector of the receiver between the two epochs (the symbol • is representative of a scalar products between the two vectors); Δδ r and Δδ s are the frequency dependent receiver and satellite clock error variation,</p>
        <p>OR is the geometric range variation due to changes in satellite position along the orbit and to Earth rotation, ΔI s r and ΔT s r the slant ionospheric and tropospheric variations, respectively,OR is the geometric range variation due to changes in satellite position along the orbit and to Earth rotation, ΔI s r and ΔT s r the slant ionospheric and tropospheric variations, respectively,</p>
        <p>EtOl are the effects of Earth tide and ocean loading on the geometric range variation, and Δp s r +ΔM s r +Δε s r is the sum of the variations of relativistic effects and phase wind up, multipath and other unmodelled effects.EtOl are the effects of Earth tide and ocean loading on the geometric range variation, and Δp s r +ΔM s r +Δε s r is the sum of the variations of relativistic effects and phase wind up, multipath and other unmodelled effects.</p>
        <p>The variometric phase equation contains 4 unknowns: the displacement vector Δξ r and the receiver clock error variation Δδ r . Since the displacement Δξ r is referred to a specific time interval (i.e. the two consecutive epochs) it is equivalent to a discrete 3D velocity.The variometric phase equation contains 4 unknowns: the displacement vector Δξ r and the receiver clock error variation Δδ r . Since the displacement Δξ r is referred to a specific time interval (i.e. the two consecutive epochs) it is equivalent to a discrete 3D velocity.</p>
        <p>[ Δρ s r ] OR , Δδ s are known terms from navigational message and standard models. ΔI s r and ΔT s r are largely eliminated if the time between two consecutive epochs is short enough (&gt;1 Hz). The Earth tide and ocean loading, relativistic and phase wind up effects, as well as receiver antenna phase center offsets and variations, although they can be modelled, are, in first approximation of this analysis, not considered, since their variation at 1 Hz can be safely neglected. Similarly, multipath effects are strongly correlated over small time spans, i.e. when differencing 1 Hz measurements, and its effect on the variometric equation is here assumed to be neglected. Building the time difference of carrier-phase measurements allows also to remove receiver and satellite phase biases leading to receiver and satellite clock errors variation independent from the signal frequency. It is worth to underline that carrier-phase ambiguity, under the hypothesis of no cycle slip, is cancelled within the variometric phase equation.[ Δρ s r ] OR , Δδ s are known terms from navigational message and standard models. ΔI s r and ΔT s r are largely eliminated if the time between two consecutive epochs is short enough (&gt;1 Hz). The Earth tide and ocean loading, relativistic and phase wind up effects, as well as receiver antenna phase center offsets and variations, although they can be modelled, are, in first approximation of this analysis, not considered, since their variation at 1 Hz can be safely neglected. Similarly, multipath effects are strongly correlated over small time spans, i.e. when differencing 1 Hz measurements, and its effect on the variometric equation is here assumed to be neglected. Building the time difference of carrier-phase measurements allows also to remove receiver and satellite phase biases leading to receiver and satellite clock errors variation independent from the signal frequency. It is worth to underline that carrier-phase ambiguity, under the hypothesis of no cycle slip, is cancelled within the variometric phase equation.</p>
        <p>If the receiver is static, as the case of all the GNSS devices in this work, the difference between variometric phase (Y) and the known term (B) of a WLS (Weighted Least Squares) analyses, contains only multipath and observation noise variation and the estimated receiver clock error variation. However, considering the very small effect of multipath -and even lower of multipath variation -on carrier-phase measurements, the analysis of the residuals, built as Y-B, enables the identification of faulty measurements based on the value of signal noise variation and cycle slip detection. In particular, a threshold equal to one wavelength is here used to detect faulty measurements in the phase acquisition.If the receiver is static, as the case of all the GNSS devices in this work, the difference between variometric phase (Y) and the known term (B) of a WLS (Weighted Least Squares) analyses, contains only multipath and observation noise variation and the estimated receiver clock error variation. However, considering the very small effect of multipath -and even lower of multipath variation -on carrier-phase measurements, the analysis of the residuals, built as Y-B, enables the identification of faulty measurements based on the value of signal noise variation and cycle slip detection. In particular, a threshold equal to one wavelength is here used to detect faulty measurements in the phase acquisition.</p>
        <p>The analyses are here carried out using GPS and Galileo L1/E1 and L5/E5a carrier-phase measurements from all the receivers available. Carrier-phase observations were collected only for the first 300 epochs with Huawei P20 due to the activation of duty cycling mode and for this reason the results from this smartphone are neglected.The analyses are here carried out using GPS and Galileo L1/E1 and L5/E5a carrier-phase measurements from all the receivers available. Carrier-phase observations were collected only for the first 300 epochs with Huawei P20 due to the activation of duty cycling mode and for this reason the results from this smartphone are neglected.</p>
        <p>In the first analysis, the variation of receiver clock term is estimated, based on broadcast ephemeris, using all GPS and Galileo measurements on the two L-band frequencies considered, stacking all the available phase observations. The noise level of variometric phase is summarized per constellation and per signal frequency in Table 7. Root mean square error (RMS) is used to statistically characterize the variometric phase noise in order to include both mean and STD and to take into account any bias affecting specific signals. In this particular case, on a numerical point of view the RMS is close to the standard deviation since no significant biases have been observed in the variometric phase residual. The results included in Table 7 are computed including variometric phase measurements computed on all the satellites transmitting on the given frequency.In the first analysis, the variation of receiver clock term is estimated, based on broadcast ephemeris, using all GPS and Galileo measurements on the two L-band frequencies considered, stacking all the available phase observations. The noise level of variometric phase is summarized per constellation and per signal frequency in Table 7. Root mean square error (RMS) is used to statistically characterize the variometric phase noise in order to include both mean and STD and to take into account any bias affecting specific signals. In this particular case, on a numerical point of view the RMS is close to the standard deviation since no significant biases have been observed in the variometric phase residual. The results included in Table 7 are computed including variometric phase measurements computed on all the satellites transmitting on the given frequency.</p>
        <p>Table 7 shows noise of few mm/s for the geodetic receivers Topcon NetG5 (TOR1) and Trimble Alloy (ALR1) as expected. ALR1 shows better results than TOR1 which experienced a loss of satellites tracked at the initial epochs of the data collection: e.g. 4 mm/s is obtained for both E1 and E5a measurements on ALR1 instead of 6 mm/s using TOR1 observations. The values increase around 10 mm/s for the two Xiaomi Mi 8 and up to several cm/s for the two Huawei P30. As also expected, Galileo signals generally show lower noise for the geodetic receivers and the Xiaomi Mi 8 (XI8J). Considering the second Xiaomi Mi 8 smartphone -XI8J, 8 mm/s is obtained on E1 measurements against 12 mm/s on L1 observations. Similar results can also be observed on the L5-band: 9 mm/s were derived on E5a measurements against 11 mm/s on GPS L5 observations. Despite some differences in the number of satellites and signals tracked observed especially in Android smartphone, a good agreement is obtained for the two Xiaomi Mi 8 and the Huawei P30. On the other hand, the comparison between the Xiaomi Mi 8 and the Huawei P30 results highlights differences in the range of tens of mm/s.Table 7 shows noise of few mm/s for the geodetic receivers Topcon NetG5 (TOR1) and Trimble Alloy (ALR1) as expected. ALR1 shows better results than TOR1 which experienced a loss of satellites tracked at the initial epochs of the data collection: e.g. 4 mm/s is obtained for both E1 and E5a measurements on ALR1 instead of 6 mm/s using TOR1 observations. The values increase around 10 mm/s for the two Xiaomi Mi 8 and up to several cm/s for the two Huawei P30. As also expected, Galileo signals generally show lower noise for the geodetic receivers and the Xiaomi Mi 8 (XI8J). Considering the second Xiaomi Mi 8 smartphone -XI8J, 8 mm/s is obtained on E1 measurements against 12 mm/s on L1 observations. Similar results can also be observed on the L5-band: 9 mm/s were derived on E5a measurements against 11 mm/s on GPS L5 observations. Despite some differences in the number of satellites and signals tracked observed especially in Android smartphone, a good agreement is obtained for the two Xiaomi Mi 8 and the Huawei P30. On the other hand, the comparison between the Xiaomi Mi 8 and the Huawei P30 results highlights differences in the range of tens of mm/s.</p>
        <p>To further investigate if the different behaviour observed for the two Huawei P30 is connected somehow to the drifts observed for L5 and E5a observations in section 4.3, we decided to perform two independent processes: GPS and Galileo L1/E1 measurements, for the first processing, and L5/E5a in the second. The number of epochs in which the variometric analysis can provide a validated solution when L5/E5a are used is limited from the availability of measurements on L5-band or GPS. The statistical results reported in Table 8 reflect this problem. Despite a very small improvements on L1/E1 solutions for all the GNSS receivers, the results on L5/E5a show higher noise: this is due to the phase drifts affecting both Huawei P30 smartphones (H30U and H30M) highlighted in section 4.3. Even though the use of time-differences of carrier-phase measurements largely reduces the impact of phase drifts, they are still evident in the large noise characterizing the variometric phase measurements.To further investigate if the different behaviour observed for the two Huawei P30 is connected somehow to the drifts observed for L5 and E5a observations in section 4.3, we decided to perform two independent processes: GPS and Galileo L1/E1 measurements, for the first processing, and L5/E5a in the second. The number of epochs in which the variometric analysis can provide a validated solution when L5/E5a are used is limited from the availability of measurements on L5-band or GPS. The statistical results reported in Table 8 reflect this problem. Despite a very small improvements on L1/E1 solutions for all the GNSS receivers, the results on L5/E5a show higher noise: this is due to the phase drifts affecting both Huawei P30 smartphones (H30U and H30M) highlighted in section 4.3. Even though the use of time-differences of carrier-phase measurements largely reduces the impact of phase drifts, they are still evident in the large noise characterizing the variometric phase measurements.</p>
        <p>In addition to the carrier-phase measurements noise, the analysis of Y -B opens to the possibility to detect faulty carrier-phase measurements in real-time. In particular, based on the results of section 4.3 and on the variometric phase noise a threshold equal to one wavelength is here used to detect faulty measurements which, in this case, may be considered as cycle slips. Table 9 shows the ratio of measurements exceeding this threshold per constellation and per signal frequency for each receiver.In addition to the carrier-phase measurements noise, the analysis of Y -B opens to the possibility to detect faulty carrier-phase measurements in real-time. In particular, based on the results of section 4.3 and on the variometric phase noise a threshold equal to one wavelength is here used to detect faulty measurements which, in this case, may be considered as cycle slips. Table 9 shows the ratio of measurements exceeding this threshold per constellation and per signal frequency for each receiver.</p>
        <p>As expected from the test environment i.e. static scenario in open sky 9, a different ratio of faulty measurements is observed on a given frequency on two models of the same smartphone (XI8J/XI8R or H30U/H30M): this proves that internal conditions and processes enabled within the smartphone may interfere with the GNSS chipset and its functionalities. The results obtained with this approach are still in line with the discussion on carrierphase stability of section 4.3: the differences between the behaviour of Huawei P30 and Xiaomi Mi 8 are large and mainly hardware related. The results obtained using the variometric approach confirm and support the conclusions of section 4.3 on the properties of smartphone phase observations. In particular, the variometric phase noise obtained for the two geodetic receivers, Topcon NetG5 and Trimble Alloy, and the two Xiaomi Mi 8 smartphones demonstrate high stability in the carrierphase tracking for both L1/E1 and L5/E5a frequencies. With respect to Huawei P30 devices, the phase tracking instabilityhighlighted in section 4.3 -is here confirmed by a higher variometric phase noise and the higher number of detected faulty measurements. Therefore, since the use of this approach enables real-time stand-alone faulty measurements detection and phase noise analysis, it can support successful ambiguity handling.As expected from the test environment i.e. static scenario in open sky 9, a different ratio of faulty measurements is observed on a given frequency on two models of the same smartphone (XI8J/XI8R or H30U/H30M): this proves that internal conditions and processes enabled within the smartphone may interfere with the GNSS chipset and its functionalities. The results obtained with this approach are still in line with the discussion on carrierphase stability of section 4.3: the differences between the behaviour of Huawei P30 and Xiaomi Mi 8 are large and mainly hardware related. The results obtained using the variometric approach confirm and support the conclusions of section 4.3 on the properties of smartphone phase observations. In particular, the variometric phase noise obtained for the two geodetic receivers, Topcon NetG5 and Trimble Alloy, and the two Xiaomi Mi 8 smartphones demonstrate high stability in the carrierphase tracking for both L1/E1 and L5/E5a frequencies. With respect to Huawei P30 devices, the phase tracking instabilityhighlighted in section 4.3 -is here confirmed by a higher variometric phase noise and the higher number of detected faulty measurements. Therefore, since the use of this approach enables real-time stand-alone faulty measurements detection and phase noise analysis, it can support successful ambiguity handling.</p>
        <p>In this section we present the propagation of smartphone observation noise into position estimates. Since previous studies have already evaluated the performance of relative positioning based on baselines formed by smartphone and high grade receiver observations [28,32,33], we show the coordinate precision level that may be reached in a relative mode for the baseline built of a pair of homogenous smartphones. The outcomes of such experiment provide useful information on the path towards a precise collaborative positioning with smartphones.In this section we present the propagation of smartphone observation noise into position estimates. Since previous studies have already evaluated the performance of relative positioning based on baselines formed by smartphone and high grade receiver observations [28,32,33], we show the coordinate precision level that may be reached in a relative mode for the baseline built of a pair of homogenous smartphones. The outcomes of such experiment provide useful information on the path towards a precise collaborative positioning with smartphones.</p>
        <p>We analyse the precision of coordinates obtained in an ambiguityfloat solution and the improvement one can gain from integer ambiguity fixing. Precision of the float solution is driven by both code and phase GNSS measurements, whereas the latter reflects the propagation of phase observation noise into the coordinate domain. We refer these results to those obtained with relative positioning fed only with code pseudoranges.We analyse the precision of coordinates obtained in an ambiguityfloat solution and the improvement one can gain from integer ambiguity fixing. Precision of the float solution is driven by both code and phase GNSS measurements, whereas the latter reflects the propagation of phase observation noise into the coordinate domain. We refer these results to those obtained with relative positioning fed only with code pseudoranges.</p>
        <p>We take advantage of a pair of Huawei P30 smartphones that exhibit a high performance in terms of code observation precision (c.f. Table 4). We use one device (H30M) as a reference, and therefore we fix its coordinates to the ground truth position. The second smartphone (H30U) serves as the static rover with unknown coordinates. We use geometrybased relative observational model and C/N0-dependent weighting scheme that was proven to be superior to the satellite elevation dependent one in [22]. The ambiguities were fixed to the integer values using MLAMBDA method [62]. The impact of ionospheric delay was neglected due to usage of an ultra-short baseline. The model was fed with GPS L1 phase and code observations collected during the 5 h long observational session that was described in section 2. The filter was re-initialised after each hour of data processing. Application of single frequency signals is justified by the fact that phase observations of different bands were characterized with effects that destroy integer properties of ambiguities (c.f. Figs. 101112131415). Moreover we recall that these smartphones tracked significantly lower number of satellites on different frequency bands besides GPS L1.We take advantage of a pair of Huawei P30 smartphones that exhibit a high performance in terms of code observation precision (c.f. Table 4). We use one device (H30M) as a reference, and therefore we fix its coordinates to the ground truth position. The second smartphone (H30U) serves as the static rover with unknown coordinates. We use geometrybased relative observational model and C/N0-dependent weighting scheme that was proven to be superior to the satellite elevation dependent one in [22]. The ambiguities were fixed to the integer values using MLAMBDA method [62]. The impact of ionospheric delay was neglected due to usage of an ultra-short baseline. The model was fed with GPS L1 phase and code observations collected during the 5 h long observational session that was described in section 2. The filter was re-initialised after each hour of data processing. Application of single frequency signals is justified by the fact that phase observations of different bands were characterized with effects that destroy integer properties of ambiguities (c.f. Figs. 101112131415). Moreover we recall that these smartphones tracked significantly lower number of satellites on different frequency bands besides GPS L1.</p>
        <p>Fig. 16 visualizes the positioning errors, whereas Table 10 presents the empirical coordinate statistics. The top panel of Fig. 16 shows code relative and float solutions in magenta and blue colours, respectively. Projection of float solutions onto a horizontal plane is given in grey colour. What transpires from the results in the bottom panel of Fig. 16 is that the cm-level precision of the fixed solution is fully achievable in a smartphone to smartphone positioning. The plots confirm also a clear benefit from ambiguity fixing to a coordinate precision in such positioning scenario. drops down from 43.0 cm, 46.9 cm and 36.8 cm for float solution (corresponding to the top panel of Fig. 16) to 2.0 cm, 2.4 cm and 6.9 cm after successful ambiguity fixing for North, East, and Up components, respectively (bottom panel of Fig. 16). This is coherent with the smartphone observation noise assessment given in Table 8, as after correct ambiguity fixing the precision of the coordinate estimates is driven by precision of phase observations. Note that the fixed solutions are poorer than what one would expect with geodetic receivers. The propagation of code observation noise into the position estimates is reflected in the results of code relative positioning showed in magenta in the top panel of Fig. 16. As expected this mode exhibits the poorest performance among employed positioning modes as the STD of the coordinates reached 97.5 cm, 74.3 cm and 139.6 cm for North, East and Up components, respectively (c.f. Table 10).Fig. 16 visualizes the positioning errors, whereas Table 10 presents the empirical coordinate statistics. The top panel of Fig. 16 shows code relative and float solutions in magenta and blue colours, respectively. Projection of float solutions onto a horizontal plane is given in grey colour. What transpires from the results in the bottom panel of Fig. 16 is that the cm-level precision of the fixed solution is fully achievable in a smartphone to smartphone positioning. The plots confirm also a clear benefit from ambiguity fixing to a coordinate precision in such positioning scenario. drops down from 43.0 cm, 46.9 cm and 36.8 cm for float solution (corresponding to the top panel of Fig. 16) to 2.0 cm, 2.4 cm and 6.9 cm after successful ambiguity fixing for North, East, and Up components, respectively (bottom panel of Fig. 16). This is coherent with the smartphone observation noise assessment given in Table 8, as after correct ambiguity fixing the precision of the coordinate estimates is driven by precision of phase observations. Note that the fixed solutions are poorer than what one would expect with geodetic receivers. The propagation of code observation noise into the position estimates is reflected in the results of code relative positioning showed in magenta in the top panel of Fig. 16. As expected this mode exhibits the poorest performance among employed positioning modes as the STD of the coordinates reached 97.5 cm, 74.3 cm and 139.6 cm for North, East and Up components, respectively (c.f. Table 10).</p>
        <p>In this study we assessed the quality of GNSS observations collected by selected recent Android smartphones equipped with single-and dualfrequency chipsets such as Huawei P Smart, P20 and P30, as well as Xiaomi Mi 8 and Mi 9. The evaluation was performed in terms of the satellite tracking capabilities, signal strength and observational noise. Moreover we investigated the properties of DD phase ambiguities to anticipate the feasibility of precise positioning with integer ambiguity resolution, and analysed the coordinate precision level that may be reached in a relative positioning for the baseline built of a pair of homogenous smartphones only.In this study we assessed the quality of GNSS observations collected by selected recent Android smartphones equipped with single-and dualfrequency chipsets such as Huawei P Smart, P20 and P30, as well as Xiaomi Mi 8 and Mi 9. The evaluation was performed in terms of the satellite tracking capabilities, signal strength and observational noise. Moreover we investigated the properties of DD phase ambiguities to anticipate the feasibility of precise positioning with integer ambiguity resolution, and analysed the coordinate precision level that may be reached in a relative positioning for the baseline built of a pair of homogenous smartphones only.</p>
        <p>On the basis of the conducted analyses, we found that the smartphones are characterized with diverse performance in terms of GNSS satellite tracking. We noticed that the most recent smartphones, namely Xiaomi Mi 8, Xiaomi Mi 9 and Huawei P30, acquired a close to the geodetic receivers number of GPS satellites. On the other hand important differences were detected for other constellations.On the basis of the conducted analyses, we found that the smartphones are characterized with diverse performance in terms of GNSS satellite tracking. We noticed that the most recent smartphones, namely Xiaomi Mi 8, Xiaomi Mi 9 and Huawei P30, acquired a close to the geodetic receivers number of GPS satellites. On the other hand important differences were detected for other constellations.</p>
        <p>The analyses of signal to noise demonstrated not only a significant drop in smartphone C/N0 with respect to geodetic receivers, but also discernible differences among constellations and frequency bands. Specifically, GPS L1 signals of the smartphones were approximately 5-6 dB-Hz weaker than those of the Trimble Alloy receiver. The corresponding differences for Galileo E1 and GLONASS signals were approximately twice of that. For BDS constellation we discovered that smartphone signals are characterized with C/N0 lower of about 3.8-6.9 dB-Hz in comparison to corresponding signals collected by the geodetic receiver. The C/N0 of the signals on L5/E5a frequency bands collected by the smartphones show noticeably lower values with respect to those on L1/E1, except Xiaomi Mi 9 which was free from this effect. We also demonstrated that the higher elevation of the tracked satellite, the larger discrepancy in C/N0 between the geodetic receivers and the smartphones. We proved that an elevation dependence of the signal strength, as it holds true for geodetic receivers, is not always valid for smartphones.The analyses of signal to noise demonstrated not only a significant drop in smartphone C/N0 with respect to geodetic receivers, but also discernible differences among constellations and frequency bands. Specifically, GPS L1 signals of the smartphones were approximately 5-6 dB-Hz weaker than those of the Trimble Alloy receiver. The corresponding differences for Galileo E1 and GLONASS signals were approximately twice of that. For BDS constellation we discovered that smartphone signals are characterized with C/N0 lower of about 3.8-6.9 dB-Hz in comparison to corresponding signals collected by the geodetic receiver. The C/N0 of the signals on L5/E5a frequency bands collected by the smartphones show noticeably lower values with respect to those on L1/E1, except Xiaomi Mi 9 which was free from this effect. We also demonstrated that the higher elevation of the tracked satellite, the larger discrepancy in C/N0 between the geodetic receivers and the smartphones. We proved that an elevation dependence of the signal strength, as it holds true for geodetic receivers, is not always valid for smartphones.</p>
        <p>In terms of the code observational noise we discovered that smartphone pseudoranges are noisier by approximately one order of magnitude as compared to the geodetic receivers. The analysis of DD residuals of code observations revealed that Xiaomi Mi 9 smartphone provides the noisiest pseudoranges among the tested devices. Given also an infeasibility of collecting phase observations, we consider this successor of Xiaomi Mi 8 as a step backward in terms of application of smartphones to precise GNSS positioning. We also demonstrated that code signals on L5 and E5a significantly outperform those on L1 and E1, which is also valid for smartphone-derived observations.In terms of the code observational noise we discovered that smartphone pseudoranges are noisier by approximately one order of magnitude as compared to the geodetic receivers. The analysis of DD residuals of code observations revealed that Xiaomi Mi 9 smartphone provides the noisiest pseudoranges among the tested devices. Given also an infeasibility of collecting phase observations, we consider this successor of Xiaomi Mi 8 as a step backward in terms of application of smartphones to precise GNSS positioning. We also demonstrated that code signals on L5 and E5a significantly outperform those on L1 and E1, which is also valid for smartphone-derived observations.</p>
        <p>The research showed that DD phase residuals of smartphones are not only subject to significant observational noise but are also contaminated by unwanted effects which destroy such properties of ambiguities as integer and time-constant. We revealed the existence of unexpected long-term drifts in GPS L5, Galileo E1 and E5a and BDS B1 phase observations of Huawei P30. This indicates that such DD ambiguities do not have integer and constant characteristics but seem to be subject to unexplained biases. Such phenomena prevent integer ambiguity resolution with multi-frequency and multi-constellation signals collected by Huawei P30 smartphone. At this time only GPS L1 of Huawei P30 are applicable to precise positioning methods that require precise phase observations. Fortunately, the phase observations of Xiaomi Mi 8 were free from such long-term divergences.The research showed that DD phase residuals of smartphones are not only subject to significant observational noise but are also contaminated by unwanted effects which destroy such properties of ambiguities as integer and time-constant. We revealed the existence of unexpected long-term drifts in GPS L5, Galileo E1 and E5a and BDS B1 phase observations of Huawei P30. This indicates that such DD ambiguities do not have integer and constant characteristics but seem to be subject to unexplained biases. Such phenomena prevent integer ambiguity resolution with multi-frequency and multi-constellation signals collected by Huawei P30 smartphone. At this time only GPS L1 of Huawei P30 are applicable to precise positioning methods that require precise phase observations. Fortunately, the phase observations of Xiaomi Mi 8 were free from such long-term divergences.</p>
        <p>Our analysis shows that with the observations of some selected smartphones, it is feasible to fix the ambiguities to their integer values. However we should note that ambiguity fixing is not the primary goal, the question is whether it can enhance the positioning performance in the coordinate domain. The solution to non-integer ambiguities would be to estimate them as float values, providing that no long-term divergences of the phase observations are present. This issue will be investigated in further studies.Our analysis shows that with the observations of some selected smartphones, it is feasible to fix the ambiguities to their integer values. However we should note that ambiguity fixing is not the primary goal, the question is whether it can enhance the positioning performance in the coordinate domain. The solution to non-integer ambiguities would be to estimate them as float values, providing that no long-term divergences of the phase observations are present. This issue will be investigated in further studies.</p>
        <p>The variometric phase analysis revealed a good agreement between the results obtained for the two geodetic receivers and the two Xiaomi Mi 8, confirming the possibility to take full advantage of the phase observations. On the other hand, the Huawei P30 showed higher instability in phase tracking, which is in agreement with the results obtained from the phase DD analysis.The variometric phase analysis revealed a good agreement between the results obtained for the two geodetic receivers and the two Xiaomi Mi 8, confirming the possibility to take full advantage of the phase observations. On the other hand, the Huawei P30 showed higher instability in phase tracking, which is in agreement with the results obtained from the phase DD analysis.</p>
        <p>Finally, we also showed the propagation of the smartphone observation noise into position estimates and demonstrated that it is achievable to reach cm-level precision in a smartphone to smartphone relative positioning with fixed ambiguities.Finally, we also showed the propagation of the smartphone observation noise into position estimates and demonstrated that it is achievable to reach cm-level precision in a smartphone to smartphone relative positioning with fixed ambiguities.</p>
        <p>C/N0 differences in dB-Hz between corresponding GNSS signals collected by Trimble Alloy and the consecutive smartphones.C/N0 differences in dB-Hz between corresponding GNSS signals collected by Trimble Alloy and the consecutive smartphones.</p>
        <p>J.Paziewski et al.J.Paziewski et al.</p>
        <p>The study was conducted as a part of the International Association of Geodesy Working Group 4.4.3: "Reliability of low-cost &amp; 
            <rs type="software">Android</rs> GNSS in navigation and geosciences". Dr Robert Odolinski is funded by Geoscience Australia to work on the project "Precise GNSS positioning with smartphones". Dr Jacek Paziewski is founded by the project No. POIR.04.01.04-00-0056/17, financed by the European Regional Development Fund within the Smart Growth Operational Programme 2014-2020. All this support is gratefully acknowledged.
        </p>
        <p>The authors declared that there is no conflict of interest.The authors declared that there is no conflict of interest.</p>
    </text>
</tei>
