<?xml version="1.0" encoding="UTF-8"?>
<tei xmlns="http://www.tei-c.org/ns/1.0">
    <teiHeader>
        <fileDesc xml:id="_1"/>
        <encodingDesc>
            <appInfo>
                <application version="0.8.1-SNAPSHOT" ident="GROBID" when="2024-06-14T06:54+0000">
                    <ref target="https://github.com/kermitt2/grobid">A machine learning software for extracting information from scholarly documents</ref>
                </application>
            </appInfo>
        </encodingDesc>
    </teiHeader>
    <text xml:lang="en">
        <p>Heat pipe heat exchangers (HPHEs) are being more frequently used in energy intensive industries as a method of low-grade waste heat recovery. Prior to the installation of a HPHE, the effect of the heat exchanger within the system requires modelling to simulate the overall impact. From this, potential savings and emission reductions can be determined, and the utilisation of the waste heat can be optimised. One such simulation software is 
            <rs type="software">TRNSYS</rs>. Currently available heat exchanger simulation components in 
            <rs type="software">TRNSYS</rs> use averaged values such as a constant effectiveness, constant heat transfer coefficient or conductance for the inputs, which are fixed during the entire simulation. These predictions are useful in a steady-state controlled temperature environment such as a heat treatment facility, but not optimal for the majority of energy recovery applications which operate with fluctuating conditions. A transient TRNSYS HPHE component has been developed using the Effectiveness-Number of Transfer Units (ɛ-NTU) method and validated against experimental results. The model predicts outlet temperatures and energy recovery well within an accuracy of 15% and an average of 4.4% error when compared to existing experimental results, which is acceptable for engineering applications.
        </p>
        <p>Energy is a central topic of conversation of many developed nations, particularly the overreliance on fossil fuels for energy production. Global energy consumption keeps increasing as the world population and the needs of its people increase, but its source may be shifting. So far, petroleum consumption around the world has been steadily increasing ever since its inception, and consequently, mounting greenhouse gas emissions [1]. Simultaneously, the current zeitgeist is that of a green, carbonneutral planet which pushes for more sustainable sources of energy, either from harnessing renewable energies but additionally by improving the heat recovery of existing systems. At the 2019 United Nations Climate Change Summit, it was announced that countries around the world should reduce emissions by 45% by 2030 on the way to net zero carbon emissions by 2050 [2]. This is a follow up to the 2016 Paris Agreement [3], and has been reinforced by European Union (EU) 2030 energy targets [4], which aim to reduce greenhouse gas emissions to 80À95% below 1990 levels by 2050. Further information on European and UK regulatory frameworks and policies on energy efficiency, in industry, are provided within Ref. [5].Energy is a central topic of conversation of many developed nations, particularly the overreliance on fossil fuels for energy production. Global energy consumption keeps increasing as the world population and the needs of its people increase, but its source may be shifting. So far, petroleum consumption around the world has been steadily increasing ever since its inception, and consequently, mounting greenhouse gas emissions [1]. Simultaneously, the current zeitgeist is that of a green, carbonneutral planet which pushes for more sustainable sources of energy, either from harnessing renewable energies but additionally by improving the heat recovery of existing systems. At the 2019 United Nations Climate Change Summit, it was announced that countries around the world should reduce emissions by 45% by 2030 on the way to net zero carbon emissions by 2050 [2]. This is a follow up to the 2016 Paris Agreement [3], and has been reinforced by European Union (EU) 2030 energy targets [4], which aim to reduce greenhouse gas emissions to 80À95% below 1990 levels by 2050. Further information on European and UK regulatory frameworks and policies on energy efficiency, in industry, are provided within Ref. [5].</p>
        <p>The industrial sector contributes 30.5% of the total worldwide GDP [6] whilst also being accountable for 33% of the total greenhouse gas emissions [7]. One way to reduce this contribution is by upgrading or retrofitting inefficient plants with modern technology. One of the methods used is Waste Heat Recovery (WHR) by way of heat exchangers, as it has been reported that 70% of global energy demand in the industrial sector is for heat or thermal processes [8], 72% in the United Kingdom [7].The industrial sector contributes 30.5% of the total worldwide GDP [6] whilst also being accountable for 33% of the total greenhouse gas emissions [7]. One way to reduce this contribution is by upgrading or retrofitting inefficient plants with modern technology. One of the methods used is Waste Heat Recovery (WHR) by way of heat exchangers, as it has been reported that 70% of global energy demand in the industrial sector is for heat or thermal processes [8], 72% in the United Kingdom [7].</p>
        <p>A heat exchanger is a device whose purpose is to transfer heat energy between two or more fluids. As previously mentioned, a growing area of interest for heat exchangers is the recovery of waste heat [9]. Waste heat is defined as any heat produced by a machine or as a by-product of an industrial process that is lost to atmosphere and has the potential to be captured or reused. A subset of heat exchangers used as WHR devices are heat exchangers equipped with heat pipes (a Heat Pipe Heat Exchanger or HPHE).A heat exchanger is a device whose purpose is to transfer heat energy between two or more fluids. As previously mentioned, a growing area of interest for heat exchangers is the recovery of waste heat [9]. Waste heat is defined as any heat produced by a machine or as a by-product of an industrial process that is lost to atmosphere and has the potential to be captured or reused. A subset of heat exchangers used as WHR devices are heat exchangers equipped with heat pipes (a Heat Pipe Heat Exchanger or HPHE).</p>
        <p>Wickless heat pipes, also known as thermosyphons or gravityassisted heat pipes, are passive heat recovery devices [10]. They consist of hollow tubes partially filled with a working fluid in both liquid and vapour phase. As heat is applied to the pool of fluid at the bottom half of the pipe, termed evaporator, the fluid evaporates and, in gaseous form, travels to the top of the pipe. By having a colder stream make contact with the top section of the pipe, the cooler walls at the top of the heat pipe cause the fluid to condense and, due to the action of gravity, travel back to the bottom of the heat pipe in liquid form (Fig. 1). This is a continuous process that takes place as long as there is a temperature difference between the evaporator and the condenser of the heat pipe. When working at full capacity, if there are no non-condensable gases present inside the heat pipe, it operates nearly isothermally, with little difference in temperature between the top and bottom of the heat pipe. This is also the reason the heat pipe is often referred to as a superconductor.Wickless heat pipes, also known as thermosyphons or gravityassisted heat pipes, are passive heat recovery devices [10]. They consist of hollow tubes partially filled with a working fluid in both liquid and vapour phase. As heat is applied to the pool of fluid at the bottom half of the pipe, termed evaporator, the fluid evaporates and, in gaseous form, travels to the top of the pipe. By having a colder stream make contact with the top section of the pipe, the cooler walls at the top of the heat pipe cause the fluid to condense and, due to the action of gravity, travel back to the bottom of the heat pipe in liquid form (Fig. 1). This is a continuous process that takes place as long as there is a temperature difference between the evaporator and the condenser of the heat pipe. When working at full capacity, if there are no non-condensable gases present inside the heat pipe, it operates nearly isothermally, with little difference in temperature between the top and bottom of the heat pipe. This is also the reason the heat pipe is often referred to as a superconductor.</p>
        <p>Some heat pipes are equipped with an inner wick structure which allows them to function against the force of gravity. Historically, this was when heat pipes first started gaining popularity as useful heat sinks for space applications or small electronic devices [11]. Throughout this paper, the heat pipes referred to are wickless heat pipes. A HPHE uses bundles of these heat pipes with the evaporator section in contact with a hot stream and the condenser section in contact with the cooler stream, isolated by a separation plate.Some heat pipes are equipped with an inner wick structure which allows them to function against the force of gravity. Historically, this was when heat pipes first started gaining popularity as useful heat sinks for space applications or small electronic devices [11]. Throughout this paper, the heat pipes referred to are wickless heat pipes. A HPHE uses bundles of these heat pipes with the evaporator section in contact with a hot stream and the condenser section in contact with the cooler stream, isolated by a separation plate.</p>
        <p>This paper provides a literature review, outlines previous simulations conducted, and shows how an improved simulation methodology has been developed using 
            <rs type="software">TRNSYS</rs> software to simulate a HPHE's performance transiently by creating a dedicated HPHE component, which provides accurate predictions on outlet temperatures and energy recovery. A full-scale working HPHE unit installed to recover waste heat from a continuous roller kiln that fires ceramic tiles has been used to empirically validate the model.
        </p>
        <p>When looking at heat recovery applications, the main advantage of a HPHE over traditional heat exchangers is their superior flow separation and increased redundancy as each pipe functions as an individual heat exchanger. This means that if one pipe fails, it will not put the integrity or overall performance of the heat exchanger at risk and, importantly, prevents any cross-contamination between heat streams. This is crucial when contamination between streams is undesirable. Heat pipes also have a high effective thermal conductivity compared with traditional heat exchangers due to the two-phase boiling and condensation heat transfer, which allows its heat transfer coefficient to be directly correlated with the specific heat of the working fluid being used. Heat transfer coefficients in the magnitude of 10 3 À10 5 W.m À 2 .K À 1 have been reported [12].When looking at heat recovery applications, the main advantage of a HPHE over traditional heat exchangers is their superior flow separation and increased redundancy as each pipe functions as an individual heat exchanger. This means that if one pipe fails, it will not put the integrity or overall performance of the heat exchanger at risk and, importantly, prevents any cross-contamination between heat streams. This is crucial when contamination between streams is undesirable. Heat pipes also have a high effective thermal conductivity compared with traditional heat exchangers due to the two-phase boiling and condensation heat transfer, which allows its heat transfer coefficient to be directly correlated with the specific heat of the working fluid being used. Heat transfer coefficients in the magnitude of 10 3 À10 5 W.m À 2 .K À 1 have been reported [12].</p>
        <p>In heat exchangers, counter-flow is usually preferable to parallelflow. Heat transfer is a function of temperature difference, and counter- flow allows for a continuous difference in temperature between the two streams. The difference in temperature between the evaporator and the condenser is also an operating requirement in a heat pipe. Therefore, in a HPHE, the designer must ensure that each heat pipe is located between two flows at different temperatures, thus consistently having a difference in temperature (DT) between its ends. Furthermore, in counter-flow, the temperature of the hot outlet stream can be lower than the cold sink outlet stream. A counter-flow HPHE and a comparison between parallel and counter-flow is shown in Fig. 2. The component created in this paper was to replicate a counter-flow HPHE.In heat exchangers, counter-flow is usually preferable to parallelflow. Heat transfer is a function of temperature difference, and counter- flow allows for a continuous difference in temperature between the two streams. The difference in temperature between the evaporator and the condenser is also an operating requirement in a heat pipe. Therefore, in a HPHE, the designer must ensure that each heat pipe is located between two flows at different temperatures, thus consistently having a difference in temperature (DT) between its ends. Furthermore, in counter-flow, the temperature of the hot outlet stream can be lower than the cold sink outlet stream. A counter-flow HPHE and a comparison between parallel and counter-flow is shown in Fig. 2. The component created in this paper was to replicate a counter-flow HPHE.</p>
        <p>In most applications, a HPHE is defined as a counter-flow heat exchanger as a whole, but in essence it is a combination of two crossflow heat exchangers if divided between evaporator and condenser: counter-flow due to the direction of the incoming streams and crossflow as there is a 90°angle between the incoming flow direction and the flow inside the heat pipes. Both crossflow heat exchangers and counter-flow heat exchangers have a higher effectiveness than other heat exchanger geometries [14].In most applications, a HPHE is defined as a counter-flow heat exchanger as a whole, but in essence it is a combination of two crossflow heat exchangers if divided between evaporator and condenser: counter-flow due to the direction of the incoming streams and crossflow as there is a 90°angle between the incoming flow direction and the flow inside the heat pipes. Both crossflow heat exchangers and counter-flow heat exchangers have a higher effectiveness than other heat exchanger geometries [14].</p>
        <p>Faghri [11] and Jouhara [15,16] provide a review on current applications for heat pipes and some examples include solar water heating [17,18,19,20], desalination [21,22] and domestic space heating applications [23,24]. However, one of the most promising applications is in WHR. Existing WHR applications of HPHEs include: an EU project, ETE-KINA [25], with installations of HPHE technology within steel, aluminium and ceramic industries [26]; the DREAM Project (Design for Resource and Energy efficiency in cerAMic kilns) with specific focus on the application of HPHEs to a kiln cooling section [27]; and i-ThERM, an EU funded project which looked at the development of an array of technology related to heat pipes and in particular to heat recovery focusing on energy transfer by the radiation mechanism [28]. An example of a 12.6 MW HPHE installed to recover energy contained within exhaust gas from a steel mill blast furnace is shown in Fig. 3.Faghri [11] and Jouhara [15,16] provide a review on current applications for heat pipes and some examples include solar water heating [17,18,19,20], desalination [21,22] and domestic space heating applications [23,24]. However, one of the most promising applications is in WHR. Existing WHR applications of HPHEs include: an EU project, ETE-KINA [25], with installations of HPHE technology within steel, aluminium and ceramic industries [26]; the DREAM Project (Design for Resource and Energy efficiency in cerAMic kilns) with specific focus on the application of HPHEs to a kiln cooling section [27]; and i-ThERM, an EU funded project which looked at the development of an array of technology related to heat pipes and in particular to heat recovery focusing on energy transfer by the radiation mechanism [28]. An example of a 12.6 MW HPHE installed to recover energy contained within exhaust gas from a steel mill blast furnace is shown in Fig. 3.</p>
        <p>When choosing the working fluid inside the heat pipe, the main limits are the liquid boiling and vapour condensation temperatures of each fluid. Ref. [29] provides examples of available and tested working fluids with their applicable temperature ranges. Since the heat pipe is effectively working at a constant temperature, one must be aware of the range of boiling temperatures of different fluids as it is possible to boil all the working fluid in the heat pipe and reach the 'dry out' limit. Heat pipe design is outside the scope of this paper, but the choice of working fluid usually comes down to the working temperatures, and its effectiveness is measured by the specific heat of the fluid. For low grade heat recovery, distilled water is ideal due to its high specific heat [29].When choosing the working fluid inside the heat pipe, the main limits are the liquid boiling and vapour condensation temperatures of each fluid. Ref. [29] provides examples of available and tested working fluids with their applicable temperature ranges. Since the heat pipe is effectively working at a constant temperature, one must be aware of the range of boiling temperatures of different fluids as it is possible to boil all the working fluid in the heat pipe and reach the 'dry out' limit. Heat pipe design is outside the scope of this paper, but the choice of working fluid usually comes down to the working temperatures, and its effectiveness is measured by the specific heat of the fluid. For low grade heat recovery, distilled water is ideal due to its high specific heat [29].</p>
        <p>For most applications the working fluid inside the heat pipe itself is assumed to be isothermal throughout the heat pipe's length. However, there is a small temperature difference which determines the figure of merit of the heat pipe. A figure of merit is a measure of the heat pipe's thermal resistance; a high figure of merit for the fluid in a thermosyphon means that the heat pipe will have a low temperature difference between its two ends. Consequently, a heat pipe with a high figure of merit can achieve a good performance due to its low thermal resistance and high heat transfer capability [30]. The figure of merit also depends on the operating temperature of the heat pipe. Eq. (2.1) calculates figure of merit values for typical working fluids in thermosyphons:For most applications the working fluid inside the heat pipe itself is assumed to be isothermal throughout the heat pipe's length. However, there is a small temperature difference which determines the figure of merit of the heat pipe. A figure of merit is a measure of the heat pipe's thermal resistance; a high figure of merit for the fluid in a thermosyphon means that the heat pipe will have a low temperature difference between its two ends. Consequently, a heat pipe with a high figure of merit can achieve a good performance due to its low thermal resistance and high heat transfer capability [30]. The figure of merit also depends on the operating temperature of the heat pipe. Eq. (2.1) calculates figure of merit values for typical working fluids in thermosyphons:</p>
        <p>where F is the figure of merit (kg.K À 3/4 .s À 5/2 ), h fg is the latent heat of vaporisation (J.kg À1 ), k l is the thermal conductivity of the working fluid (W.m À 1 .K À 1 ), r l is the density of the working fluid (kg.m À 3 ) and m l is the liquid viscosity (Pa.s À 1 ) [31]. A visualisation of the application of this equation is shown in Fig. 4.where F is the figure of merit (kg.K À 3/4 .s À 5/2 ), h fg is the latent heat of vaporisation (J.kg À1 ), k l is the thermal conductivity of the working fluid (W.m À 1 .K À 1 ), r l is the density of the working fluid (kg.m À 3 ) and m l is the liquid viscosity (Pa.s À 1 ) [31]. A visualisation of the application of this equation is shown in Fig. 4.</p>
        <p>HPHEs tend to be installed in challenging streams and as such, each unit is bespoke for a specific plant's needs. In order to predict its size, numerous papers in literature have referenced using the Effectiveness-Number of Transfer Units (ɛ-NTU) method [33,34,35]. A limitation so far of this method is that it has only been applied to HPHEs operating under steady-state conditions or with averaged values, which are often the exception in real life heat recovery systems unless significant control measures are undertaken. Regarding literature on modelling transient heat pipe behaviour, the first few mentions of models are the works by Chang and Colwell [36] who compared numerical predictions to experimental data and achieved a moderate level of success. Due to limited technology at the time, the computational model assumed that the dominant heat transfer modes were two-dimensional conduction in the heat pipe shell and wick. Other variables were neglected such as the thermal resistance along the vapour space and along the liquid-vapour interface. Performance was predicted using a finite-difference method.HPHEs tend to be installed in challenging streams and as such, each unit is bespoke for a specific plant's needs. In order to predict its size, numerous papers in literature have referenced using the Effectiveness-Number of Transfer Units (ɛ-NTU) method [33,34,35]. A limitation so far of this method is that it has only been applied to HPHEs operating under steady-state conditions or with averaged values, which are often the exception in real life heat recovery systems unless significant control measures are undertaken. Regarding literature on modelling transient heat pipe behaviour, the first few mentions of models are the works by Chang and Colwell [36] who compared numerical predictions to experimental data and achieved a moderate level of success. Due to limited technology at the time, the computational model assumed that the dominant heat transfer modes were two-dimensional conduction in the heat pipe shell and wick. Other variables were neglected such as the thermal resistance along the vapour space and along the liquid-vapour interface. Performance was predicted using a finite-difference method.</p>
        <p>Many of the first transient heat pipe models dealt with start-up problems, particularly the change of solid working fluids into liquid and eventually gas. For example, Deverall et al. [37] described the transient behaviour of water and metallic heat pipes. They concluded that start-up was possible from a solid-state working fluid, however, it was highly dependant on the amount of heat provided.Many of the first transient heat pipe models dealt with start-up problems, particularly the change of solid working fluids into liquid and eventually gas. For example, Deverall et al. [37] described the transient behaviour of water and metallic heat pipes. They concluded that start-up was possible from a solid-state working fluid, however, it was highly dependant on the amount of heat provided.</p>
        <p>Colwell [38] is one of the first published pieces of work that attempts to model the complete transient behaviour of a heat pipe. In his work he models a heat pipe with a metallic working fluid for high temperature applications, during start-up from a frozen state.Colwell [38] is one of the first published pieces of work that attempts to model the complete transient behaviour of a heat pipe. In his work he models a heat pipe with a metallic working fluid for high temperature applications, during start-up from a frozen state.</p>
        <p>Another example of start-up from frozen state is from Yang et al. [39] who developed a transient analysis code for a flat heat pipe receiver in a solar power tower plant. The model was able to predict the temperature distributions reasonably well, and the experimental results showed promise for the application of flat heat pipes to solar towers.Another example of start-up from frozen state is from Yang et al. [39] who developed a transient analysis code for a flat heat pipe receiver in a solar power tower plant. The model was able to predict the temperature distributions reasonably well, and the experimental results showed promise for the application of flat heat pipes to solar towers.</p>
        <p>Tournier and El-Genk developed their own two-dimensional heat pipe transient model [40], and the results achieved were in reasonable agreement with the experiments, albeit the transient response was found to be faster than in the experiment, due to the time taken for the heat to travel through the insulation. Brocheny [41] listed the state-of-the-art efforts on transient heat pipes and modelled the transient operation of low-temperature heat pipes from room-temperature conditions. He contributed to previous work by including dry-out and recovery in the thermal predictions. In terms of limitations, the effect of wick saturation was not considered in this work.Tournier and El-Genk developed their own two-dimensional heat pipe transient model [40], and the results achieved were in reasonable agreement with the experiments, albeit the transient response was found to be faster than in the experiment, due to the time taken for the heat to travel through the insulation. Brocheny [41] listed the state-of-the-art efforts on transient heat pipes and modelled the transient operation of low-temperature heat pipes from room-temperature conditions. He contributed to previous work by including dry-out and recovery in the thermal predictions. In terms of limitations, the effect of wick saturation was not considered in this work.</p>
        <p>The earliest literature found regarding the use of TRNSYS and heat pipes was in 2003 by Budihardjo,Morrison and Behnia [42]. This work developed TRNSYS models for predicting the performance of water-in-glass evacuated tube solar water heaters (Fig. 5). Though not WHR or a HPHE, this work highlighted the use of TRNSYS to simulate 21 inclined open thermosyphons. TRNSYS was used to simulate the collector efficiency and natural circulation flow rate. Yau and Tucker [43] in the same year calculated the overall effectiveness of a wet six-row wickless HPHE for a HVAC system. The main aim was to determine whether moisture content and film condensation on fins reduced the total effectiveness value of the HPHE. This was a very small lab scale unit consisting of six copper heat pipes with an outer diameter of 9.55 mm and finned with 315 0.33 mm aluminium fins per metre. The TRNSYS model for the HPHE is the closest work related to this presented work. The model simulates a lab scale HPHE for only copper heat pipes and fins to determine the overall effectiveness of this heat exchanger and specially requires an inclination angle and humidity of the air. This is an example of WHR but the focus of the work was on HVAC systems and removing humidity from air, particularly for hospitals, and predicting the onset of film condensation. This model used hour-by-hour climatic data from Kuala Lumpur and dealt with low temperature ranges i.e. &lt;35 °C.The earliest literature found regarding the use of TRNSYS and heat pipes was in 2003 by Budihardjo,Morrison and Behnia [42]. This work developed TRNSYS models for predicting the performance of water-in-glass evacuated tube solar water heaters (Fig. 5). Though not WHR or a HPHE, this work highlighted the use of TRNSYS to simulate 21 inclined open thermosyphons. TRNSYS was used to simulate the collector efficiency and natural circulation flow rate. Yau and Tucker [43] in the same year calculated the overall effectiveness of a wet six-row wickless HPHE for a HVAC system. The main aim was to determine whether moisture content and film condensation on fins reduced the total effectiveness value of the HPHE. This was a very small lab scale unit consisting of six copper heat pipes with an outer diameter of 9.55 mm and finned with 315 0.33 mm aluminium fins per metre. The TRNSYS model for the HPHE is the closest work related to this presented work. The model simulates a lab scale HPHE for only copper heat pipes and fins to determine the overall effectiveness of this heat exchanger and specially requires an inclination angle and humidity of the air. This is an example of WHR but the focus of the work was on HVAC systems and removing humidity from air, particularly for hospitals, and predicting the onset of film condensation. This model used hour-by-hour climatic data from Kuala Lumpur and dealt with low temperature ranges i.e. &lt;35 °C.</p>
        <p>The HPHE component presented here can simulate multiple heat sink fluids, any design configuration and number of heat pipes and is configured for WHR rather than dehumidification.The HPHE component presented here can simulate multiple heat sink fluids, any design configuration and number of heat pipes and is configured for WHR rather than dehumidification.</p>
        <p>In 2005, Shah [44] provided a report on TRNSYS models of four types of evacuated tubular collectors, two of importance including heat pipes, namely:In 2005, Shah [44] provided a report on TRNSYS models of four types of evacuated tubular collectors, two of importance including heat pipes, namely:</p>
        <p>Type 238-Heat pipe evacuated tubular collectors with curved fins. Type 239-Heat pipe evacuated tubular collectors with flat fins. [45] saw the use of TRNSYS to model a multipass HPHE applied to a lab scale ceramic kiln using exhaust gases to preheat water. The authors noted the necessity for a dedicated HPHE component to simulate the performance more accurately rather than a counter-flow heat exchanger component. Energy recovery rates were within §15% with an uncertainty of &lt;5.8%, though temperature prediction differences of up to around 35% were seen. The model could not be confidently used for simulation predictions and used averaged values of conductance taken from the experimental work. This paper presents work that builds upon the conclusions previously published, whilst demonstrating validity on a full-scale installation using a component that can be used to predict performance in the future.Type 238-Heat pipe evacuated tubular collectors with curved fins. Type 239-Heat pipe evacuated tubular collectors with flat fins. [45] saw the use of TRNSYS to model a multipass HPHE applied to a lab scale ceramic kiln using exhaust gases to preheat water. The authors noted the necessity for a dedicated HPHE component to simulate the performance more accurately rather than a counter-flow heat exchanger component. Energy recovery rates were within §15% with an uncertainty of &lt;5.8%, though temperature prediction differences of up to around 35% were seen. The model could not be confidently used for simulation predictions and used averaged values of conductance taken from the experimental work. This paper presents work that builds upon the conclusions previously published, whilst demonstrating validity on a full-scale installation using a component that can be used to predict performance in the future.</p>
        <p>To date there has been no publications for a dedicated transient simulation component of a HPHE configured for WHR on an industrial scale. The aim of this paper is to fill this gap in knowledge using TRNSYS.To date there has been no publications for a dedicated transient simulation component of a HPHE configured for WHR on an industrial scale. The aim of this paper is to fill this gap in knowledge using TRNSYS.</p>
        <p>The aim of this chapter is to describe current methods of characterising HPHE performance and the principles behind how the TRNSYS component was created.The aim of this chapter is to describe current methods of characterising HPHE performance and the principles behind how the TRNSYS component was created.</p>
        <p>There are currently three predominant methods available for predicting or characterising the performance of a heat exchanger. These are the Log Mean Temperature Difference (LMTD) method, the e-NTU method and, more specifically for HPHEs, the thermal network analysis method.There are currently three predominant methods available for predicting or characterising the performance of a heat exchanger. These are the Log Mean Temperature Difference (LMTD) method, the e-NTU method and, more specifically for HPHEs, the thermal network analysis method.</p>
        <p>The LMTD method can be used to quantify HPHE performance when inlet and outlet temperatures are known. This method can be used for steady-state but cannot be applied to the TRNSYS model requiring a transient simulation. The LMTD method oversimplifies the model as averaged values need to be used, which does not reflect the real nature of energy intensive processes. Furthermore, this is not a predictive method as outlet temperatures must be known. This method can be used for HPHEs but relies on previously determined data for inlets and outlets of an existing unit and so it is less useful for predicting performance. For a crossflow heat exchanger, the equation is [13]:The LMTD method can be used to quantify HPHE performance when inlet and outlet temperatures are known. This method can be used for steady-state but cannot be applied to the TRNSYS model requiring a transient simulation. The LMTD method oversimplifies the model as averaged values need to be used, which does not reflect the real nature of energy intensive processes. Furthermore, this is not a predictive method as outlet temperatures must be known. This method can be used for HPHEs but relies on previously determined data for inlets and outlets of an existing unit and so it is less useful for predicting performance. For a crossflow heat exchanger, the equation is [13]:</p>
        <p>The thermal network analysis is a proven way of viewing the thermal resistances in a heat exchanger [35]. As each heat pipe is an individual miniature heat exchanger, they are all assumed to be heat transfer devices working in parallel with one another within a larger heat exchanger assembly. In an electrical circuit, resistance blocks the transfer of current, in a thermal energy analogy, current is heat flow and resistance is thermal resistance (R), defined as the difference in temperature (DT) divided by the heat transfer rate ( _ Q ), as shown in Eq. (3.2). This is better visualised as a thermal circuit, as shown in Fig. 6.The thermal network analysis is a proven way of viewing the thermal resistances in a heat exchanger [35]. As each heat pipe is an individual miniature heat exchanger, they are all assumed to be heat transfer devices working in parallel with one another within a larger heat exchanger assembly. In an electrical circuit, resistance blocks the transfer of current, in a thermal energy analogy, current is heat flow and resistance is thermal resistance (R), defined as the difference in temperature (DT) divided by the heat transfer rate ( _ Q ), as shown in Eq. (3.2). This is better visualised as a thermal circuit, as shown in Fig. 6.</p>
        <p>This method is often used in tandem with the following ɛ-NTU method as the thermal resistances of the heat pipes are a requirement. Boiling [46], evaporation and condensation correlations can also be used to calculate the resistances and heat transfer performance of thermosyphons [47].This method is often used in tandem with the following ɛ-NTU method as the thermal resistances of the heat pipes are a requirement. Boiling [46], evaporation and condensation correlations can also be used to calculate the resistances and heat transfer performance of thermosyphons [47].</p>
        <p>The ɛ-NTU method is used to predict outlet temperatures by calculating the effectiveness, a dimensionless parameter related to the heat transfer performance of the heat exchanger. It is a measure between 0 and 1 and it is the measure of the actual heat transfer rate compared to the maximum theoretical heat transfer rate for the heat exchanger. This method was determined to be the most useful for transient predictions and was used to create the TRNSYS component. The general equation is shown below and has been developed for the evaporator and condenser sections of a HPHE [35]: Fig. 6. Schematic of the thermal resistances within a heat pipe [35].The ɛ-NTU method is used to predict outlet temperatures by calculating the effectiveness, a dimensionless parameter related to the heat transfer performance of the heat exchanger. It is a measure between 0 and 1 and it is the measure of the actual heat transfer rate compared to the maximum theoretical heat transfer rate for the heat exchanger. This method was determined to be the most useful for transient predictions and was used to create the TRNSYS component. The general equation is shown below and has been developed for the evaporator and condenser sections of a HPHE [35]: Fig. 6. Schematic of the thermal resistances within a heat pipe [35].</p>
        <p>effectiveness of the evaporator and condenser sections. They show how the outlet temperatures for the evaporator and condenser section can be found from the effectiveness of that section.effectiveness of the evaporator and condenser sections. They show how the outlet temperatures for the evaporator and condenser section can be found from the effectiveness of that section.</p>
        <p>T e;out ¼ T e;in Àe t C min C e T e;in ÀT c;in À Á ð3:4ÞT e;out ¼ T e;in Àe t C min C e T e;in ÀT c;in À Á ð3:4Þ</p>
        <p>where T e,in , T e,out , T c,in and T c,out are the inlet and outlet temperatures of the evaporator (e) and condenser (c) fluids, C min is the minimum value of C e and C c , the heat capacities of the evaporator and condenser fluids, a measure of the mass flow rate ( _ m in kg.s À 1 ) multiplied by the specific heat capacity (c p in J.kg À1 .K À 1 ) of each stream. e t is the total effectiveness of the heat exchanger, traditionally calculated using the equations below, Depending on which heat capacity is the larger of the condenser and evaporator fluids, the total effectiveness (e t ) equation varies:where T e,in , T e,out , T c,in and T c,out are the inlet and outlet temperatures of the evaporator (e) and condenser (c) fluids, C min is the minimum value of C e and C c , the heat capacities of the evaporator and condenser fluids, a measure of the mass flow rate ( _ m in kg.s À 1 ) multiplied by the specific heat capacity (c p in J.kg À1 .K À 1 ) of each stream. e t is the total effectiveness of the heat exchanger, traditionally calculated using the equations below, Depending on which heat capacity is the larger of the condenser and evaporator fluids, the total effectiveness (e t ) equation varies:</p>
        <p>where R e,out and R c,out are the thermal resistances of the evaporator section and the condenser section. The thermal resistance decreases as the number of pipes increases, due to the increased surface area. Section 3.3 deals with how h fc is calculated. Heat capacitance is found by Eqs. (3.16) and (3.17).where R e,out and R c,out are the thermal resistances of the evaporator section and the condenser section. The thermal resistance decreases as the number of pipes increases, due to the increased surface area. Section 3.3 deals with how h fc is calculated. Heat capacitance is found by Eqs. (3.16) and (3.17).</p>
        <p>C e ¼ _ m e c p;e ð3:16Þ The equations in this section, aloing were coded using Fortran language for the HPHE component in the TRNSYS model to determine the outlet temperatures depending on the variables in the model.C e ¼ _ m e c p;e ð3:16Þ The equations in this section, aloing were coded using Fortran language for the HPHE component in the TRNSYS model to determine the outlet temperatures depending on the variables in the model.</p>
        <p>The heat transfer coefficient of forced convection, h fc , is the most challenging variable to determine and it depends on a variety of flow properties. The calculations predominantly depend upon the design of the HPHE. h fc must be calculated for both the evaporator and condenser sections, as below:The heat transfer coefficient of forced convection, h fc , is the most challenging variable to determine and it depends on a variety of flow properties. The calculations predominantly depend upon the design of the HPHE. h fc must be calculated for both the evaporator and condenser sections, as below:</p>
        <p>Nu D is the Nusselt number (dimensionless) in respect to the diameter of the heat pipe and the calculations are shown in Section 3.3.1, k is the thermal conductivity of the fluid (W.m À 1 .K À 1 ) and D o is the outer diameter of the heat pipe (m).Nu D is the Nusselt number (dimensionless) in respect to the diameter of the heat pipe and the calculations are shown in Section 3.3.1, k is the thermal conductivity of the fluid (W.m À 1 .K À 1 ) and D o is the outer diameter of the heat pipe (m).</p>
        <p>Each of the numbers below are calculated for the inlet, outlet and heat pipe outer wall temperatures of both the evaporator and condenser sections. Tables for natural gas, flue gas, air, water and thermal oil (specifically Therminol-66) are used to calculate the thermophysical properties from [48,49,50,51]. The significant properties are density, kinematic viscosity, thermal conductivity and specific heat capacity.Each of the numbers below are calculated for the inlet, outlet and heat pipe outer wall temperatures of both the evaporator and condenser sections. Tables for natural gas, flue gas, air, water and thermal oil (specifically Therminol-66) are used to calculate the thermophysical properties from [48,49,50,51]. The significant properties are density, kinematic viscosity, thermal conductivity and specific heat capacity.</p>
        <p>The Nusselt number is traditionally calculated from Eq. (3.19), a rearrangement of Eq. (3.18), in order create a non-dimensional number from many contributing variables. In essence, the Nusselt number represents a ratio of heat transfer by convection to conduction across a fluid layer to quantify which mechanism contributes the most to heat transfer [13].The Nusselt number is traditionally calculated from Eq. (3.19), a rearrangement of Eq. (3.18), in order create a non-dimensional number from many contributing variables. In essence, the Nusselt number represents a ratio of heat transfer by convection to conduction across a fluid layer to quantify which mechanism contributes the most to heat transfer [13].</p>
        <p>L ch is the characteristic length, in this case substituted with D o . The Prandtl number (Pr) of a fluid is the ratio between momentum diffusivity and thermal diffusivity. The number describes the thickness of the thermal boundary layer relative to the thermal boundary layer. Gases have Prandtl numbers around 0.7À1.0 and water is 1.7À13.7. [13]. The Prandtl number can be calculated from Eq. (3.20) [52].L ch is the characteristic length, in this case substituted with D o . The Prandtl number (Pr) of a fluid is the ratio between momentum diffusivity and thermal diffusivity. The number describes the thickness of the thermal boundary layer relative to the thermal boundary layer. Gases have Prandtl numbers around 0.7À1.0 and water is 1.7À13.7. [13]. The Prandtl number can be calculated from Eq. (3.20) [52].</p>
        <p>n is the momentum or kinematic viscosity (m 2 .s À 1 ), a is the thermal diffusivity (m 2 .s À 1 ), m is the dynamic viscosity (Pa.s), r is the density (kg.m À 3 ), k is the thermal conductivity (W.m À 1 .K À 1 ), c p is the specific heat (J.kg À1 .K À 1 ). where r is the fluid density, u is the velocity, m is the dynamic viscosity, L ch is the characteristic length and n is the momentum or kinematic viscosity. The Reynolds number associated with the outer diameter of a tube (D o ) can be determined using:n is the momentum or kinematic viscosity (m 2 .s À 1 ), a is the thermal diffusivity (m 2 .s À 1 ), m is the dynamic viscosity (Pa.s), r is the density (kg.m À 3 ), k is the thermal conductivity (W.m À 1 .K À 1 ), c p is the specific heat (J.kg À1 .K À 1 ). where r is the fluid density, u is the velocity, m is the dynamic viscosity, L ch is the characteristic length and n is the momentum or kinematic viscosity. The Reynolds number associated with the outer diameter of a tube (D o ) can be determined using:</p>
        <p>The calculation of V max , the maximum velocity occurring in the minimum flow area between tubes (in this case the heat pipes), depends on whether the tubes are in a staggered or in-line arrangement. Fig. 8 shows an in-line tube bundle arrangement with the varying parameters and Eq. (3.24) provides the calculation. Fig. 9 shows a staggered arrangement with the V max calculations provided by Eqs. (3.25) to (3.27).The calculation of V max , the maximum velocity occurring in the minimum flow area between tubes (in this case the heat pipes), depends on whether the tubes are in a staggered or in-line arrangement. Fig. 8 shows an in-line tube bundle arrangement with the varying parameters and Eq. (3.24) provides the calculation. Fig. 9 shows a staggered arrangement with the V max calculations provided by Eqs. (3.25) to (3.27).</p>
        <p>where n f is the free-flow velocity at the inlet face area without tubes.where n f is the free-flow velocity at the inlet face area without tubes.</p>
        <p>The minimum free-flow area, A min , can potentially occur in two places in staggered arrangements. It can be, as in Eq. (3.23), transversely between the tube rows. However, if S T is much larger than S L such that:The minimum free-flow area, A min , can potentially occur in two places in staggered arrangements. It can be, as in Eq. (3.23), transversely between the tube rows. However, if S T is much larger than S L such that:</p>
        <p>according to [53]:according to [53]:</p>
        <p>The authors have rearranged this to:The authors have rearranged this to:</p>
        <p>Table 1 provides the available correlations, based on empirical data, for calculating the Nusselt number from literature using Reynolds and Prandtl numbers with the varying applications and conditions where they can be applied; adapted from [54].Table 1 provides the available correlations, based on empirical data, for calculating the Nusselt number from literature using Reynolds and Prandtl numbers with the varying applications and conditions where they can be applied; adapted from [54].</p>
        <p>Pr s is the Prandtl number evaluated at the external wall temperature of the heat pipe.Pr s is the Prandtl number evaluated at the external wall temperature of the heat pipe.</p>
        <p>For the correlations provided by Ref. [59], if the number of rows (Nr) is &lt;16 and Re D &gt;1000, a correction factor can be used as seen in Table 2, adapted from [13].For the correlations provided by Ref. [59], if the number of rows (Nr) is &lt;16 and Re D &gt;1000, a correction factor can be used as seen in Table 2, adapted from [13].</p>
        <p>The final factor that needs to be considered is whether the heat pipes are finned. External pipe finning is used to increase the heat transfer surface and increase turbulence and is primarily for gaseous applications but can also be used for liquids. The HPHE tested had helical fins on both the evaporator and condenser sections. Helical fins are currently the favoured configuration for heat exchangers for WHR units. Ponsoi, Pikulkajorn and Wongwises [60] provide a thorough review on spiral finning, the available configurations and available correlations for Colburn and friction factors. Fig. 10 provides a schematic of a selection of available tube finning configurations. The model can be adapted to incorporate other finning configurations and used equations for their area and correlations determining efficiency.The final factor that needs to be considered is whether the heat pipes are finned. External pipe finning is used to increase the heat transfer surface and increase turbulence and is primarily for gaseous applications but can also be used for liquids. The HPHE tested had helical fins on both the evaporator and condenser sections. Helical fins are currently the favoured configuration for heat exchangers for WHR units. Ponsoi, Pikulkajorn and Wongwises [60] provide a thorough review on spiral finning, the available configurations and available correlations for Colburn and friction factors. Fig. 10 provides a schematic of a selection of available tube finning configurations. The model can be adapted to incorporate other finning configurations and used equations for their area and correlations determining efficiency.</p>
        <p>The total heat transfer area (A tot ) of a heat pipe section with fins is found by adding the heat transfer area of the heat pipe (A hp ) to the heat transfer area of the fins (A f ) taking into account the efficiency of the fins. Heat transfer is reduced the farther the fin section is from the pipe as the energy is passed by conduction. Therefore, a coefficient of efficiency for the fin is introduced (h f ). Fig. 11 shows a diagram of a finned heat pipe and symbols used in the following equations. These equations are calculated for both the evaporator and condenser section separately for helical fins.The total heat transfer area (A tot ) of a heat pipe section with fins is found by adding the heat transfer area of the heat pipe (A hp ) to the heat transfer area of the fins (A f ) taking into account the efficiency of the fins. Heat transfer is reduced the farther the fin section is from the pipe as the energy is passed by conduction. Therefore, a coefficient of efficiency for the fin is introduced (h f ). Fig. 11 shows a diagram of a finned heat pipe and symbols used in the following equations. These equations are calculated for both the evaporator and condenser section separately for helical fins.</p>
        <p>H f is the width of the fins and x is:H f is the width of the fins and x is:</p>
        <p>h fc is the heat transfer coefficient of forced convection, k f is the thermal conductivity of the fin material, e f is the thickness of the fin.h fc is the heat transfer coefficient of forced convection, k f is the thermal conductivity of the fin material, e f is the thickness of the fin.</p>
        <p>The heat transfer area of the fins is:The heat transfer area of the fins is:</p>
        <p>L hl is the length of the helical found by:L hl is the length of the helical found by:</p>
        <p>L is the length of the finned heat pipe section, whether it is the evaporator or condenser. D of is the outer diameter of the heat pipe including the fins, D o is the outer diameter of the heat pipe and P f is the pitch of the fins.L is the length of the finned heat pipe section, whether it is the evaporator or condenser. D of is the outer diameter of the heat pipe including the fins, D o is the outer diameter of the heat pipe and P f is the pitch of the fins.</p>
        <p>The heat transfer area of just the heat pipe (A hp ) without fins is found by:The heat transfer area of just the heat pipe (A hp ) without fins is found by:</p>
        <p>A HPHE consists of many individual heat pipes. The heat transfer area in the entire exchanger condenser A c and evaporator A e section is determined by: data from [61]. This was extracted to create Fig. 12. Carbon steel is predominantly used for finning but the use of aluminium or forms of stainless steel is also seen. The model can be altered to use other material thermal conductivity characteristics, if required.A HPHE consists of many individual heat pipes. The heat transfer area in the entire exchanger condenser A c and evaporator A e section is determined by: data from [61]. This was extracted to create Fig. 12. Carbon steel is predominantly used for finning but the use of aluminium or forms of stainless steel is also seen. The model can be altered to use other material thermal conductivity characteristics, if required.</p>
        <p>A desktop simulation has been conducted with a personally developed transient HPHE model and results compared with experimental data. The software 
            <rs type="software">TRNSYS (TRaNsient System Simulation)</rs> 17 was used to create a transient simulation with varying inputs and parameters. This simulation engine was developed by members of the Solar Energy Laboratory at the College of Engineering within the University of Wisconsin. The software is used to study thermal systems and has latterly been employed to study waste heat recovery. It is installed with a library of over 150 components. These components are used to model a transient system, which allows the user to evaluate and analyse chosen inputs and parameters and view results. An interface called '
            <rs type="software">Simulation Studio</rs>' is used where the system is graphically modelled using the library of components, which are known as 'Types'. These Types are internally composed of a series of mathematical equations where inputs and parameters are converted to output values. The values and units of the inputs and parameters can be altered to provide a graphical view of the system's functionality over a set period of time. A parameter is fixed throughout the entire simulation, but an input can be fixed or changed in each iteration step over the simulation. A transient nature can be achieved by linking an external file (.txt/.csv) as the input or linking the output of another component as the input for another, for example, data logged real temperature profiles from a furnace or weather temperature data from cities around the world can be used.
        </p>
        <p>A HPHE component is not available in the 
            <rs type="software">TRNSYS</rs> library and so the authors coded a new component. The standard 
            <rs type="software">TRNSYS</rs> library with the location of the newly created HPHE Type is shown in Fig. 13. The component needs a 'skeleton' where the user can change inputs and parameters, which is also the icon that can be visualised in
        </p>
        <p>The process for coding and including a new component in the 
            <rs type="software">TRNSYS</rs> library is not straightforward; it requires the use of multiple software and is coded in Fortran. Fortran (FORmula TRANslation) is a compiled imperative programming language. 
            <rs type="software">TRNSYS</rs> was written in this language and as such, it is required to code a Type in this language and then compile it. The Fortran language was developed by the International Business Machines (IBM) Corporation in the 1950s for the purpose of numerical computation and scientific computing specifically for engineering and scientific purposes. The first manual was released in 1956 and the first compiler was released in 1957. The idea was to ease the process of inputting equations into computers. Fortran has many iterations and releases, specifically the Fortran 90 language was used to code the Type, developed in 1991. The process for creating a new component is described in the Programmer's guide (Volume 7) [62] provided within the software. However, not all sections or code is required so the process for building the novel HPHE Type is described in this section. Fig. 14 provides a flowchart diagram to explain the coding process.
        </p>
        <p>To build a new model, 
            <rs type="software">TRNSYS</rs> 17 must be installed and a Fortran compiler capable of generating a 32-bit dynamic link library (DLL). Many compilers are available, but in this case Intel Parallel Studio XE 
            <rs type="version">2019</rs> with the additional Intel 
            <rs type="software">Visual Fortran</rs> package was used. Intel Visual Fortran is an add-on for 
            <rs type="creator">Microsoft</rs>
            <rs type="software">Visual Basic</rs>.
        </p>
        <p>The 
            <rs type="software">TRNSYS</rs> code is split into the kernel and the Types. The kernel provides all the background and functionality inputs to the Types. Types have the mathematical coding to perform calculations of the components used in the simulation as well as how to communicate with the kernel and call various other codes at given steps, in essence, converting inputs to outputs. Types distinguish between inputs that change with time and inputs that do not change with time. These are known as inputs and parameters, respectively. For the HPHE component, the following inputs were required, shown in Table 3.
        </p>
        <p>For the HPHE component, the following parameters were required, shown in Table 4.For the HPHE component, the following parameters were required, shown in Table 4.</p>
        <p>Within the Type, further internal calculations were carried out. These are summarised in the theoretical section of the paper.Within the Type, further internal calculations were carried out. These are summarised in the theoretical section of the paper.</p>
        <p>This section explains how the HPHE component (Type202) code was written. The first line of the code calls the particular subroutine to which the component in simulation studio is linked, in this case the Type number. Type numbers 201À300 are reserved for user written components and Type1À200 are reserved for the standard 
            <rs type="software">TRNSYS</rs> library. For this reason, Type202 was arbitrarily chosen.
        </p>
        <p>A 
            <rs type="software">TRNSYS</rs> 17 simulation requires the access global constants and functions provided in the source code. To choose which are called into the simulation is done by 'Use' statements. Type202 requires TrnsysConstants and TrnsysFunctions. TrnsysConstants is a module containing fixed values that do not change throughout a simulation, for example, declaring the maximum amount of equations or outputs that can be used in a simulation. A table of these constants can be found in Section 7.4.1.1 of the Programmers manual [62]. TrnsysFunctions are all the functions that the subroutines can use to handle the stored data. A full description of each function is found in Section 7.4.2 of the Programmers manual [62].
        </p>
        <p>In previous versions of 
            <rs type="software">TRNSYS</rs>, Types could not exist in an external *.dll file, it required altering the standard TRNDLL.dll. In 
            <rs type="software">TRNSYS</rs> 17, the Types can exist in an external *.dll. The kernel examines the contents of a user library directory to determine if any external *.dll files need to be loaded into the simulation. In this case, the Type202. dll file is an external *.dll file placed in the user library and is loaded into the memory for the duration of the simulation. The code below tells the kernel to search for Type202 in the user library and load it into the memory.
        </p>
        <p>Declaring the variables is a section of code that comes after initially defining the subroutine, giving access to global variables and exporting the component. This is a larger section of code where all the local variables used through the simulation are given. Implicit None is used to instruct that all variables need to be explicitly declared. If the variable is a real number, Double precision is used to set the variable to be a real number with twice the amount of significant decimal digits and a magnitude range of 10 À308 to 10, 308 . This accuracy is not necessary but modern computing power allows the use of it. Integer is used to set the variable to be an integer number.Declaring the variables is a section of code that comes after initially defining the subroutine, giving access to global variables and exporting the component. This is a larger section of code where all the local variables used through the simulation are given. Implicit None is used to instruct that all variables need to be explicitly declared. If the variable is a real number, Double precision is used to set the variable to be a real number with twice the amount of significant decimal digits and a magnitude range of 10 À308 to 10, 308 . This accuracy is not necessary but modern computing power allows the use of it. Integer is used to set the variable to be an integer number.</p>
        <p>Data can be used before the variable to set a parameter to a fixed value; however, this command was not used for Type202. Fig. 15 shows all the local variables used within the Type.Data can be used before the variable to set a parameter to a fixed value; however, this command was not used for Type202. Fig. 15 shows all the local variables used within the Type.</p>
        <p>After declaring the variables, the entirety of the code underneath is the executable section. Each line is read and executed sequentially. The variables Time, Timestep, CurrentUnit, CurrentType are global variables that are required to be read during each iteration to provide the transient nature output of the simulation.After declaring the variables, the entirety of the code underneath is the executable section. Each line is read and executed sequentially. The variables Time, Timestep, CurrentUnit, CurrentType are global variables that are required to be read during each iteration to provide the transient nature output of the simulation.</p>
        <p>The code needs to be 'version signed'. This is done to inform the kernel which version of TRNSYS and therefore the convention in which the component was written. This alters how the kernel handles the component. This allows backward compatibility with components of TRNSYS written in earlier versions and will allow future compatibility with the next versions of TRNSYS. This step is vital as the simulation will call an error if the Type is not signed to a particular version.The code needs to be 'version signed'. This is done to inform the kernel which version of TRNSYS and therefore the convention in which the component was written. This alters how the kernel handles the component. This allows backward compatibility with components of TRNSYS written in earlier versions and will allow future compatibility with the next versions of TRNSYS. This step is vital as the simulation will call an error if the Type is not signed to a particular version.</p>
        <p>On the last run through of the code, at the end of the simulation, it may be required to perform certain actions such as closing external files before returning control to the kernel. This is known as last call manipulation. No last call functions were required for Type202 so it was only necessary to return control to the kernel.On the last run through of the code, at the end of the simulation, it may be required to perform certain actions such as closing external files before returning control to the kernel. This is known as last call manipulation. No last call functions were required for Type202 so it was only necessary to return control to the kernel.</p>
        <p>When a particular timestep finishes, every Type in the simulation is recalled. End of timestep manipulations allows functions to occur before the Type is recalled into the simulation. No end of timestep manipulations were required for Type202 so the Return function allows the Type to be recalled.When a particular timestep finishes, every Type in the simulation is recalled. End of timestep manipulations allows functions to occur before the Type is recalled into the simulation. No end of timestep manipulations were required for Type202 so the Return function allows the Type to be recalled.</p>
        <p>To operate correctly, the kernel needs to be told what Type202 is composed of. The code required informs the kernel that there are fifteen parameters, four inputs, zero derivatives and two outputs. The iteration mode tells the kernel how often the type should be called. A value of one indicates that Type202 should be called at every timestep regardless of whether the input values have altered to the previous iteration. The number of stored variables sets the required number of static and dynamic storage spots. Type202 completes a calculation every timestep with the inputs and so no stored variables are required. No discrete controls are required.To operate correctly, the kernel needs to be told what Type202 is composed of. The code required informs the kernel that there are fifteen parameters, four inputs, zero derivatives and two outputs. The iteration mode tells the kernel how often the type should be called. A value of one indicates that Type202 should be called at every timestep regardless of whether the input values have altered to the previous iteration. The number of stored variables sets the required number of static and dynamic storage spots. Type202 completes a calculation every timestep with the inputs and so no stored variables are required. No discrete controls are required.</p>
        <p>The code assigns units to the input and output values. This is an extremely important step to avoid inadvertently performing calculations or connecting components with different units. A good example of this is whether the component calculates using Kelvin or degrees Celsius. If an output value of one parameter is in a different unit to another, as long as the measurement type is the same (e.g. temperature), TRNSYS will convert the value to the correct unit. The programmer's manual provides a breakdown of the available measurement types, the units, the TRNSYS code and the mathematical conversion used.The code assigns units to the input and output values. This is an extremely important step to avoid inadvertently performing calculations or connecting components with different units. A good example of this is whether the component calculates using Kelvin or degrees Celsius. If an output value of one parameter is in a different unit to another, as long as the measurement type is the same (e.g. temperature), TRNSYS will convert the value to the correct unit. The programmer's manual provides a breakdown of the available measurement types, the units, the TRNSYS code and the mathematical conversion used.</p>
        <p>On the first run of the code there are no iterations, but the initial input and output values of the parameters are read. The initial parameter values are read from external data files or component input values. The order within the component determines the number assigned to it. The 
            <rs type="software">JFIX</rs> function is used to ensure the number read is an integer.
        </p>
        <p>If an out of range parameter is found, to prevent erroneous and incorrect calculations, error messages were built into the code. If a parameter is out of range and the simulation is run, an error message pops up. This is essential to ensure all the parameters are correctly input and results are obtained incorrectly. Fig. 16 shows the coded ranges with the error messages that are shown in a pop-up box and the results file if out of range parameters are input.If an out of range parameter is found, to prevent erroneous and incorrect calculations, error messages were built into the code. If a parameter is out of range and the simulation is run, an error message pops up. This is essential to ensure all the parameters are correctly input and results are obtained incorrectly. Fig. 16 shows the coded ranges with the error messages that are shown in a pop-up box and the results file if out of range parameters are input.</p>
        <p>In this case:In this case:</p>
        <p>The number of rows (Nr) in the HPHE had to be greater than one. The input defaults to zero. This was to ensure that an input was in place. It is easy to input the outer diameter of the pipe in millimetres or centimetres rather than metres. If Dout was over one, it was obvious that the incorrect unit and therefore input was used.The number of rows (Nr) in the HPHE had to be greater than one. The input defaults to zero. This was to ensure that an input was in place. It is easy to input the outer diameter of the pipe in millimetres or centimetres rather than metres. If Dout was over one, it was obvious that the incorrect unit and therefore input was used.</p>
        <p>As the initial default value of the length of the evaporator (Le) and length of the condenser (Lc) was zero, ensuring that Le and Lc were greater than zero ensured that a value was input in the initial parameters.As the initial default value of the length of the evaporator (Le) and length of the condenser (Lc) was zero, ensuring that Le and Lc were greater than zero ensured that a value was input in the initial parameters.</p>
        <p>To ensure the number of heat pipes in a row (Nt) was input, an error occurred if the value was less than or equal to zero.To ensure the number of heat pipes in a row (Nt) was input, an error occurred if the value was less than or equal to zero.</p>
        <p>To ensure the distance between the heat pipes rows and the heat pipe centres in a row (ST and SL) was input in metres, a value greater than or equal to one gave an error.To ensure the distance between the heat pipes rows and the heat pipe centres in a row (ST and SL) was input in metres, a value greater than or equal to one gave an error.</p>
        <p>To ensure an input was given for the flow area of the evaporator and condenser (Ae and Ac), a value less than or equal to zero gave an error.To ensure an input was given for the flow area of the evaporator and condenser (Ae and Ac), a value less than or equal to zero gave an error.</p>
        <p>The finning mode depends on whether the evaporator or condenser sections were finned. 1= no finning, 2= condenser finned, 3= evaporator finned, 4= both finned. Inputs outside of 1À4 are not allowed.The finning mode depends on whether the evaporator or condenser sections were finned. 1= no finning, 2= condenser finned, 3= evaporator finned, 4= both finned. Inputs outside of 1À4 are not allowed.</p>
        <p>The fluid mode told the component which heat sink was being used. 1= air, 2= water 3= thermal oil. Inputs outside of 1À3 are not allowed. Errors for the finning parameters ensured measurements were in input in metres. At the first timestep the outputs of the simulation need an initial value. In this case the output values were set to the values of Tho and Tco; temperature of the hot and cold stream outlets.The fluid mode told the component which heat sink was being used. 1= air, 2= water 3= thermal oil. Inputs outside of 1À3 are not allowed. Errors for the finning parameters ensured measurements were in input in metres. At the first timestep the outputs of the simulation need an initial value. In this case the output values were set to the values of Tho and Tco; temperature of the hot and cold stream outlets.</p>
        <p>In a simulation, it is possible to run multiples of the same Type. For example, if multiple HPHEs are in a simulation, multiple Type202 components will be put into the simulation. The simulation needs to treat these Types separately. For this reason, there is a dedicated code for multiple unit manipulation. If (getIsReReadParameters()) is the function used that causes the parameters list to be reread if there is more than one Type in a simulation. There are four inputs for Type202, namely: temperatures and mass flow rates of the source and sink inlet streams. As with the parameters, the inputs need to be in range for a successful calculation and to check that they have been entered. For this reason, error messages were coded (Fig. 17) to ensure the simulation was not run if this was the case.In a simulation, it is possible to run multiples of the same Type. For example, if multiple HPHEs are in a simulation, multiple Type202 components will be put into the simulation. The simulation needs to treat these Types separately. For this reason, there is a dedicated code for multiple unit manipulation. If (getIsReReadParameters()) is the function used that causes the parameters list to be reread if there is more than one Type in a simulation. There are four inputs for Type202, namely: temperatures and mass flow rates of the source and sink inlet streams. As with the parameters, the inputs need to be in range for a successful calculation and to check that they have been entered. For this reason, error messages were coded (Fig. 17) to ensure the simulation was not run if this was the case.</p>
        <p>All the internal calculations then occur. After all the internal calculations, the final values for Tho and Tco are calculated. At each iteration, Tho and Tco are set as visualisable output values. These values are stored in the memory and can be used at the next timestep. End Subroutine is then used to return control to the kernel after all the calculations are completed and the values are stored. The subroutine for Type202 is then ended.All the internal calculations then occur. After all the internal calculations, the final values for Tho and Tco are calculated. At each iteration, Tho and Tco are set as visualisable output values. These values are stored in the memory and can be used at the next timestep. End Subroutine is then used to return control to the kernel after all the calculations are completed and the values are stored. The subroutine for Type202 is then ended.</p>
        <p>The TRNSYS Programmer's Guide [62] is slightly outdated as the manual only provides instructions on how to add a Type to the TRNDLL.dll using 
            <rs type="creator">Intel</rs>
            <rs type="software">Visual</rs> Fortran 
            <rs type="version">11</rs>. This process was done using 
            <rs type="creator">Intel</rs>
            <rs type="software">Visual Fortran</rs>
            <rs type="version">19</rs> and so it varied from the instructions given in the manual. The instructions to add a new project to the Ivf11.x solution is provided in this section by a flowchart for the process, Fig. 18.
        </p>
        <p>A Type that is used for a simulation consists of two parts, the internal code that tells the component how to work, as detailed in Section 4.1.1 HPHE Coding, as well as the 'skeleton', which is used to enter the component into the simulation, link the component with other components in the simulation, house the code and provide parameter and input values.A Type that is used for a simulation consists of two parts, the internal code that tells the component how to work, as detailed in Section 4.1.1 HPHE Coding, as well as the 'skeleton', which is used to enter the component into the simulation, link the component with other components in the simulation, house the code and provide parameter and input values.</p>
        <p>The empty skeleton for Type 202 (HPHE) was created in Simulation Studio by pressing File&gt;New&gt;New Component (TRNSYS TYPE). A view of the final skeleton with all inputted data for the General, Parameter, Input and Output tab pages are provided in Fig. 19 to Fig. 22, respectively.The empty skeleton for Type 202 (HPHE) was created in Simulation Studio by pressing File&gt;New&gt;New Component (TRNSYS TYPE). A view of the final skeleton with all inputted data for the General, Parameter, Input and Output tab pages are provided in Fig. 19 to Fig. 22, respectively.</p>
        <p>There are several limitations to this model. Firstly, it does not take into account start-up of the heat pipes. It assumes start-up is achieved and the heat pipes are operational. In saying this, the model is used to determine recovered heat energy in a process system that would be operational, so start-up is not essential.There are several limitations to this model. Firstly, it does not take into account start-up of the heat pipes. It assumes start-up is achieved and the heat pipes are operational. In saying this, the model is used to determine recovered heat energy in a process system that would be operational, so start-up is not essential.</p>
        <p>Secondly, HPHEs have thermal inertia. For example, there is residual heat in the casing of the HPHE and the heat pipes themselves that will be transferred to the sink fluid if the source stream is cooling down. Axial conduction through the heat pipe and conduction through the separation plate is also present. These factors are not taken into account. This means the model adapts more quickly than what would occur in reality, as witnessed in the results.Secondly, HPHEs have thermal inertia. For example, there is residual heat in the casing of the HPHE and the heat pipes themselves that will be transferred to the sink fluid if the source stream is cooling down. Axial conduction through the heat pipe and conduction through the separation plate is also present. These factors are not taken into account. This means the model adapts more quickly than what would occur in reality, as witnessed in the results.</p>
        <p>The model assumes perfect insulation whereas the HPHE loses heat through the casing. As such, the model slightly overpredicts the performance, as seen in the results. It is possible to predict temperature loss from the HPHE casing based on the design parameters. However, it was deemed unnecessary as many additional parameters would have to be input and would make the model much more cumbersome for little return.The model assumes perfect insulation whereas the HPHE loses heat through the casing. As such, the model slightly overpredicts the performance, as seen in the results. It is possible to predict temperature loss from the HPHE casing based on the design parameters. However, it was deemed unnecessary as many additional parameters would have to be input and would make the model much more cumbersome for little return.</p>
        <p>The Type, currently, only provides outlet data about the temperature. Additional work is being undertaken to provide, for example, pressure drop, energy recovery rate and conductance values.The Type, currently, only provides outlet data about the temperature. Additional work is being undertaken to provide, for example, pressure drop, energy recovery rate and conductance values.</p>
        <p>Currently, only helical finning is available as an option, whereas, in reality, other configurations are possible. Future work can be undertaken to validate other configurations, and the code can be updated accordingly. Pr 0.31 F a is an arrangement correction factor provided in [56] (3.31) [58] Nu D = 0.34F a Re D 0.61Currently, only helical finning is available as an option, whereas, in reality, other configurations are possible. Future work can be undertaken to validate other configurations, and the code can be updated accordingly. Pr 0.31 F a is an arrangement correction factor provided in [56] (3.31) [58] Nu D = 0.34F a Re D 0.61</p>
        <p>The HPHE unit that was used to validate the model was installed to recover energy from the cooling section of a ceramic continuous roller kiln used to fire tiles. Further information on this exhaust-air HPHE can be found in Ref. [63]. Fig. 23 and Fig. 24 provide the 3D drawing of the HPHE unit and the dimensions. Fig. 25 provides the detail of the separation plate between the two streams and the heat pipe arrangement.The HPHE unit that was used to validate the model was installed to recover energy from the cooling section of a ceramic continuous roller kiln used to fire tiles. Further information on this exhaust-air HPHE can be found in Ref. [63]. Fig. 23 and Fig. 24 provide the 3D drawing of the HPHE unit and the dimensions. Fig. 25 provides the detail of the separation plate between the two streams and the heat pipe arrangement.</p>
        <p>Fig. 26 shows the inlet flow rate data from the experimental HPHE. There was the inlet of the exhaust to the evaporator section and the inlet of the air to the condenser. A data point was taken every minute. 1300 min of data were used. Data for flow rate were measured in Nm 3 .hr À1 , which had to be converted to kg.hr À1 for the TRNSYS simulation. This was achieved using the ideal gas law equation as done by [45]. There were fluctuations in the data mainly in the exhaust flow rate. A maximum error of mass flow rate of 2.78% was reported. The average values for the exhaust and air inlet flow rate were 6047 and 2600 kg.hr À1 , respectively. The maximum and minimum flow rates for the exhaust were 6869 and 632 kg.hr À1 and for the air were 2644 and 2560 kg.hr À1 . These fluctuations assisted in showing that the model would adapt to fluctuating conditions.Fig. 26 shows the inlet flow rate data from the experimental HPHE. There was the inlet of the exhaust to the evaporator section and the inlet of the air to the condenser. A data point was taken every minute. 1300 min of data were used. Data for flow rate were measured in Nm 3 .hr À1 , which had to be converted to kg.hr À1 for the TRNSYS simulation. This was achieved using the ideal gas law equation as done by [45]. There were fluctuations in the data mainly in the exhaust flow rate. A maximum error of mass flow rate of 2.78% was reported. The average values for the exhaust and air inlet flow rate were 6047 and 2600 kg.hr À1 , respectively. The maximum and minimum flow rates for the exhaust were 6869 and 632 kg.hr À1 and for the air were 2644 and 2560 kg.hr À1 . These fluctuations assisted in showing that the model would adapt to fluctuating conditions.</p>
        <p>Fig. 27 shows the model built to validate the component. The left highlighted box shows the real-world experimental data input into the model. These are connected to the HPHE Type that does the mathematical operation. The outputs of the Type are sent to a plotter to graphically display the results. Table 5 gives further information on each Type used in the simulation.Fig. 27 shows the model built to validate the component. The left highlighted box shows the real-world experimental data input into the model. These are connected to the HPHE Type that does the mathematical operation. The outputs of the Type are sent to a plotter to graphically display the results. Table 5 gives further information on each Type used in the simulation.</p>
        <p>Fig. 28 shows the experimental inlet and outlet temperature data of the installed HPHE. The inlet temperatures were fed into the model and the outlet temperatures were used for comparison against the simulation to validate the component. Fig. 29 shows the graph produced in TRNSYS of the simulation inlet and outlet temperatures of the source and sink fluids for comparison.Fig. 28 shows the experimental inlet and outlet temperature data of the installed HPHE. The inlet temperatures were fed into the model and the outlet temperatures were used for comparison against the simulation to validate the component. Fig. 29 shows the graph produced in TRNSYS of the simulation inlet and outlet temperatures of the source and sink fluids for comparison.</p>
        <p>In the experiments, the air inlet is roughly 35 °C and rises to between 150 and 175 °C depending on the flow rate. The exhaust drops from between 190 and 210 °C to 130À145 °C.In the experiments, the air inlet is roughly 35 °C and rises to between 150 and 175 °C depending on the flow rate. The exhaust drops from between 190 and 210 °C to 130À145 °C.</p>
        <p>In the simulation, the air and exhaust inlets directly relate to the experimental set up as these were used as the inputs. The air outlet rose to between 160 and 175 °C and the exhaust dropped to between 140 and 160 °C. It can be seen by comparing the graphs that the simulation follows the experimental results very similarly.In the simulation, the air and exhaust inlets directly relate to the experimental set up as these were used as the inputs. The air outlet rose to between 160 and 175 °C and the exhaust dropped to between 140 and 160 °C. It can be seen by comparing the graphs that the simulation follows the experimental results very similarly.</p>
        <p>The energy recovered was calculated from the secondary stream, air, using:The energy recovered was calculated from the secondary stream, air, using:</p>
        <p>The energy recovery of the experiment was plotted against the simulation for comparison, shown in Fig. 30. It is seen that most results fall well within a § 15% difference with a few outliers predominantly caused by the faster response of the simulation compared to the experiment and lack of thermal inertia. The simulation slightly overpredicted the performance of the HPHE, this is as expected as the model assumes perfect insulation, with no energy losses. Also, with the large number of variables and extensive calculations that need to be conducted, this performance is more than acceptable. The errors between simulation and experiment were rounded and a histogram plot (Fig. 31) shows the spread of error with the majority falling between 3 and 4%. Six major outliers, circled in red, in Fig. 30 were removed and the average error was 4.4%.The energy recovery of the experiment was plotted against the simulation for comparison, shown in Fig. 30. It is seen that most results fall well within a § 15% difference with a few outliers predominantly caused by the faster response of the simulation compared to the experiment and lack of thermal inertia. The simulation slightly overpredicted the performance of the HPHE, this is as expected as the model assumes perfect insulation, with no energy losses. Also, with the large number of variables and extensive calculations that need to be conducted, this performance is more than acceptable. The errors between simulation and experiment were rounded and a histogram plot (Fig. 31) shows the spread of error with the majority falling between 3 and 4%. Six major outliers, circled in red, in Fig. 30 were removed and the average error was 4.4%.</p>
        <p>A TRNSYS Type has been built to simulate a counter-flow HPHE component that provides accurate predictions on outlet temperatures of both the source and sink fluid. This was done using the ɛ-NTU method and real-world installation data. The results of the simulation were well within §15%, with an average of 4.4% error, compared to the experimental results. This component can now be used confidently in larger waste heat recovery system simulations that encompass a HPHE of this configuration. Furthermore, transient HPHE calculations are now possible whereas previously averaged fixed values would have to be used as inputs. Future work will be required to ensure the method of calculating e t is applicable to further applications. Now the component has been validated, the TRNSYS performance of an entire system including a HPHE can be simulated to determine the system performance over time and aid the design and installation of HPHEs for the purpose of WHR. In this paper, an exhaust gas to air unit was validated using an available full-scale unit. Further full-scale units that are currently being installed will be used to validate thermal oil and water as heat sinks, once sufficient data has been collected, in a future article. Methods will be included for determining pressure drop as well as conductance values and energy recovery rate as outputs of the model.A TRNSYS Type has been built to simulate a counter-flow HPHE component that provides accurate predictions on outlet temperatures of both the source and sink fluid. This was done using the ɛ-NTU method and real-world installation data. The results of the simulation were well within §15%, with an average of 4.4% error, compared to the experimental results. This component can now be used confidently in larger waste heat recovery system simulations that encompass a HPHE of this configuration. Furthermore, transient HPHE calculations are now possible whereas previously averaged fixed values would have to be used as inputs. Future work will be required to ensure the method of calculating e t is applicable to further applications. Now the component has been validated, the TRNSYS performance of an entire system including a HPHE can be simulated to determine the system performance over time and aid the design and installation of HPHEs for the purpose of WHR. In this paper, an exhaust gas to air unit was validated using an available full-scale unit. Further full-scale units that are currently being installed will be used to validate thermal oil and water as heat sinks, once sufficient data has been collected, in a future article. Methods will be included for determining pressure drop as well as conductance values and energy recovery rate as outputs of the model.</p>
        <p>NoneNone</p>
        <p>The research presented in this paper has received funding from the European Union's H2020 programme ETEKINA and DREAM under grant agreement numbers 768772 and 723641, respectively. The authors acknowledge further support of research funding contributed by JBM International Ltd.The research presented in this paper has received funding from the European Union's H2020 programme ETEKINA and DREAM under grant agreement numbers 768772 and 723641, respectively. The authors acknowledge further support of research funding contributed by JBM International Ltd.</p>
    </text>
</tei>
