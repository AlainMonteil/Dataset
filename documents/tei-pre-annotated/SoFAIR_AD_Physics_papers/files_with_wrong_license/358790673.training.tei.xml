<?xml version="1.0" encoding="UTF-8"?>
<tei xmlns="http://www.tei-c.org/ns/1.0">
    <teiHeader>
        <fileDesc xml:id="_1"/>
        <encodingDesc>
            <appInfo>
                <application version="0.8.1-SNAPSHOT" ident="GROBID" when="2024-06-14T14:25+0000">
                    <ref target="https://github.com/kermitt2/grobid">A machine learning software for extracting information from scholarly documents</ref>
                </application>
            </appInfo>
        </encodingDesc>
    </teiHeader>
    <text xml:lang="en">
        <p>The convergence of quantum cryptography with applications used in everyday life is a topic drawing attention from the industrial and academic worlds. The development of quantum electronics has led to the practical achievement of quantum devices that are already available on the market and waiting for their firstThe convergence of quantum cryptography with applications used in everyday life is a topic drawing attention from the industrial and academic worlds. The development of quantum electronics has led to the practical achievement of quantum devices that are already available on the market and waiting for their first</p>
        <p>Establishing secure cryptographic keys through untrusted networks is one of the most fundamental cryptographic tasks [1]. While the use of public key infrastructure based on computationally complex mathematical problems and assumptions about the computational power of eavesdroppers prevail, these belong to the group of theoretically breakable computational security solutions. They are therefore under threat as computational power continues to increase and as quantum computing algorithms emerge that can break some widely used computationally complex mathematical problems in polynomial time [2,3]. Quantum Key Distribution, known as QKD [4], is based on the principles of quantum information theory and allows to establish information-secure cryptographic keys that do not depend on these constraints, at least on a protocol level. A suitable message authentication scheme, such as Wegman-Carter [5], should be combined with QKD to this end [6,7].Establishing secure cryptographic keys through untrusted networks is one of the most fundamental cryptographic tasks [1]. While the use of public key infrastructure based on computationally complex mathematical problems and assumptions about the computational power of eavesdroppers prevail, these belong to the group of theoretically breakable computational security solutions. They are therefore under threat as computational power continues to increase and as quantum computing algorithms emerge that can break some widely used computationally complex mathematical problems in polynomial time [2,3]. Quantum Key Distribution, known as QKD [4], is based on the principles of quantum information theory and allows to establish information-secure cryptographic keys that do not depend on these constraints, at least on a protocol level. A suitable message authentication scheme, such as Wegman-Carter [5], should be combined with QKD to this end [6,7].</p>
        <p>QKD networks differ significantly from traditional telecommunication networks due to the specificity of QKD links and network organization. Restrictions such as limited key generation rate and reachable distance (Section 2), present lack of quantum repeaters (Section 3.2), specific routing due to the use of public and quantum channels in quantum links (Section 6), and network organization that for now has to employ a hop-by-hop key transport approach (Section 5.2.2) are the motivations for this survey. Although several studies on QKD link and QKD quantum channels can be found [8][9][10], this survey focuses on QKD networking, network organization, routing and signaling protocols, and software-defined QKD networking techniques. After reading this survey, interested readers will have an insight into quantum networks from an engineering perspective and be familiar with the modes of functioning, realization, existing solutions, and methods of simulating quantum cryptographic networks. This survey provides a high-level view of QKD networks and is of use and interest to researchers, practitioners of QKD network design, and PhD students in the field of applied quantum cryptography.QKD networks differ significantly from traditional telecommunication networks due to the specificity of QKD links and network organization. Restrictions such as limited key generation rate and reachable distance (Section 2), present lack of quantum repeaters (Section 3.2), specific routing due to the use of public and quantum channels in quantum links (Section 6), and network organization that for now has to employ a hop-by-hop key transport approach (Section 5.2.2) are the motivations for this survey. Although several studies on QKD link and QKD quantum channels can be found [8][9][10], this survey focuses on QKD networking, network organization, routing and signaling protocols, and software-defined QKD networking techniques. After reading this survey, interested readers will have an insight into quantum networks from an engineering perspective and be familiar with the modes of functioning, realization, existing solutions, and methods of simulating quantum cryptographic networks. This survey provides a high-level view of QKD networks and is of use and interest to researchers, practitioners of QKD network design, and PhD students in the field of applied quantum cryptography.</p>
        <p>The survey is organized as follows: Section 2 introduces the features of QKD links. Section 3 summarizes the limitations and basic characteristics of QKD networks and explains how they are practically implemented. QKD network types are described in Section 4. Section 5 covers previously deployed QKD networks. QKD network routing techniques are discussed in Section 6. Section 7 provides an overview of QKD software-defined networking. Section 8 concludes this survey.The survey is organized as follows: Section 2 introduces the features of QKD links. Section 3 summarizes the limitations and basic characteristics of QKD networks and explains how they are practically implemented. QKD network types are described in Section 4. Section 5 covers previously deployed QKD networks. QKD network routing techniques are discussed in Section 6. Section 7 provides an overview of QKD software-defined networking. Section 8 concludes this survey.</p>
        <p>Quantum Key Distribution: A Networking Perspective 96:3 The survey includes the supplementary material with additional QKD networks listed in Section 1 and simulation techniques discussed in Section 2. Overview of signaling network protocols is given in Section 3, while QKD header and QKD packet encapsulation are discussed in supplementary material, Section 4. Section 5 provides an overview of work in QKD standardization process. The graphical outline of the survey structure is shown in Figure 1.Quantum Key Distribution: A Networking Perspective 96:3 The survey includes the supplementary material with additional QKD networks listed in Section 1 and simulation techniques discussed in Section 2. Overview of signaling network protocols is given in Section 3, while QKD header and QKD packet encapsulation are discussed in supplementary material, Section 4. Section 5 provides an overview of work in QKD standardization process. The graphical outline of the survey structure is shown in Figure 1.</p>
        <p>A QKD link, or simply, "link," denotes a logical connection between two remote QKD nodes connected by a quantum channel used for transmitting photons and a public channel used for postprocessing the exchanged information, respectively. The disadvantage of this type of link is reflected in a limited quantum channel key generation rate, available to the parties connected by a direct optical fiber or free line-of-sight in a point-to-point (P2P) manner over a certain distance. However, it is also a necessary condition for secure key generation.A QKD link, or simply, "link," denotes a logical connection between two remote QKD nodes connected by a quantum channel used for transmitting photons and a public channel used for postprocessing the exchanged information, respectively. The disadvantage of this type of link is reflected in a limited quantum channel key generation rate, available to the parties connected by a direct optical fiber or free line-of-sight in a point-to-point (P2P) manner over a certain distance. However, it is also a necessary condition for secure key generation.</p>
        <p>Although fiber is a good and commonly used medium for transmitting qubits, the installation of a dedicated optical channel for QKD purposes is not practical in all circumstances. 1 A free space link is sometimes convenient, although it has its drawbacks, since it needs suitable atmospheric conditions, a visible light path, and an acceptable signal-to-noise ratio (SNR) that strictly limits usage time. Nevertheless, the results obtained from experiments in Los Alamos [17] and Munich in which a link between the ground and an aircraft flying at 290 km/h was established [18] demonstrated promise with satellite connections [17][18][19][20][21][22][23]. After performing a sequence of free space QKD experiments on the ground, China successfully launched the quantum satellite "Micius," which demonstrated a satellite-to-ground QKD over a distance of 645 to 1200 kilometers [24].Although fiber is a good and commonly used medium for transmitting qubits, the installation of a dedicated optical channel for QKD purposes is not practical in all circumstances. 1 A free space link is sometimes convenient, although it has its drawbacks, since it needs suitable atmospheric conditions, a visible light path, and an acceptable signal-to-noise ratio (SNR) that strictly limits usage time. Nevertheless, the results obtained from experiments in Los Alamos [17] and Munich in which a link between the ground and an aircraft flying at 290 km/h was established [18] demonstrated promise with satellite connections [17][18][19][20][21][22][23]. After performing a sequence of free space QKD experiments on the ground, China successfully launched the quantum satellite "Micius," which demonstrated a satellite-to-ground QKD over a distance of 645 to 1200 kilometers [24].</p>
        <p>The maximum distance, over which key can be generated, decreases with increasing losses and optical detector noise. For a given detector and settings, the detector's dark-count 2 rate is constant, but key rate decreases with distance due to increase of cumulative losses. In current commercial optical fiber systems, the distance of a QKD link is roughly limited to 100 km, while the key rate is limited to a few tens or hundreds of kbps [26,27]. Due to the limited key rate, key storage is installed at both endpoints of the corresponding link. This storage is gradually filled with new key material, and the available key material is subsequently used to encrypt/decrypt data flows [28]. The amount of data to be encrypted and the encryption algorithm type determine the rate of key storage discharge, or, simply, the key consumption rate. The key rate of the link is otherwise referred to as the key charging rate [28][29][30][31]. The QKD link can be designated "currently unavailable" when no available key material in key storage is found, as no cryptographic operations can be performed [32]. It is also worth noting that an apparently optimal strategy for QKD devices is to continuously generate keys with maximum intensity until the storage is full (which depends on how it is implemented) [28,33].The maximum distance, over which key can be generated, decreases with increasing losses and optical detector noise. For a given detector and settings, the detector's dark-count 2 rate is constant, but key rate decreases with distance due to increase of cumulative losses. In current commercial optical fiber systems, the distance of a QKD link is roughly limited to 100 km, while the key rate is limited to a few tens or hundreds of kbps [26,27]. Due to the limited key rate, key storage is installed at both endpoints of the corresponding link. This storage is gradually filled with new key material, and the available key material is subsequently used to encrypt/decrypt data flows [28]. The amount of data to be encrypted and the encryption algorithm type determine the rate of key storage discharge, or, simply, the key consumption rate. The key rate of the link is otherwise referred to as the key charging rate [28][29][30][31]. The QKD link can be designated "currently unavailable" when no available key material in key storage is found, as no cryptographic operations can be performed [32]. It is also worth noting that an apparently optimal strategy for QKD devices is to continuously generate keys with maximum intensity until the storage is full (which depends on how it is implemented) [28,33].</p>
        <p>A key can be used to encrypt communication over a public channel using a One Time Pad (OTP) cipher and ITS authentication scheme such as Wegman-Carter [34,35]. Since an OTP cipher requires the same amount of key that corresponds to the length of the message being encrypted and additional keys for ITS authentication, this approach consumes more key material than the message being transmitted. If not enough key material is available, OTP cannot be used, and the use of alternative cryptographic techniques such as Advanced Encryption Standard (AES), which does not require such a large amount of key consumption, is the most common choice [36].A key can be used to encrypt communication over a public channel using a One Time Pad (OTP) cipher and ITS authentication scheme such as Wegman-Carter [34,35]. Since an OTP cipher requires the same amount of key that corresponds to the length of the message being encrypted and additional keys for ITS authentication, this approach consumes more key material than the message being transmitted. If not enough key material is available, OTP cannot be used, and the use of alternative cryptographic techniques such as Advanced Encryption Standard (AES), which does not require such a large amount of key consumption, is the most common choice [36].</p>
        <p>QKD networks are used to extend the range of QKD systems and consist of static nodes that represent secure access points considered to have unlimited processing power and power supply. Because of the point-to-point behavior of the links connecting nodes, previously deployed testbeds [29,37,38] have shown that secure keys in QKD networks can be transmitted from node to node in a hop-by-hop manner (Section 5.2.2) or through a key repeater concept (Section 5.1.5). Common to both networks is the assumption that all nodes in a network should be trusted [32,39]. This assumption can be avoided if multipath communication Quantum Network Coding techniques are used [40]. In this survey, previously deployed QKD networks are briefly discussed, focusing on methods of communication, routing protocols, and network organization.QKD networks are used to extend the range of QKD systems and consist of static nodes that represent secure access points considered to have unlimited processing power and power supply. Because of the point-to-point behavior of the links connecting nodes, previously deployed testbeds [29,37,38] have shown that secure keys in QKD networks can be transmitted from node to node in a hop-by-hop manner (Section 5.2.2) or through a key repeater concept (Section 5.1.5). Common to both networks is the assumption that all nodes in a network should be trusted [32,39]. This assumption can be avoided if multipath communication Quantum Network Coding techniques are used [40]. In this survey, previously deployed QKD networks are briefly discussed, focusing on methods of communication, routing protocols, and network organization.</p>
        <p>To facilitate organization, a QKD network has often been described using several layers [41,42]:To facilitate organization, a QKD network has often been described using several layers [41,42]:</p>
        <p>• A quantum layer where a secure symmetrical key is established.• A quantum layer where a secure symmetrical key is established.</p>
        <p>• A key management layer used to verify and manage the previously established key.• A key management layer used to verify and manage the previously established key.</p>
        <p>• A communication layer where the established key is used to secure data traffic.• A communication layer where the established key is used to secure data traffic.</p>
        <p>As mentioned above, QKD is a key agreement primitive and as such is located in the lowest (basic) layer of the QKD network architecture. Taking into account different rates of key material consumption by different applications, a situation in which not enough key material is available to meet the needs of higher layers is not desirable. The quantum layer therefore needs to continuously establish key material. To provide a guaranteed level of service, the QKD network should have a detailed view in its resources and capacities. Previously deployed QKD networks did not have defined strategies for a quality assurance service. For example, the SECOQC QKD network, discussed in Section 5.2, was committed to the basic Best Effort service type, which only defines the average key rate and traffic burst, while the Guaranteed Key Rate service type had been suggested for improved versions of QKD networks [33].As mentioned above, QKD is a key agreement primitive and as such is located in the lowest (basic) layer of the QKD network architecture. Taking into account different rates of key material consumption by different applications, a situation in which not enough key material is available to meet the needs of higher layers is not desirable. The quantum layer therefore needs to continuously establish key material. To provide a guaranteed level of service, the QKD network should have a detailed view in its resources and capacities. Previously deployed QKD networks did not have defined strategies for a quality assurance service. For example, the SECOQC QKD network, discussed in Section 5.2, was committed to the basic Best Effort service type, which only defines the average key rate and traffic burst, while the Guaranteed Key Rate service type had been suggested for improved versions of QKD networks [33].</p>
        <p>Considering the comprehensive and detailed documentation available on quantum optical communications [26,[43][44][45][46][47], the emphasis of this publication is on the two upper layers. These Quantum Key Distribution: A Networking Perspective 96:5 layers can have different and independent network organization, as communication between nodes is achieved through existing standard connections, such as the Internet, where an arbitrary number of intermediate devices can be included (Figure 2). The key management layer is in charge of managing the key storage resources, routing protocols, quality of service (QoS), and so on. The topmost communication layer uses previously established key material to encrypt data traffic by using an existing security protocol suite, such as Internet Protocol Security (IPSec) [14,48]. However, the described hierarchy distributes the responsibility for security across all three layers.Considering the comprehensive and detailed documentation available on quantum optical communications [26,[43][44][45][46][47], the emphasis of this publication is on the two upper layers. These Quantum Key Distribution: A Networking Perspective 96:5 layers can have different and independent network organization, as communication between nodes is achieved through existing standard connections, such as the Internet, where an arbitrary number of intermediate devices can be included (Figure 2). The key management layer is in charge of managing the key storage resources, routing protocols, quality of service (QoS), and so on. The topmost communication layer uses previously established key material to encrypt data traffic by using an existing security protocol suite, such as Internet Protocol Security (IPSec) [14,48]. However, the described hierarchy distributes the responsibility for security across all three layers.</p>
        <p>QKD represents a new generation of security solutions that do not rely on the computational assumptions of problems presumed difficult. However, QKD networks must be integrated into the existing environment and need to meet certain criteria and conditions. Some of the most common requirements from QKD networks are listed below.QKD represents a new generation of security solutions that do not rely on the computational assumptions of problems presumed difficult. However, QKD networks must be integrated into the existing environment and need to meet certain criteria and conditions. Some of the most common requirements from QKD networks are listed below.</p>
        <p>One of the vital parameters describing a QKD network is the average key rate of a QKD link. Since encryption and decryption operations cannot be performed without sufficient key material, the competition between the rate at which key material is stored in the key storage and the rate at which it is consumed for encryption and decryption operations has a major influence on network performance.One of the vital parameters describing a QKD network is the average key rate of a QKD link. Since encryption and decryption operations cannot be performed without sufficient key material, the competition between the rate at which key material is stored in the key storage and the rate at which it is consumed for encryption and decryption operations has a major influence on network performance.</p>
        <p>Comparing previously deployed QKD networks and testbeds chronologically, a rapid improvement in the development of quantum equipment is evident. QKD systems implemented in 2002 in the DARPA QKD network could achieve a key rate of approx. 400 bps over 10 km [29]. In 2007, in SECOQC, the maximum key rate was 3.1 kbps over 33 km [37]. The best performed solutions presented in Tokyo in 2009 achieved a key rate of 304 kbps over 45 km [38]. In 2017, China built the 2,000-km Beijing-Shanghai backbone QKD network with devices typically achieving key rates of 250 kbps over 43 km.Comparing previously deployed QKD networks and testbeds chronologically, a rapid improvement in the development of quantum equipment is evident. QKD systems implemented in 2002 in the DARPA QKD network could achieve a key rate of approx. 400 bps over 10 km [29]. In 2007, in SECOQC, the maximum key rate was 3.1 kbps over 33 km [37]. The best performed solutions presented in Tokyo in 2009 achieved a key rate of 304 kbps over 45 km [38]. In 2017, China built the 2,000-km Beijing-Shanghai backbone QKD network with devices typically achieving key rates of 250 kbps over 43 km.</p>
        <p>In the past 20 years, a steadily increasing secret key rate has been obtained with improved optical components and better electronics mainly in the detectors. For the latest jump to achieve record-high rates of around 10 Mbps [49], digital signal processing in FPGA was optimized. The throughput of measured qubits to enhance key rates has also been enhanced, especially for shorter links, by removing limitations without FPGA. A second race is open to achieving longer singlespan transmission distances [50][51][52][53] based on protocol enhancements as well as technological improvements leading to detectors with ever-decreasing dark count rates. 3 It could be argued that the development to improve single links on rates at short distances and maximum span will make QKD networks needless. The opposite is true, however, as the opportunity to open a mass market with these improvements at the link level seems low and unlikely to cover broad deployment scenarios specifically using the technical improvements from recent years. What the latest improvements genuinely enable is increased diversity in the links that can be potentially deployed in QKD networks.In the past 20 years, a steadily increasing secret key rate has been obtained with improved optical components and better electronics mainly in the detectors. For the latest jump to achieve record-high rates of around 10 Mbps [49], digital signal processing in FPGA was optimized. The throughput of measured qubits to enhance key rates has also been enhanced, especially for shorter links, by removing limitations without FPGA. A second race is open to achieving longer singlespan transmission distances [50][51][52][53] based on protocol enhancements as well as technological improvements leading to detectors with ever-decreasing dark count rates. 3 It could be argued that the development to improve single links on rates at short distances and maximum span will make QKD networks needless. The opposite is true, however, as the opportunity to open a mass market with these improvements at the link level seems low and unlikely to cover broad deployment scenarios specifically using the technical improvements from recent years. What the latest improvements genuinely enable is increased diversity in the links that can be potentially deployed in QKD networks.</p>
        <p>It is therefore reasonable to expect that in the future, an optimal solution will significantly exceed the present key rate and distance values, although the race between generation and consumption of key material will remain.It is therefore reasonable to expect that in the future, an optimal solution will significantly exceed the present key rate and distance values, although the race between generation and consumption of key material will remain.</p>
        <p>Length. The fundamental constraint of a QKD link is the length over which secure key material can be generated (due to scattering and absorption of polarized photons and other factors [27,44,45,54]), which limits the ability of quantum channels (direct optical links or free line-of-sight) to a certain distance. It is interesting to compare the lengths of links in previously built QKD networks. 4 The maximum length in the DARPA QKD network was a 29 km connection through the optical switch between Harvard and Boston Universities [29]. In SECOQC, the maximum length of the link was 82 km between the BREIT and St. Pölten nodes [37], while in Tokyo, the maximum connection between the nodes was a record 90 km between the Koganei-1 and Koganei-2 nodes [58]. In the Beijing-Shanghai Backbone QKD network, the maximum link length is 89.3 km between Hefei and Wuwei.Length. The fundamental constraint of a QKD link is the length over which secure key material can be generated (due to scattering and absorption of polarized photons and other factors [27,44,45,54]), which limits the ability of quantum channels (direct optical links or free line-of-sight) to a certain distance. It is interesting to compare the lengths of links in previously built QKD networks. 4 The maximum length in the DARPA QKD network was a 29 km connection through the optical switch between Harvard and Boston Universities [29]. In SECOQC, the maximum length of the link was 82 km between the BREIT and St. Pölten nodes [37], while in Tokyo, the maximum connection between the nodes was a record 90 km between the Koganei-1 and Koganei-2 nodes [58]. In the Beijing-Shanghai Backbone QKD network, the maximum link length is 89.3 km between Hefei and Wuwei.</p>
        <p>In current systems with optical fibers, the distance over which QKD links can be effectively applied is limited to roughly 100 km [26,27].In current systems with optical fibers, the distance over which QKD links can be effectively applied is limited to roughly 100 km [26,27].</p>
        <p>The main reason for interest in QKD is the privacy of the established key material. This means that the nodes of a QKD network must be secured with a strong probability that the established key material is unique and inaccessible to third parties. The security of key material is evaluated not only when it is established but also when it is managed, stored, and eventually used. It is therefore important to secure each level of the QKD network architecture.The main reason for interest in QKD is the privacy of the established key material. This means that the nodes of a QKD network must be secured with a strong probability that the established key material is unique and inaccessible to third parties. The security of key material is evaluated not only when it is established but also when it is managed, stored, and eventually used. It is therefore important to secure each level of the QKD network architecture.</p>
        <p>Because of scarce resources (generation key rate), communication in a network is reduced to a minimum, since each additional packet means spending an additional amount of previously established key material. Since communication is usually performed on a hop-by-hop basis that requires the trustworthiness of all nodes in the path, selecting the shortest routing path is necessary to minimize the number of nodes that can potentially be abducted or attacked by an eavesdropper. Also, involving longer paths requires a higher consumption of key material. During network congestion or problems in communication, used key material is deliberately discarded and new key material for retransmission is applied to reduce the risk of leaks [28]. Therefore, minimizing the number of hops is preferable.Because of scarce resources (generation key rate), communication in a network is reduced to a minimum, since each additional packet means spending an additional amount of previously established key material. Since communication is usually performed on a hop-by-hop basis that requires the trustworthiness of all nodes in the path, selecting the shortest routing path is necessary to minimize the number of nodes that can potentially be abducted or attacked by an eavesdropper. Also, involving longer paths requires a higher consumption of key material. During network congestion or problems in communication, used key material is deliberately discarded and new key material for retransmission is applied to reduce the risk of leaks [28]. Therefore, minimizing the number of hops is preferable.</p>
        <p>Because of the cost and manner of implementation, QKD networks will slowly integrate into traditional and everyday telecommunication environments. It is important then to ensure robustness, which is reflected in the gradual and seamless addition of new nodes and establishment of new links. A QKD network needs to provide adequate replacement paths to avoid defective nodes or nodes under severe attack. Regardless of the security techniques, remembering that attackers can easily find ways of terminating optical links and breaking QKD connections is important. A QKD network must have an adequate response to such situations.Because of the cost and manner of implementation, QKD networks will slowly integrate into traditional and everyday telecommunication environments. It is important then to ensure robustness, which is reflected in the gradual and seamless addition of new nodes and establishment of new links. A QKD network needs to provide adequate replacement paths to avoid defective nodes or nodes under severe attack. Regardless of the security techniques, remembering that attackers can easily find ways of terminating optical links and breaking QKD connections is important. A QKD network must have an adequate response to such situations.</p>
        <p>Quantum Key Distribution: A Networking Perspective 96:7Quantum Key Distribution: A Networking Perspective 96:7</p>
        <p>Because traffic can be connected and directed between different network domains, network repeaters have a fundamental role in modern networking. Although theoretical and pioneering results in the field of quantum repeaters are available [59][60][61][62], in practice they remain unachievable with current technology [10,27]. The idea behind a quantum repeater is to employ quantum entanglement of photons to communicate over different quantum links. Quantum entanglement is a key aspect in applying quantum communications and quantum information. In short, quantum entanglement implies that multiple particles are connected together in such a manner that the measurement of one particle's quantum state determines the possible quantum states of the other particles. Even when particles are separated by large distances, they still make up a joint quantum system. Entanglement fidelity is a property used to describe how well the entanglement between two subsystems is preserved in a quantum process.Because traffic can be connected and directed between different network domains, network repeaters have a fundamental role in modern networking. Although theoretical and pioneering results in the field of quantum repeaters are available [59][60][61][62], in practice they remain unachievable with current technology [10,27]. The idea behind a quantum repeater is to employ quantum entanglement of photons to communicate over different quantum links. Quantum entanglement is a key aspect in applying quantum communications and quantum information. In short, quantum entanglement implies that multiple particles are connected together in such a manner that the measurement of one particle's quantum state determines the possible quantum states of the other particles. Even when particles are separated by large distances, they still make up a joint quantum system. Entanglement fidelity is a property used to describe how well the entanglement between two subsystems is preserved in a quantum process.</p>
        <p>In theory, however, the application of entangled states and entanglement swapping is hindered by two main roadblocks. The first is that the greater the distance between two entangled systems, the lower the fidelity. In fact, the achievable fidelity of a quantum state decreases exponentially with the distance because of lossy quantum channels [27,63]. 5 In this context, the concept of entanglement purification [64,65] can be used to increase the fidelity of a single entangled state by using a number of noisy entangled states (as described in Reference [60]). However, this increases the number of required resources for transmitting each qubit over a quantum repeater (i.e., the number of entangled states). The second roadblock in achieving a quantum repeater following the scheme, for example, in References [60,61], is that quantum memory is required a technology that is not practically available as of today. The use of quantum repeaters is essentially based on the idea of creating "chains" of entangled photons using a technique called entanglement swapping. Concepts either with quantum memories [66] or without [67] have been developed. Different building blocks for matching the transfer of the wavelengths of these flying qubits to quantum memory have been practically demonstrated [68,69]. Internal loss and fidelity need to be improved to implement chains with one or more intermediate nodes working at higher rates. The first work to integrate future quantum repeaters in the overall infrastructure was recently published [70]. Each node in a QDK network therefore acts as a repeater and forwards packets or enanglement states of other nodes to enable quantum information sharing between QKD hosts.In theory, however, the application of entangled states and entanglement swapping is hindered by two main roadblocks. The first is that the greater the distance between two entangled systems, the lower the fidelity. In fact, the achievable fidelity of a quantum state decreases exponentially with the distance because of lossy quantum channels [27,63]. 5 In this context, the concept of entanglement purification [64,65] can be used to increase the fidelity of a single entangled state by using a number of noisy entangled states (as described in Reference [60]). However, this increases the number of required resources for transmitting each qubit over a quantum repeater (i.e., the number of entangled states). The second roadblock in achieving a quantum repeater following the scheme, for example, in References [60,61], is that quantum memory is required a technology that is not practically available as of today. The use of quantum repeaters is essentially based on the idea of creating "chains" of entangled photons using a technique called entanglement swapping. Concepts either with quantum memories [66] or without [67] have been developed. Different building blocks for matching the transfer of the wavelengths of these flying qubits to quantum memory have been practically demonstrated [68,69]. Internal loss and fidelity need to be improved to implement chains with one or more intermediate nodes working at higher rates. The first work to integrate future quantum repeaters in the overall infrastructure was recently published [70]. Each node in a QDK network therefore acts as a repeater and forwards packets or enanglement states of other nodes to enable quantum information sharing between QKD hosts.</p>
        <p>Although many hybrid realizations have been proposed, QKD networks can be grouped into two distinct categories: switched QKD networks and trusted repeater QKD networks.Although many hybrid realizations have been proposed, QKD networks can be grouped into two distinct categories: switched QKD networks and trusted repeater QKD networks.</p>
        <p>Switched QKD networks consist of nodes connected to a dedicated, fully optical network. This network contains a switching mechanism used to establish a direct optical point-to-point QKD connection between any two nodes in the QKD network. The limitations on distance in pointto-point QKD links restrict these networks to a metropolitan or regional scale [10]. Since every optical switch adds at least several dB of loss to the photonic path, optical switches can significantly reduce a network's range.Switched QKD networks consist of nodes connected to a dedicated, fully optical network. This network contains a switching mechanism used to establish a direct optical point-to-point QKD connection between any two nodes in the QKD network. The limitations on distance in pointto-point QKD links restrict these networks to a metropolitan or regional scale [10]. Since every optical switch adds at least several dB of loss to the photonic path, optical switches can significantly reduce a network's range.</p>
        <p>The main drawback of switched QKD networks is the requirement of dedicated optical infrastructure for quantum channels, which is often not economically feasible. By contrast, the major advantage of this class of networks is the reliance on an optical switch that allows establishing a connection between two nodes without the active participation of other network nodes (Figure 3(a)). Another drawback of switched QKD networks is the consistency of the applied QKD technique. Combining different QKD techniques such as free-space QKD and QKD over fiber is not possible, since no suitable devices that could perform this transformation in the path are available. The first switched all-pass QKD network was described in Reference [71]. Four nodes were connected through an optical switch, and each of the QKD terminals was designed as a transceiver so they could establish a QKD link to one of the other three simultaneously.The main drawback of switched QKD networks is the requirement of dedicated optical infrastructure for quantum channels, which is often not economically feasible. By contrast, the major advantage of this class of networks is the reliance on an optical switch that allows establishing a connection between two nodes without the active participation of other network nodes (Figure 3(a)). Another drawback of switched QKD networks is the consistency of the applied QKD technique. Combining different QKD techniques such as free-space QKD and QKD over fiber is not possible, since no suitable devices that could perform this transformation in the path are available. The first switched all-pass QKD network was described in Reference [71]. Four nodes were connected through an optical switch, and each of the QKD terminals was designed as a transceiver so they could establish a QKD link to one of the other three simultaneously.</p>
        <p>In trusted repeater QKD networks, the security of each node along the transmission path is essential for securely transmitting information (hence the name). Point-to-point communication between two nodes provides identical keys to the nodes and thus enables secure communication (Sections 5.1.5 and 5.2.2). Taking into account the lack of a quantum repeater, nodes are also responsible for routing and forwarding mechanisms (Figure 3(b)). Organizing a network in this manner is its greatest drawback, because the security of transfer depends on the security of all the nodes in the path. However, trusted repeater networks are not limited by distance or node numbers and can be made up of different QKD devices implementing different QKD technologies.In trusted repeater QKD networks, the security of each node along the transmission path is essential for securely transmitting information (hence the name). Point-to-point communication between two nodes provides identical keys to the nodes and thus enables secure communication (Sections 5.1.5 and 5.2.2). Taking into account the lack of a quantum repeater, nodes are also responsible for routing and forwarding mechanisms (Figure 3(b)). Organizing a network in this manner is its greatest drawback, because the security of transfer depends on the security of all the nodes in the path. However, trusted repeater networks are not limited by distance or node numbers and can be made up of different QKD devices implementing different QKD technologies.</p>
        <p>Since the quantum channels can be "given" to the eavesdropper without compromising the security of QKD, a rational adversary would rather target the weaker link, being the node. The usual assumption is letting the nodes be "invulnerable," which is the trusted repeater hypothesis. However, given that the optical device controls at some point will most likely have a conventional computer control logic, the security of the device is no better than the security of a classic computer running QKD algorithms and its physical protection.Since the quantum channels can be "given" to the eavesdropper without compromising the security of QKD, a rational adversary would rather target the weaker link, being the node. The usual assumption is letting the nodes be "invulnerable," which is the trusted repeater hypothesis. However, given that the optical device controls at some point will most likely have a conventional computer control logic, the security of the device is no better than the security of a classic computer running QKD algorithms and its physical protection.</p>
        <p>The admittedly strong assumption of fully trusted repeaters can be relaxed in at least three ways: (i) use measurement device independent (MDI) QKD, (ii) use quantum repeaters, and (iii) rely on multiple paths.The admittedly strong assumption of fully trusted repeaters can be relaxed in at least three ways: (i) use measurement device independent (MDI) QKD, (ii) use quantum repeaters, and (iii) rely on multiple paths.</p>
        <p>This first approach has been described by Reference [72] and adds the assumption of perfect state preparation achievable by communication parties, as well as adding a potentially unstrusted location to the quantum channel. Measurements using Bell states and formal arguments for "unconditional security" have been supported with experimental demonstrations [73,74]. Of course, the absence of the trusted repeater assumption in these proofs makes security much stronger than those assuming trusted repeater QKD. Note, however, that MDI QKD essentially prolongs the quantum channel but the two sender stations must still be situated in Trusted Repeater Nodes. This also holds true for the other alternatives outlined next (except possibly in the case when end-to-end quantum links could be established without intermediate Trusted Repeater Nodes).This first approach has been described by Reference [72] and adds the assumption of perfect state preparation achievable by communication parties, as well as adding a potentially unstrusted location to the quantum channel. Measurements using Bell states and formal arguments for "unconditional security" have been supported with experimental demonstrations [73,74]. Of course, the absence of the trusted repeater assumption in these proofs makes security much stronger than those assuming trusted repeater QKD. Note, however, that MDI QKD essentially prolongs the quantum channel but the two sender stations must still be situated in Trusted Repeater Nodes. This also holds true for the other alternatives outlined next (except possibly in the case when end-to-end quantum links could be established without intermediate Trusted Repeater Nodes).</p>
        <p>The concept of quantum repeaters was discussed above (see Section 3.2). While practical demonstrations have been presented [61,66,67], the spatial distances the technology can overcome (as of today) strongly depend on the amount of fidelity induced by the entanglement swapping and the degree to which it can be handled (Section 3.2).The concept of quantum repeaters was discussed above (see Section 3.2). While practical demonstrations have been presented [61,66,67], the spatial distances the technology can overcome (as of today) strongly depend on the amount of fidelity induced by the entanglement swapping and the degree to which it can be handled (Section 3.2).</p>
        <p>The third and most practical method today resorts to classic technology and employs multiple paths and threshold cryptographic techniques to mitigate the risk of eavesdropping. Roughly speaking, multipath transmission quantum networks trade trust in the repeaters for the assumption of the repeater being vulnerable to eavesdropping, the attacker being forced to intercept many of the intermediate devices to discover the message. Indeed, it can be shown that in absence of trusted repeaters, multiple paths are a theoretical necessity. At the same time, path redundancy also mitigates the issue of all QKD implementations being vulnerable to denial-of-service attacks (the adversary may passively eavesdrop not to get information, but to make the local quantum key stores run dry to enforce the endpoints to switch to conventional transmission techniques [75]). Advanced routing mechanisms can be put to use to bypass lines with detected eavesdroppers. Indeed, otherwise, attackers could try to break the security, employing passive eavesdropping to redirect traffic over vulnerable repeaters and thus get ahold of the secret key [76]. It can be shown [77,78] that "end-to-end security" without trusted repeaters in quantum networks (without quantum repeaters) can be restored only under weak assumptions of the attack resilience of nodes [79]. Furthermore, using the same techniques, simultaneous multi-level security against other attacks can be achieved along the same lines to an arbitrarily selected level of service quality [80]. The topology of a quantum network generally has a strong impact on achievable security, and despite theoretical and practical progress in the construction of quantum networks, even without trusted repeaters [33,36,54], the problem remains computationally (in fact, NP-) hard in its most general form [81]. Methods for foiling covert channels and malicious classical post-processing units have been discussed in Reference [82].The third and most practical method today resorts to classic technology and employs multiple paths and threshold cryptographic techniques to mitigate the risk of eavesdropping. Roughly speaking, multipath transmission quantum networks trade trust in the repeaters for the assumption of the repeater being vulnerable to eavesdropping, the attacker being forced to intercept many of the intermediate devices to discover the message. Indeed, it can be shown that in absence of trusted repeaters, multiple paths are a theoretical necessity. At the same time, path redundancy also mitigates the issue of all QKD implementations being vulnerable to denial-of-service attacks (the adversary may passively eavesdrop not to get information, but to make the local quantum key stores run dry to enforce the endpoints to switch to conventional transmission techniques [75]). Advanced routing mechanisms can be put to use to bypass lines with detected eavesdroppers. Indeed, otherwise, attackers could try to break the security, employing passive eavesdropping to redirect traffic over vulnerable repeaters and thus get ahold of the secret key [76]. It can be shown [77,78] that "end-to-end security" without trusted repeaters in quantum networks (without quantum repeaters) can be restored only under weak assumptions of the attack resilience of nodes [79]. Furthermore, using the same techniques, simultaneous multi-level security against other attacks can be achieved along the same lines to an arbitrarily selected level of service quality [80]. The topology of a quantum network generally has a strong impact on achievable security, and despite theoretical and practical progress in the construction of quantum networks, even without trusted repeaters [33,36,54], the problem remains computationally (in fact, NP-) hard in its most general form [81]. Methods for foiling covert channels and malicious classical post-processing units have been discussed in Reference [82].</p>
        <p>While the previously described QKD network types relate to the organization of quantum channels, the QKD overlay network type refers to public channel realization. The primary goal of the overlay network is achieving the higher hierarchy network with the aim of providing a better QoS and utilizing the resources of lower-level networks. In doing so, the overlay network aims to be independent of the defined paths from Internet Service Providers (ISP). Finding alternative routes that can provide a service with a higher degree of quality and quick rerouting in the case of interrupt detection or using multipath communications are key features of the overlay network approach. The use of multipath connections is an often suggested solution for improving network workloads through protecting against network failures, network load balancing, large bandwidth implementation, low-delay time selection, and more [83][84][85][86]. Studies have shown that at least four link-disjoint paths between large ISPs are present in 90% of point-of-presence pairs [87,88].While the previously described QKD network types relate to the organization of quantum channels, the QKD overlay network type refers to public channel realization. The primary goal of the overlay network is achieving the higher hierarchy network with the aim of providing a better QoS and utilizing the resources of lower-level networks. In doing so, the overlay network aims to be independent of the defined paths from Internet Service Providers (ISP). Finding alternative routes that can provide a service with a higher degree of quality and quick rerouting in the case of interrupt detection or using multipath communications are key features of the overlay network approach. The use of multipath connections is an often suggested solution for improving network workloads through protecting against network failures, network load balancing, large bandwidth implementation, low-delay time selection, and more [83][84][85][86]. Studies have shown that at least four link-disjoint paths between large ISPs are present in 90% of point-of-presence pairs [87,88].</p>
        <p>It is known that routing between network domains using external routing protocols such as Border Gateway Protocol (BGP) results in slow response and recovery from network outages. Due to the time required to obtain information about interruptions or congestion on network links and the BGP minimum route advertisement interval timer settings, which is usually within minutes, the time needed to obtain a consistent view of the network after a link outage can reach tens of minutes, which is a long period for network applications. BGP also propagates only one route, and detecting the alternative route network nodes need in different situations is difficult [89].It is known that routing between network domains using external routing protocols such as Border Gateway Protocol (BGP) results in slow response and recovery from network outages. Due to the time required to obtain information about interruptions or congestion on network links and the BGP minimum route advertisement interval timer settings, which is usually within minutes, the time needed to obtain a consistent view of the network after a link outage can reach tens of minutes, which is a long period for network applications. BGP also propagates only one route, and detecting the alternative route network nodes need in different situations is difficult [89].</p>
        <p>The overlay network can help overcome these challenges by establishing the network with a peer-to-peer approach. The overlay network connects nodes in different domains and allows the use of alternative paths by encapsulating traffic to the traffic in the lower network. When an intermediate node in the path received the packet, the node will unpack the packet, analyze the IP address of the recipient, re-encapsulate packet again, and forward it further to network nodes that may be in other domains. Simply, it is a hop-by-hop approach popularly applied in QKD networking (Figure 4). Considering the encapsulation principle, overlay nodes independently perform link state measurements and can respond more quickly to link congestion by redirecting traffic to other less-congested links. Overlay networks can offer new functionality that is difficult to perform in lower-layer networks. The overlay QKD approach is attractive, since it can be used to bypass "untrusted" nodes and perform quick rerouting when trust in nodes is no longer valid or multipath communication is required [28,33].The overlay network can help overcome these challenges by establishing the network with a peer-to-peer approach. The overlay network connects nodes in different domains and allows the use of alternative paths by encapsulating traffic to the traffic in the lower network. When an intermediate node in the path received the packet, the node will unpack the packet, analyze the IP address of the recipient, re-encapsulate packet again, and forward it further to network nodes that may be in other domains. Simply, it is a hop-by-hop approach popularly applied in QKD networking (Figure 4). Considering the encapsulation principle, overlay nodes independently perform link state measurements and can respond more quickly to link congestion by redirecting traffic to other less-congested links. Overlay networks can offer new functionality that is difficult to perform in lower-layer networks. The overlay QKD approach is attractive, since it can be used to bypass "untrusted" nodes and perform quick rerouting when trust in nodes is no longer valid or multipath communication is required [28,33].</p>
        <p>This section briefly discusses some previously deployed QKD networks. Since much of the literature deals with quantum optical infrastructure, the focus is placed on the logical structure of networks and topology, key storage and management solutions, key usage, and the solution's performance.This section briefly discusses some previously deployed QKD networks. Since much of the literature deals with quantum optical infrastructure, the focus is placed on the logical structure of networks and topology, key storage and management solutions, key usage, and the solution's performance.</p>
        <p>The world's first QKD network was the DARPA QKD Network, presented in December 2002 by BBN Technologies and Harvard and Boston Universities [14]. Initially, the network consisted of a weak-coherent BB84 transmitter pair (Anna and Alice), a pair of compatible receivers (Boris and Bob) and one 2×2 optical switch that could connect any sender to any receiver (Figure 5). Later, the network was extended with two free space QKD links, and the third planned free space link from QinetiQ (UK) was not explained in any official project documentation. The DARPA QKD network combined two previously explained types in a hybrid solution. The DARPA QKD network laid the foundation for the further development of trusted repeater QKD networks, but it also demonstrated practically the disadvantages of a switched QKD network type.The world's first QKD network was the DARPA QKD Network, presented in December 2002 by BBN Technologies and Harvard and Boston Universities [14]. Initially, the network consisted of a weak-coherent BB84 transmitter pair (Anna and Alice), a pair of compatible receivers (Boris and Bob) and one 2×2 optical switch that could connect any sender to any receiver (Figure 5). Later, the network was extended with two free space QKD links, and the third planned free space link from QinetiQ (UK) was not explained in any official project documentation. The DARPA QKD network combined two previously explained types in a hybrid solution. The DARPA QKD network laid the foundation for the further development of trusted repeater QKD networks, but it also demonstrated practically the disadvantages of a switched QKD network type.</p>
        <p>Two nodes (Alice and Bob) and a switch were located at BBN, while Anna and Boris were located at Harvard and Boston Universities (BU), respectively. BBN designed its own 2×2 optical switch and used it to connect Anna, Alice, Bob, and Boris. This switch was optically passive and therefore did not disturb the quantum state of photons. The switch was constructed by modifying a standard telecommunications facility switch. It operates by moving reflective elements that change the internal light path to produce either a BAR or CROSS connection. It is controlled through a direct line from Alice's optical process computer (OPC) by applying a TTL-level pulse to either the BAR or CROSS pin for 20 ms to switch the activated position. According to Reference [29], switching time was 8 ms and optical loss was less than 1 dB. A previously performed set of experiments presented results that measured degradation in the phase-modulated QDK incurred by optical switches [90]. A demonstration of QKD transmission and the results of insertion loss, which was the principal effect on QKD throughput in three different types of optical switches, yielded the following: 2×1 optical-mechanical switch (4.7 dB loss), 2×2 LiNbO 3 switch (5.4 dB loss) and four-port MEMS switch (5.3 to 5.9 dB of loss).Two nodes (Alice and Bob) and a switch were located at BBN, while Anna and Boris were located at Harvard and Boston Universities (BU), respectively. BBN designed its own 2×2 optical switch and used it to connect Anna, Alice, Bob, and Boris. This switch was optically passive and therefore did not disturb the quantum state of photons. The switch was constructed by modifying a standard telecommunications facility switch. It operates by moving reflective elements that change the internal light path to produce either a BAR or CROSS connection. It is controlled through a direct line from Alice's optical process computer (OPC) by applying a TTL-level pulse to either the BAR or CROSS pin for 20 ms to switch the activated position. According to Reference [29], switching time was 8 ms and optical loss was less than 1 dB. A previously performed set of experiments presented results that measured degradation in the phase-modulated QDK incurred by optical switches [90]. A demonstration of QKD transmission and the results of insertion loss, which was the principal effect on QKD throughput in three different types of optical switches, yielded the following: 2×1 optical-mechanical switch (4.7 dB loss), 2×2 LiNbO 3 switch (5.4 dB loss) and four-port MEMS switch (5.3 to 5.9 dB of loss).</p>
        <p>Considering that the DARPA QKD network was the first QKD network, no predefined protocols could be used for QKD communication over the public channel. BBN therefore developed its own QKD protocol stack in C programming language. All messages were packed in IP datagrams to convey the control messages through the Internet [91].Considering that the DARPA QKD network was the first QKD network, no predefined protocols could be used for QKD communication over the public channel. BBN therefore developed its own QKD protocol stack in C programming language. All messages were packed in IP datagrams to convey the control messages through the Internet [91].</p>
        <p>Table 1 presents only the list of technologies used, while interested readers may refer to References [29,92]. It can be seen that several techniques were used for different post-processing stages. The aim was to minimize the number of messages exchanged to speed up the key generation rate and reduce congestion caused by the sudden transfer of a large number of packets over a public channel. datagram contains a packet header with details of the permitted, reliable, in-order transmission of the message, crash detection, and so on.Table 1 presents only the list of technologies used, while interested readers may refer to References [29,92]. It can be seen that several techniques were used for different post-processing stages. The aim was to minimize the number of messages exchanged to speed up the key generation rate and reduce congestion caused by the sudden transfer of a large number of packets over a public channel. datagram contains a packet header with details of the permitted, reliable, in-order transmission of the message, crash detection, and so on.</p>
        <p>The datagram is filled with one or more messages of variable length, carrying the details needed to describe commands or a response to an action. It is important to emphasize that these datagrams are protected by an IPSec security mechanism in standard mode.The datagram is filled with one or more messages of variable length, carrying the details needed to describe commands or a response to an action. It is important to emphasize that these datagrams are protected by an IPSec security mechanism in standard mode.</p>
        <p>The aim was to create a secure tunnel between Quantum Protocol Daemons so all traffic over the public channel was encrypted, authenticated, and integrity-checked. An example of messages exchanged by BBN's QKD Protocol is shown in Figure 6(b).The aim was to create a secure tunnel between Quantum Protocol Daemons so all traffic over the public channel was encrypted, authenticated, and integrity-checked. An example of messages exchanged by BBN's QKD Protocol is shown in Figure 6(b).</p>
        <p>In the final technical DARPA report [29], details for the originally planned and used technologies are given. It is interesting to note that the authors assumed the Diffie-Hellman (DF) key agreement primitive would be broken by 2015. Since the average key rate of a QKD device was 1 kbps, the goal was to introduce QKD as a new key agreement solution and integrate it with existing IPSec and IKE (Internet Key Exchange) key management protocols. Later, when the key rate of QKD devices increased, IKE could be abandoned and the use of OTP forced, which would lead to a highly secure network architecture.In the final technical DARPA report [29], details for the originally planned and used technologies are given. It is interesting to note that the authors assumed the Diffie-Hellman (DF) key agreement primitive would be broken by 2015. Since the average key rate of a QKD device was 1 kbps, the goal was to introduce QKD as a new key agreement solution and integrate it with existing IPSec and IKE (Internet Key Exchange) key management protocols. Later, when the key rate of QKD devices increased, IKE could be abandoned and the use of OTP forced, which would lead to a highly secure network architecture.</p>
        <p>The authors proposed the use of a QKD network between sensitive areas only, in which the QKD endpoints would be used to further distribute obtained information into private networks (enclaves). The QKD endpoints would have had the same function as border routers in standard IP networks. Connecting the end-user directly to the QKD network was never planned. The main idea was to create a storage "reservoir" at both ends of the corresponding QKD link that would be gradually filled with key material established through QKD. This keying material would later be used with an IPSec protocol suite and employed to encrypt virtual private network (VPN) tunnels. When the traffic was received by the corresponding endpoint at the receiving end of the VPN tunnel, it would be forwarded to a final user located in the private network (enclave).The authors proposed the use of a QKD network between sensitive areas only, in which the QKD endpoints would be used to further distribute obtained information into private networks (enclaves). The QKD endpoints would have had the same function as border routers in standard IP networks. Connecting the end-user directly to the QKD network was never planned. The main idea was to create a storage "reservoir" at both ends of the corresponding QKD link that would be gradually filled with key material established through QKD. This keying material would later be used with an IPSec protocol suite and employed to encrypt virtual private network (VPN) tunnels. When the traffic was received by the corresponding endpoint at the receiving end of the VPN tunnel, it would be forwarded to a final user located in the private network (enclave).</p>
        <p>To simplify the process but also use the software of different platforms and manufacturers, the QKD endpoint was separated into two distinct computers. The first computer, called Optical Process Control (OPC), used the 
            <rs type="software">LabView</rs> software to control associated QKD equipment, while the other computer was used for IPSec communication, routing, network protocols, and QKD protocols (sifting, privacy amplification, etc.). These two computers used local 100 Mbps Ethernet connections. For synchronous data exchange, a specialized set of BBN-supplied UDP6 protocols was used.
        </p>
        <p>Another important issue was synchronization between these computers and synchronization between QKD and the VPN protocol suite. More precisely, solving the management of key material produced by optical devices was necessary. The procedure was as follows:Another important issue was synchronization between these computers and synchronization between QKD and the VPN protocol suite. More precisely, solving the management of key material produced by optical devices was necessary. The procedure was as follows:</p>
        <p>(1) The OPC computer delivers a fixed-size raw Qframe block of symbols transmitted through optical devices. It contains an indication of the bases that were used to encode the information in photons. These Qframe blocks are further processed by a QKD 
            <rs type="software">daemon</rs> with the QKD post-processing suite (sifting, QBER, privacy amplification, or similar), producing a Qblock as output. (2) A Qblock is a fixed-size block of shared bits, each Qblock having its own 16-bit Qblock identifier (ID). Qblocks are stored in a storage reservoir of key material at both ends. These blocks are stored continuously, regardless of consumption. (3) The IKE 
            <rs type="software">daemon</rs> uses Qblock IDs to establish a final key, which is then used by IPSec, since both ends have the same key material stored in their respective storage reservoirs.
        </p>
        <p>Internet Protocol Security (IPSec) is a protocol suite for the purpose of ensuring the integrity, authenticity, and confidentiality of connections over the public internet. IPSec operates at the Internet Protocol (IP) layer and as a perimeter between protected and unprotected network interfaces by requiring a protection level. By default, IPSec uses the Internet Key Exchange (IKE) method for automatic keying. The basic concept of IKE protocol is simple and takes place in two phases. The first phase establishes an authenticated, bi-directional, secure link (the Internet Security Association) and the Key Management Protocol (ISAKMP) SA by exchanging random nonce and half-keys for the Diffie-Hellman key exchange. Authentication of a Phase 1 channel is performed by exchanging messages encrypted with a session key. Random secret bits from Phase 1 that are used to establish ISAKMP are conventionally termed SKEYID. These bits are considered the most sensitive point in IKE points, since they are used as a partial input for creating Phase 2 SA keys and for protecting traffic through a given Phase 2 SA. Replacing these bits from time to time in order not to compromise the system's security is therefore important.Internet Protocol Security (IPSec) is a protocol suite for the purpose of ensuring the integrity, authenticity, and confidentiality of connections over the public internet. IPSec operates at the Internet Protocol (IP) layer and as a perimeter between protected and unprotected network interfaces by requiring a protection level. By default, IPSec uses the Internet Key Exchange (IKE) method for automatic keying. The basic concept of IKE protocol is simple and takes place in two phases. The first phase establishes an authenticated, bi-directional, secure link (the Internet Security Association) and the Key Management Protocol (ISAKMP) SA by exchanging random nonce and half-keys for the Diffie-Hellman key exchange. Authentication of a Phase 1 channel is performed by exchanging messages encrypted with a session key. Random secret bits from Phase 1 that are used to establish ISAKMP are conventionally termed SKEYID. These bits are considered the most sensitive point in IKE points, since they are used as a partial input for creating Phase 2 SA keys and for protecting traffic through a given Phase 2 SA. Replacing these bits from time to time in order not to compromise the system's security is therefore important.</p>
        <p>The second phase uses SKEYID bits to negotiate the IPSec SAs between two gateways that carry message traffic for a certain VPN traffic flow. Each IKE security association has a maximum lifetime that limits the use of key material for the previously established association. These limitations can be defined in time (seconds) or in encrypted data (kilobytes) and are stored in SPD entry for a given SA. After the lifetime expires, a new SA must be negotiated with fresh key material. It is important to note that there is no standard for using OTP with IPSec. Various solutions have therefore been proposed, such as References [14,48,97].The second phase uses SKEYID bits to negotiate the IPSec SAs between two gateways that carry message traffic for a certain VPN traffic flow. Each IKE security association has a maximum lifetime that limits the use of key material for the previously established association. These limitations can be defined in time (seconds) or in encrypted data (kilobytes) and are stored in SPD entry for a given SA. After the lifetime expires, a new SA must be negotiated with fresh key material. It is important to note that there is no standard for using OTP with IPSec. Various solutions have therefore been proposed, such as References [14,48,97].</p>
        <p>The DARPA QKD Network employed IKE because at the time of its development (January 2002), IKE was the most widely deployed internet key agreement protocol. Two extensions exist that depend on a later-used type of cipher:The DARPA QKD Network employed IKE because at the time of its development (January 2002), IKE was the most widely deployed internet key agreement protocol. Two extensions exist that depend on a later-used type of cipher:</p>
        <p>• The Quantum Perfect Forward Secrecy (QPFS) extension, which is based on the use of QKD techniques, for agreeing on secret keys employed as seeds for conventional symmetric ciphers such as AES or 3DES. Since the security of these symmetrical ciphers may be compromised in the following years, continual and automatic reseeding with fresh QKD bits is advisable. In the DARPA QKD network, AES keys were refreshed about once per minute [15] 96:14 M. Mehic et al.• The Quantum Perfect Forward Secrecy (QPFS) extension, which is based on the use of QKD techniques, for agreeing on secret keys employed as seeds for conventional symmetric ciphers such as AES or 3DES. Since the security of these symmetrical ciphers may be compromised in the following years, continual and automatic reseeding with fresh QKD bits is advisable. In the DARPA QKD network, AES keys were refreshed about once per minute [15] 96:14 M. Mehic et al.</p>
        <p>by omitting the Phase 1 negotiation and using QKD bits as a direct input to the IKE Phase 2. This solution increased the security of IPSec associations, since the keys were derived from QKD instead of the Diffie-Hellman (DH) key exchange. • An extension based on the use of QKD techniques for agreeing on secret key bits used with a one-time pad (OTP) cipher. This solution lowers the data rate to the QKD key rate, since the key material in the storage reservoir is charged only by QKD.by omitting the Phase 1 negotiation and using QKD bits as a direct input to the IKE Phase 2. This solution increased the security of IPSec associations, since the keys were derived from QKD instead of the Diffie-Hellman (DH) key exchange. • An extension based on the use of QKD techniques for agreeing on secret key bits used with a one-time pad (OTP) cipher. This solution lowers the data rate to the QKD key rate, since the key material in the storage reservoir is charged only by QKD.</p>
        <p>To implement the listed extensions, the DARPA QKD network team extended the IKE Phase 2 by adding an option to the QPFS extension that works in the same structural manner as a regular IKE Phase 2 PFS but uses QKD bits rather than bits obtained from the DH key exchange. The solution was implemented in 
            <rs type="software">NetBSD</rs> with the "raccoon" IKE daemon. The modifications included policy mechanisms to specify when and which extension should be used, with the possibility to specify values (re-key rates, cryptographic algorithms, keys, etc.) for each VPN gateway.
        </p>
        <p>A routing mechanism is required in situations when two nodes do not have a direct point-to-point QKD link between them and therefore need to agree on a path through a trusted repeater network.A routing mechanism is required in situations when two nodes do not have a direct point-to-point QKD link between them and therefore need to agree on a path through a trusted repeater network.</p>
        <p>Each node has a database of the full link state of the network. For each network node, it keeps the node's ID and a list of neighboring nodes. DARPA modified well-known Open Shortest Path First (OSPF) routing protocol [98] to use the specific QKD networks metric [92]. The idea is that each node exchanges a certain number of bits with its neighboring node, thereby measuring the rate of exchange and the total number of bits exchanged (measuring the quality of the connection) [99]. Link quality is calculated using link metric m and stored in the database of the corresponding node:Each node has a database of the full link state of the network. For each network node, it keeps the node's ID and a list of neighboring nodes. DARPA modified well-known Open Shortest Path First (OSPF) routing protocol [98] to use the specific QKD networks metric [92]. The idea is that each node exchanges a certain number of bits with its neighboring node, thereby measuring the rate of exchange and the total number of bits exchanged (measuring the quality of the connection) [99]. Link quality is calculated using link metric m and stored in the database of the corresponding node:</p>
        <p>where q denotes the number of Qblocks expected to be available on the link in one Link State Announcement (LSA) update interval, m is the link metric, and t is the threshold (default value 5) for a minimum number of Qblocks to be maintained on an active link.where q denotes the number of Qblocks expected to be available on the link in one Link State Announcement (LSA) update interval, m is the link metric, and t is the threshold (default value 5) for a minimum number of Qblocks to be maintained on an active link.</p>
        <p>Later, when a route between distant nodes is requested, the route with the smallest total metric is selected. For the purposes of finding this path, Dijkstra's algorithm is used. To refresh the records in link-state databases, periodic messages ROUT1_LSA are exchanged [29]. These messages carry the node ID of the sending node, the node ID of the neighboring node, and the corresponding 32-bit link metric. ROUT1_LSA messages are exchanged at every LSA update interval, which is a configurable parameter set to one minute by default. Each node has an individual LSA timer that does not depend on other nodes in the network.Later, when a route between distant nodes is requested, the route with the smallest total metric is selected. For the purposes of finding this path, Dijkstra's algorithm is used. To refresh the records in link-state databases, periodic messages ROUT1_LSA are exchanged [29]. These messages carry the node ID of the sending node, the node ID of the neighboring node, and the corresponding 32-bit link metric. ROUT1_LSA messages are exchanged at every LSA update interval, which is a configurable parameter set to one minute by default. Each node has an individual LSA timer that does not depend on other nodes in the network.</p>
        <p>However, it is evident that described modification of OSPFv2 protocol does not take into account the parameters of the public link. The metric m defined in Equation ( 1) only examines the amount of available key material, without considering other parameters such as link load or delay [99]. Routing protocols are discussed further in Section 6.However, it is evident that described modification of OSPFv2 protocol does not take into account the parameters of the public link. The metric m defined in Equation ( 1) only examines the amount of available key material, without considering other parameters such as link load or delay [99]. Routing protocols are discussed further in Section 6.</p>
        <p>As noted above, a QKD network is used to overcome the limitations of the length of the QKD link. The DARPA QKD network laid the foundation for the Key Repeater Protocol and represents the first implementation of a Trusted Repeater QKD network. This implementation will be explained briefly here. More details can be found in Reference [29].As noted above, a QKD network is used to overcome the limitations of the length of the QKD link. The DARPA QKD network laid the foundation for the Key Repeater Protocol and represents the first implementation of a Trusted Repeater QKD network. This implementation will be explained briefly here. More details can be found in Reference [29].</p>
        <p>When two distant nodes in the QKD network (i.e., node A and node D) want to establish secure communication and no direct point-to-point link exists between them, they need to agree on a path through the network. This path is calculated with a routing protocol, and the nodes use a Quantum Key Distribution: A Networking Perspective 96:15 7400 bps QKD protocol used BB84 Key references [14,29,92] Key Repeater strategy to establish key material. The source node is always the node with the higher node ID. The source node (node A in Figure 7 From the above, it is obvious that BBN's Key Repeater method of establishing key material takes time and requires the absolute trust of each node involved in communication. Authentication techniques therefore have a special significance in the entire process. As already discussed, the most effective way to circumvent compromised nodes is to use multiple independent paths.When two distant nodes in the QKD network (i.e., node A and node D) want to establish secure communication and no direct point-to-point link exists between them, they need to agree on a path through the network. This path is calculated with a routing protocol, and the nodes use a Quantum Key Distribution: A Networking Perspective 96:15 7400 bps QKD protocol used BB84 Key references [14,29,92] Key Repeater strategy to establish key material. The source node is always the node with the higher node ID. The source node (node A in Figure 7 From the above, it is obvious that BBN's Key Repeater method of establishing key material takes time and requires the absolute trust of each node involved in communication. Authentication techniques therefore have a special significance in the entire process. As already discussed, the most effective way to circumvent compromised nodes is to use multiple independent paths.</p>
        <p>The DARPA network was the first network to demonstrate QKD networking. The performance achieved by this network (maximum distance of 29 km via the optical switch between Harvard and Boston Universities [91] and maximum key rate of 400 bps) is considered the basis for further QKD deployment. The system involved trusted repeater and switched QKD networking, demonstrating the advantages and disadvantages of both methods. A brief summary of the DARPA QKD network is given in Table 2.The DARPA network was the first network to demonstrate QKD networking. The performance achieved by this network (maximum distance of 29 km via the optical switch between Harvard and Boston Universities [91] and maximum key rate of 400 bps) is considered the basis for further QKD deployment. The system involved trusted repeater and switched QKD networking, demonstrating the advantages and disadvantages of both methods. A brief summary of the DARPA QKD network is given in Table 2.</p>
        <p>However, the DARPA network was shut down in 2006, and no other field deployments by US government agencies have been reported since. In 2017, the Quantum National Initiative was announced, fueled by China's successful launch of the "Micius" satellite [100,101]. In 2018, the startup company Quantum Xchange announced plans for the first commercial quantum communication network "Phio" in the USA [102,103]. Using its own exclusive trusted nodes, Quantum Xchange provides secure key transmission over long distances. This QKD network operates in Washington, D.C., and New York City, including the link connecting financial markets on Wall Street with data centers in New Jersey [104]. To achieve double network capacity, collaboration with Toshiba was announced [105].However, the DARPA network was shut down in 2006, and no other field deployments by US government agencies have been reported since. In 2017, the Quantum National Initiative was announced, fueled by China's successful launch of the "Micius" satellite [100,101]. In 2018, the startup company Quantum Xchange announced plans for the first commercial quantum communication network "Phio" in the USA [102,103]. Using its own exclusive trusted nodes, Quantum Xchange provides secure key transmission over long distances. This QKD network operates in Washington, D.C., and New York City, including the link connecting financial markets on Wall Street with data centers in New Jersey [104]. To achieve double network capacity, collaboration with Toshiba was announced [105].</p>
        <p>In 2004, the European Commission's (EC) integrated FP6 Project SECOQC (Secure Communication based on Quantum Cryptography) brought together 41 research and industrial partners from 11 European Union countries, Russia, and Switzerland. The main aim of the SECOQC project was to firmly define the practical application of QKD technologies and systematically treat the issue of QKD networks, including their security, design and architecture, communications protocols, implementation, demonstration, and test operation of QKD network protocols.In 2004, the European Commission's (EC) integrated FP6 Project SECOQC (Secure Communication based on Quantum Cryptography) brought together 41 research and industrial partners from 11 European Union countries, Russia, and Switzerland. The main aim of the SECOQC project was to firmly define the practical application of QKD technologies and systematically treat the issue of QKD networks, including their security, design and architecture, communications protocols, implementation, demonstration, and test operation of QKD network protocols.</p>
        <p>The SECOQC approach was to define QKD networks as infrastructure based on point-to-point QKD capabilities that aimed for ITS key agreement and secure communication [106]. Taking into account that the first results of the DARPA QKD network were available [92], SECOQC decided to further improve the trusted repeater QKD network type. The "Quantum Backbone" QBB network of metropolitan distance (6-85 km) consisting of seven fiber-bound key distribution links plus one short distance free-space link was deployed for testing purposes in Vienna [57]. Five nodes-SIE, BRT, GUD, FRM, and ERD-were located at the Siemens premises, and the STP node was hosted by a repeater station near St. Pölten on the communications line from Vienna to Munich, Germany.The SECOQC approach was to define QKD networks as infrastructure based on point-to-point QKD capabilities that aimed for ITS key agreement and secure communication [106]. Taking into account that the first results of the DARPA QKD network were available [92], SECOQC decided to further improve the trusted repeater QKD network type. The "Quantum Backbone" QBB network of metropolitan distance (6-85 km) consisting of seven fiber-bound key distribution links plus one short distance free-space link was deployed for testing purposes in Vienna [57]. Five nodes-SIE, BRT, GUD, FRM, and ERD-were located at the Siemens premises, and the STP node was hosted by a repeater station near St. Pölten on the communications line from Vienna to Munich, Germany.</p>
        <p>As shown in Figure 8, SECOQC integrated eight links belonging to six different systems:As shown in Figure 8, SECOQC integrated eight links belonging to six different systems:</p>
        <p>• Attenuated Laser Pulse -a modified, commercially available "Cerberis" solution implemented by Swiss company idQuantique. • One-way Weak Coherent Pulse system with decoy states -implemented by Toshiba UK.• Attenuated Laser Pulse -a modified, commercially available "Cerberis" solution implemented by Swiss company idQuantique. • One-way Weak Coherent Pulse system with decoy states -implemented by Toshiba UK.</p>
        <p>• Coherent-One-Way -implemented by the N. Gisin's team at GAP, University of Geneva.• Coherent-One-Way -implemented by the N. Gisin's team at GAP, University of Geneva.</p>
        <p>• Entangled photons -provided by the Austrian Research Centers (ARC) and Royal Institute of Technology of Kista KTH, Sweden. • Continuous Variables -implemented by the CNRS-Thales-ULB consortium from France/ Belgium. • Free Space link -developed by Ludwig Maximilian University of Munich, Germany.• Entangled photons -provided by the Austrian Research Centers (ARC) and Royal Institute of Technology of Kista KTH, Sweden. • Continuous Variables -implemented by the CNRS-Thales-ULB consortium from France/ Belgium. • Free Space link -developed by Ludwig Maximilian University of Munich, Germany.</p>
        <p>All of these systems had to comply with the following requirements:All of these systems had to comply with the following requirements:</p>
        <p>• A key rate greater than 1 kbps over 25 km of fibers (6 dB loss with a fiber attenuation of approximately 0.25 dB/km over standard telecommunications fiber). • Autonomously deliver the key for more than six months without human interaction.• A key rate greater than 1 kbps over 25 km of fibers (6 dB loss with a fiber attenuation of approximately 0.25 dB/km over standard telecommunications fiber). • Autonomously deliver the key for more than six months without human interaction.</p>
        <p>Quantum Key Distribution: A Networking Perspective 96:17Quantum Key Distribution: A Networking Perspective 96:17</p>
        <p>• A latency time of one minute for a new start-up. 8• All equipment used must fit into a standard 19" telecommunications rack.• A latency time of one minute for a new start-up. 8• All equipment used must fit into a standard 19" telecommunications rack.</p>
        <p>• Each QKD-device must communicate with its peer over a standard interface provided by the node module controlling the share management commands.• Each QKD-device must communicate with its peer over a standard interface provided by the node module controlling the share management commands.</p>
        <p>SECOQC network included several different QKD solutions:SECOQC network included several different QKD solutions:</p>
        <p>• The free space QKD system employed the BB84 protocol with decoy states, which resulted in a secure key rate of up to 17 kbps over 80 m between the ERD and FRM nodes. • The idQuantique QKD system implemented the BB84 and SARG04 protocols using a commercial Cerberis system, which resulted in an almost equal value prescribed by the SECOQC criteria (1 kbps). • Toshiba Research Europe Ltd (TREL) implemented a weak coherent pulse (WCP) decoy state plus vacuum state BB84 protocol and obtained a 5.7 kbps key rate over a fiber length of 25 km. • A coherent One-Way (COW) System designed by GAP (Group of Applied Physics at the University of Geneva) achieved a novel distributed phase reference COW protocol, which can be seen as a BB84 modification with phase relations between pulses [28]. • The entanglement-based QKD (ENT) developed by an Austrian-Swedish consortium implemented BBM92 for entangled states between the ERD and SIE nodes over a 16-km fiber and provided a reliable key rate of over 2 kbps. • The Continuous-Variable (CV) system was developed in cooperation between Charles Fabry de l'Institut d'Optique, THALES Research &amp; Technology France and University Libre de Bruxelles. Their system achieved a distribution rate of 8 kbps over a 6.2-km standard optical fiber (attenuation of the fiber was approximately 2.8 dB, while the length of an equivalent fiber with a loss of 0.2 dB/km would be 14 km).• The free space QKD system employed the BB84 protocol with decoy states, which resulted in a secure key rate of up to 17 kbps over 80 m between the ERD and FRM nodes. • The idQuantique QKD system implemented the BB84 and SARG04 protocols using a commercial Cerberis system, which resulted in an almost equal value prescribed by the SECOQC criteria (1 kbps). • Toshiba Research Europe Ltd (TREL) implemented a weak coherent pulse (WCP) decoy state plus vacuum state BB84 protocol and obtained a 5.7 kbps key rate over a fiber length of 25 km. • A coherent One-Way (COW) System designed by GAP (Group of Applied Physics at the University of Geneva) achieved a novel distributed phase reference COW protocol, which can be seen as a BB84 modification with phase relations between pulses [28]. • The entanglement-based QKD (ENT) developed by an Austrian-Swedish consortium implemented BBM92 for entangled states between the ERD and SIE nodes over a 16-km fiber and provided a reliable key rate of over 2 kbps. • The Continuous-Variable (CV) system was developed in cooperation between Charles Fabry de l'Institut d'Optique, THALES Research &amp; Technology France and University Libre de Bruxelles. Their system achieved a distribution rate of 8 kbps over a 6.2-km standard optical fiber (attenuation of the fiber was approximately 2.8 dB, while the length of an equivalent fiber with a loss of 0.2 dB/km would be 14 km).</p>
        <p>SECOQC nodes followed the DARPA approach of storing key material in storage reservoirs. Considering that the QKD links between nodes must be achieved in a point-to-point manner, a node needs to possess a dedicated QKD device for each connection to other nodes. Key material from QKD devices is first deployed in Pickup Stores. This temporary storage keeps the key material until it is confirmed that the same material is found in both QKD nodes forming the corresponding QKD link. After successfully confirming the existence of the same key material at both ends, the key material is then forwarded to a Common Store. There is only a single Common Store for the Q3P link (which can contain one or more QKD links between two nodes), and key material in this storage is uniquely identified by the key material block. When use of the key material is requested, keys are forwarded to In or Out key buffers and used for encryption or decryption purposes by a Crypto Engine. Organizing key storage in a described manner, QKD nodes can tolerate fluctuations in key consumption by buffering the generated key material. More details about Key Store organization can be found in References [28,106].SECOQC nodes followed the DARPA approach of storing key material in storage reservoirs. Considering that the QKD links between nodes must be achieved in a point-to-point manner, a node needs to possess a dedicated QKD device for each connection to other nodes. Key material from QKD devices is first deployed in Pickup Stores. This temporary storage keeps the key material until it is confirmed that the same material is found in both QKD nodes forming the corresponding QKD link. After successfully confirming the existence of the same key material at both ends, the key material is then forwarded to a Common Store. There is only a single Common Store for the Q3P link (which can contain one or more QKD links between two nodes), and key material in this storage is uniquely identified by the key material block. When use of the key material is requested, keys are forwarded to In or Out key buffers and used for encryption or decryption purposes by a Crypto Engine. Organizing key storage in a described manner, QKD nodes can tolerate fluctuations in key consumption by buffering the generated key material. More details about Key Store organization can be found in References [28,106].</p>
        <p>The SECOQC network has laid bare the basics of the hop-by-hop approach to QKD network communication. This mode is known as the "Store &amp; Forward" technique and implies the use of a separate key for each link in the path. As shown in Figure 9, each node decrypts the message, verifies the authentication tag, and re-encrypts the message using a key that matches the connection to the next node. The procedure is repeated in each node on the path until the message reaches its destination [106].The SECOQC network has laid bare the basics of the hop-by-hop approach to QKD network communication. This mode is known as the "Store &amp; Forward" technique and implies the use of a separate key for each link in the path. As shown in Figure 9, each node decrypts the message, verifies the authentication tag, and re-encrypts the message using a key that matches the connection to the next node. The procedure is repeated in each node on the path until the message reaches its destination [106].</p>
        <p>Routing in the SECOQC QKD Network. SECOQC suggested using an IPv4 address structure and geographical division of the QKD network in multiple routing areas for the following reasons:Routing in the SECOQC QKD Network. SECOQC suggested using an IPv4 address structure and geographical division of the QKD network in multiple routing areas for the following reasons:</p>
        <p>• A QKD network is a private network that has the freedom to use any available area of IPv4 address space. • Expecting a rapid and extensive spread of the QKD network is not reasonable. IPv4 address space should therefore be enough to address current and future nodes. • The distance limitations of QKD links do not allow the QKD network to be divided between the backbone and an arbitrary number of autonomous systems. Treating all nodes in the network equally is therefore necessary. • The current lack of quantum repeaters means QKD nodes must be seen as an access point for end-user applications, not just as forwarding nodes in the network.• A QKD network is a private network that has the freedom to use any available area of IPv4 address space. • Expecting a rapid and extensive spread of the QKD network is not reasonable. IPv4 address space should therefore be enough to address current and future nodes. • The distance limitations of QKD links do not allow the QKD network to be divided between the backbone and an arbitrary number of autonomous systems. Treating all nodes in the network equally is therefore necessary. • The current lack of quantum repeaters means QKD nodes must be seen as an access point for end-user applications, not just as forwarding nodes in the network.</p>
        <p>To meet the requirements for addressing and routing, SECOQC proposed forming a node with the following components:To meet the requirements for addressing and routing, SECOQC proposed forming a node with the following components:</p>
        <p>• Q3P modules responsible for link-level communication with other nodes.• Q3P modules responsible for link-level communication with other nodes.</p>
        <p>• A routing module to collect and maintain routing tables.• A routing module to collect and maintain routing tables.</p>
        <p>• A forwarding module to create paths and make forwarding decisions.• A forwarding module to create paths and make forwarding decisions.</p>
        <p>• Other modules for node management, random session key generation, security monitoring, and so on.• Other modules for node management, random session key generation, security monitoring, and so on.</p>
        <p>The function of a routing module is to maintain a local table of routing information and inform other nodes about updates in the network so they can also update their routing tables. Well-known routing protocols can be modified and used in the QKD network, but it is necessary to take into account the lack of a quantum repeaters, which means that each network node must be ready to receive traffic from its neighboring node and forward it along the best path to the requested destination (more details in Section 6). This is the forwarding module's task. The module receives an incoming packet, checks the TTL value and authentication checksum, and depending on the results, decides either to forward or discard the packet.The function of a routing module is to maintain a local table of routing information and inform other nodes about updates in the network so they can also update their routing tables. Well-known routing protocols can be modified and used in the QKD network, but it is necessary to take into account the lack of a quantum repeaters, which means that each network node must be ready to receive traffic from its neighboring node and forward it along the best path to the requested destination (more details in Section 6). This is the forwarding module's task. The module receives an incoming packet, checks the TTL value and authentication checksum, and depending on the results, decides either to forward or discard the packet.</p>
        <p>In SECOQC, a modified version of the OSPFv2 protocol was used. It is interesting that OSPFv2 does not support QoS routing, which is necessary to guarantee the required service type. OSPFv2 was implemented with the aim of accelerating the development process [33]. In the standard OSPF, the forwarding decision is made based on the destination address and the shortest path information in the routing table. However, considering the low key rate of QKD links, other parameters must be taken into account when calculating the best path.In SECOQC, a modified version of the OSPFv2 protocol was used. It is interesting that OSPFv2 does not support QoS routing, which is necessary to guarantee the required service type. OSPFv2 was implemented with the aim of accelerating the development process [33]. In the standard OSPF, the forwarding decision is made based on the destination address and the shortest path information in the routing table. However, considering the low key rate of QKD links, other parameters must be taken into account when calculating the best path.</p>
        <p>To compute the shortest path tree data structure, the Dijkstra algorithm is used. Each node calculates a unique shortest path tree and uses a modified version of the OSPFv2 to compute the routing table. The main difference is that the modified OSPFv2 calculates multiple paths to each destination instead of a single shortest path. Multiple paths are needed to fulfill the requirements Quantum Key Distribution: A Networking Perspective 96:19 of load balancing and spare paths. Each QKD node therefore computes as many routing tables as the number of its interfaces. OSPFv2 delivers periodic LSA messages to other nodes in the network with the aim of spreading information about the current state of the network.To compute the shortest path tree data structure, the Dijkstra algorithm is used. Each node calculates a unique shortest path tree and uses a modified version of the OSPFv2 to compute the routing table. The main difference is that the modified OSPFv2 calculates multiple paths to each destination instead of a single shortest path. Multiple paths are needed to fulfill the requirements Quantum Key Distribution: A Networking Perspective 96:19 of load balancing and spare paths. Each QKD node therefore computes as many routing tables as the number of its interfaces. OSPFv2 delivers periodic LSA messages to other nodes in the network with the aim of spreading information about the current state of the network.</p>
        <p>Furthermore, each node computes an Extended Routing Table in which all costs in increasing magnitude to every other node are listed. This table is used to merge all routing tables in a single place. The table structure is similar to the standard routing table, the difference being that it has as many entries for each destination as the number of outgoing node links [33]. Now, the node can find multiple paths to the destination node, but it also needs to know an approximate load of selected links in the path. If the load of a link is greater than the calculated threshold, the next best link is looked up, and so on. The third Load State Database table is computed to store details about the approximate load of each outgoing link. It is used to verify whether the link has sufficient resources for transmitting the message [28]. The approximate load of the outgoing link i at discrete time t is denoted by L i (t ) and calculated using a low-pass filter with Equation (2):Furthermore, each node computes an Extended Routing Table in which all costs in increasing magnitude to every other node are listed. This table is used to merge all routing tables in a single place. The table structure is similar to the standard routing table, the difference being that it has as many entries for each destination as the number of outgoing node links [33]. Now, the node can find multiple paths to the destination node, but it also needs to know an approximate load of selected links in the path. If the load of a link is greater than the calculated threshold, the next best link is looked up, and so on. The third Load State Database table is computed to store details about the approximate load of each outgoing link. It is used to verify whether the link has sufficient resources for transmitting the message [28]. The approximate load of the outgoing link i at discrete time t is denoted by L i (t ) and calculated using a low-pass filter with Equation (2):</p>
        <p>where l i (t ) is the instant load of the outgoing link i and w is the filter constant. The instant load l i (t ) is calculated as a ratio of the number of transmitted bits in the previous unit time. More details about routing and forwarding modules can be found in References [33] and [28].where l i (t ) is the instant load of the outgoing link i and w is the filter constant. The instant load l i (t ) is calculated as a ratio of the number of transmitted bits in the previous unit time. More details about routing and forwarding modules can be found in References [33] and [28].</p>
        <p>It should be emphasized that application development was not the SECOQC project's task. SECOQC, however, conducted several experiments to test the solutions created. During the SECOQC QKD conference from October 8-10, 2008, a demonstration of telephone communications and video conferencing was given. A VPN tunnel was established between the nodes and AES encryption was used. The AES key was refreshed every 20 seconds, 9 and at certain moments, AES encryption was replaced by OTP [106]. The main objective was to test routing mechanisms, measure key material consumption and generation, and highlight basic mechanisms of the SECOQC network functionality. It is worth noting that SECOQC investigated the establishment of a QKD connection to the end-user [28].It should be emphasized that application development was not the SECOQC project's task. SECOQC, however, conducted several experiments to test the solutions created. During the SECOQC QKD conference from October 8-10, 2008, a demonstration of telephone communications and video conferencing was given. A VPN tunnel was established between the nodes and AES encryption was used. The AES key was refreshed every 20 seconds, 9 and at certain moments, AES encryption was replaced by OTP [106]. The main objective was to test routing mechanisms, measure key material consumption and generation, and highlight basic mechanisms of the SECOQC network functionality. It is worth noting that SECOQC investigated the establishment of a QKD connection to the end-user [28].</p>
        <p>The SECOQC network has laid the groundwork for a hop-by-hop networking approach that greatly simplifies views on implementing routing decisions. The hop-by-hop approach allows each node to decide which further path to direct the message, which offers more flexibility in implementing routing protocols. However, the BBN key-repeater approach described in Section 5.1.5, requires having a global, up-to-date view of the network before establishing and reserving resources on the path, which can be demanding due to the dynamic consumption of generating key rates. The SECOQC network also demonstrated interoperability between different equipment manufacturers and showed that the QKD network could achieve ranges of almost 100 km (the maximum link length was 82 km between the BREIT and St. Pölten nodes) [37]. A brief summary of the SECOQC network is given in Table 3.The SECOQC network has laid the groundwork for a hop-by-hop networking approach that greatly simplifies views on implementing routing decisions. The hop-by-hop approach allows each node to decide which further path to direct the message, which offers more flexibility in implementing routing protocols. However, the BBN key-repeater approach described in Section 5.1.5, requires having a global, up-to-date view of the network before establishing and reserving resources on the path, which can be demanding due to the dynamic consumption of generating key rates. The SECOQC network also demonstrated interoperability between different equipment manufacturers and showed that the QKD network could achieve ranges of almost 100 km (the maximum link length was 82 km between the BREIT and St. Pölten nodes) [37]. A brief summary of the SECOQC network is given in Table 3.</p>
        <p>Interest in quantum cryptography in the EU has been accompanied by projects funded under the Quantum Technologies Flagship, QuantEra, COST, and EuraMet programs [107][108][109][110][111][112]. In 2019, the EU Horizont2020 project OPENQKD with a consortium of 38 partners from industry and academia was announced [113]. OPENQKD aims to lay the foundations for future European quantum infrastructure and the convergence of quantum technology with practical telecommunications systems in Europe within three years. 103.1 kbps over 33 km QKD protocol used BB84 (decoy state), SARG04, COW, BBM92, CV-QKD Key references [28,33,106] Fig. 10. Topology of the Tokyo UQCC QKD network.Interest in quantum cryptography in the EU has been accompanied by projects funded under the Quantum Technologies Flagship, QuantEra, COST, and EuraMet programs [107][108][109][110][111][112]. In 2019, the EU Horizont2020 project OPENQKD with a consortium of 38 partners from industry and academia was announced [113]. OPENQKD aims to lay the foundations for future European quantum infrastructure and the convergence of quantum technology with practical telecommunications systems in Europe within three years. 103.1 kbps over 33 km QKD protocol used BB84 (decoy state), SARG04, COW, BBM92, CV-QKD Key references [28,33,106] Fig. 10. Topology of the Tokyo UQCC QKD network.</p>
        <p>Two years after SECOQC, nine organizations from Japan and the European Union participated in the Tokyo UQCC QKD testbed network ("Japan Giga Bit Network 2 plus" -JGN2plus). The network consisted of parts of the National Institute of Information and Communications Technology of Japan (NICT) open testbed network called "Japan Giga Bit Network 2 plus" (JGN2plus) [38].Two years after SECOQC, nine organizations from Japan and the European Union participated in the Tokyo UQCC QKD testbed network ("Japan Giga Bit Network 2 plus" -JGN2plus). The network consisted of parts of the National Institute of Information and Communications Technology of Japan (NICT) open testbed network called "Japan Giga Bit Network 2 plus" (JGN2plus) [38].</p>
        <p>The Tokyo QKD network contained four access points, Hakusan, Hongo, Koganei, and Otemachi, and six nodes connected by commercial optical fibers installed at these access points (Figure 10). Since half of chosen fibers were aerial, large losses occurred on the links. The link between the Kogenei and Otemachi nodes had a loss rate of about 0.3 dB/km, while on other links this rate reached even 0.5 dB/km. Similarly to SECOQC, the project's participants implemented certain network links, allocated as follows:The Tokyo QKD network contained four access points, Hakusan, Hongo, Koganei, and Otemachi, and six nodes connected by commercial optical fibers installed at these access points (Figure 10). Since half of chosen fibers were aerial, large losses occurred on the links. The link between the Kogenei and Otemachi nodes had a loss rate of about 0.3 dB/km, while on other links this rate reached even 0.5 dB/km. Similarly to SECOQC, the project's participants implemented certain network links, allocated as follows:</p>
        <p>• A 24-km link between the Otemachi and Hakusan nodes was provided by the Mitsubishi Electric Corporation and NTT Company. They implemented the BB84 protocol with a maximum key rate of 2 kbps and QBER of 4.5%. • A 45-km link between the Koganei and Otemachi nodes was provided by NEC, implementing the decoy state BB84 protocol with a NICT superconducting single photon detector (SSPD). The maximum key rate was 81.7 kbps with an average QBER of 2.7%. • NTT used DPS-QKD on the longest link in the network, which was 90 km between the Koganei-1 and Koganei-2 nodes. They also used an SSPD detector and achieved a maximum key rate of 15 kbps with an average QBER of 2.3% [114]. • Three organizations from Austria, including the AIT, the Institute of Quantum Optics and Quantum Information (IQOQI), and the University of Vienna, formed a single team called "All Vienna." They presented their SECOQC QKD device. This device was based on• A 24-km link between the Otemachi and Hakusan nodes was provided by the Mitsubishi Electric Corporation and NTT Company. They implemented the BB84 protocol with a maximum key rate of 2 kbps and QBER of 4.5%. • A 45-km link between the Koganei and Otemachi nodes was provided by NEC, implementing the decoy state BB84 protocol with a NICT superconducting single photon detector (SSPD). The maximum key rate was 81.7 kbps with an average QBER of 2.7%. • NTT used DPS-QKD on the longest link in the network, which was 90 km between the Koganei-1 and Koganei-2 nodes. They also used an SSPD detector and achieved a maximum key rate of 15 kbps with an average QBER of 2.3% [114]. • Three organizations from Austria, including the AIT, the Institute of Quantum Optics and Quantum Information (IQOQI), and the University of Vienna, formed a single team called "All Vienna." They presented their SECOQC QKD device. This device was based on</p>
        <p>Quantum Key Distribution: A Networking Perspective 96:21 11304 kbps over 45 km The most common protocol used BB84, BBM92 Key references [38,114] entanglement of the QKD BBM92 protocol, which was placed between the Koganei-2 and Koganei-3 nodes with a maximum key rate of 0.25 kbps. • Toshiba Research Europe Ltd. demonstrated their decoy-state BB84 system with selfdifferencing avalanche photodiodes (SPAPDs) between the Koganei-2 and Otemachi-2 nodes on a 45-km link. The maximum key rate was a record 304 kbps with an average QBER of 3.8%. This was by far the highest sustained QKD bit rate produced to date. • Finally, a 13-km link between the Otemachi and Hongo nodes was provided by idQuantique from Switzerland, making use of the SARG04 protocol from their commercial Cerberis solution. The maximum key rate was 1.5 kbps.Quantum Key Distribution: A Networking Perspective 96:21 11304 kbps over 45 km The most common protocol used BB84, BBM92 Key references [38,114] entanglement of the QKD BBM92 protocol, which was placed between the Koganei-2 and Koganei-3 nodes with a maximum key rate of 0.25 kbps. • Toshiba Research Europe Ltd. demonstrated their decoy-state BB84 system with selfdifferencing avalanche photodiodes (SPAPDs) between the Koganei-2 and Otemachi-2 nodes on a 45-km link. The maximum key rate was a record 304 kbps with an average QBER of 3.8%. This was by far the highest sustained QKD bit rate produced to date. • Finally, a 13-km link between the Otemachi and Hongo nodes was provided by idQuantique from Switzerland, making use of the SARG04 protocol from their commercial Cerberis solution. The maximum key rate was 1.5 kbps.</p>
        <p>The Tokyo UQCC QKD network followed a similar three-layer network architecture based on the trusted repeater approach as it was implemented in the SECOQC project. The main difference was the use of a Key Management Server (KMS) for centralized management. The Tokyo QKD network attempted to test a government-chartered network scenario, which often has a central dispatcher or central data server. The KMS was installed in Koganei-1, Koganei-2, Otemachi-1, and Otemachi-2. All nodes implemented Key Management Agents, whose main task was to save the key material and store link statistical data, such as QBER and key generation rate. Later, these statistical data were forwarded to the KMS, which coordinated with all the links in the network [38].The Tokyo UQCC QKD network followed a similar three-layer network architecture based on the trusted repeater approach as it was implemented in the SECOQC project. The main difference was the use of a Key Management Server (KMS) for centralized management. The Tokyo QKD network attempted to test a government-chartered network scenario, which often has a central dispatcher or central data server. The KMS was installed in Koganei-1, Koganei-2, Otemachi-1, and Otemachi-2. All nodes implemented Key Management Agents, whose main task was to save the key material and store link statistical data, such as QBER and key generation rate. Later, these statistical data were forwarded to the KMS, which coordinated with all the links in the network [38].</p>
        <p>In October 2010, a live demonstration of secure TV conferencing, eavesdropping detection, and QKD link rerouting on the Tokyo UQCC QKD network was performed. Layer 2-VPN encryption with OTP between the Otemachi-2 and Koganei-1 nodes was established. Two routes were used to demonstrate the routing algorithm when the links were attacked by the eavesdropper. The KMS detected the attacks because of an increase in the QBER and rerouted the communication through a spare link.In October 2010, a live demonstration of secure TV conferencing, eavesdropping detection, and QKD link rerouting on the Tokyo UQCC QKD network was performed. Layer 2-VPN encryption with OTP between the Otemachi-2 and Koganei-1 nodes was established. Two routes were used to demonstrate the routing algorithm when the links were attacked by the eavesdropper. The KMS detected the attacks because of an increase in the QBER and rerouted the communication through a spare link.</p>
        <p>As noted in Table 4, the Tokyo QKD network showed that QKD technology can reach speeds of several hundred bits per second. The network also confirmed communication capabilities in QKD link distance, achieving a record link of 90 km between the Koganei-1 and Koganei-2 nodes [58]. However, what sets this network apart is the introduction of a hierarchical view into the organization of QKD networks. The key management servers implement a management layer and have complete insight into the state of the QKD network in their domain. Organization in this manner has brought the QKD network closer to the SDN perspective discussed in Section 7.As noted in Table 4, the Tokyo QKD network showed that QKD technology can reach speeds of several hundred bits per second. The network also confirmed communication capabilities in QKD link distance, achieving a record link of 90 km between the Koganei-1 and Koganei-2 nodes [58]. However, what sets this network apart is the introduction of a hierarchical view into the organization of QKD networks. The key management servers implement a management layer and have complete insight into the state of the QKD network in their domain. Organization in this manner has brought the QKD network closer to the SDN perspective discussed in Section 7.</p>
        <p>China has been constructing QKD networks on a national scale. These efforts started by constructing testbed metropolitan QKD networks in Hefei, where a three-node network [115] and five-node network [71] were constructed in 2009 and 2010, respectively. Other efforts to construct fiber-based QKD networks have been reported in References [116][117][118][119], and a satellite-based QKD network is also being formed [24]. This section provides an overview of these developments by looking at some recently constructed fiber-based networks. The backbone network consists of 32 physical nodes linearly connected by QKD links (Figure 11). Among these nodes, Beijing, Jinan, Fuli, Hefei, Nanjing, and Shanghai are the access points, while the rest are trusted repeater nodes. The backbone network has 135 links in total. Two to eight multiple QKD links lie between adjacent nodes. To conserve fiber resources, the network uses quantum wavelength division multiplexing technology, which combines four quantum channels into a single fiber. The network rents dark fibers deployed by China Cable Television Network Co. The distance between adjacent nodes along the backbone line varies from 34 km to 89 km, with fiber loss varying from 7.26 dB to 22.27 dB.China has been constructing QKD networks on a national scale. These efforts started by constructing testbed metropolitan QKD networks in Hefei, where a three-node network [115] and five-node network [71] were constructed in 2009 and 2010, respectively. Other efforts to construct fiber-based QKD networks have been reported in References [116][117][118][119], and a satellite-based QKD network is also being formed [24]. This section provides an overview of these developments by looking at some recently constructed fiber-based networks. The backbone network consists of 32 physical nodes linearly connected by QKD links (Figure 11). Among these nodes, Beijing, Jinan, Fuli, Hefei, Nanjing, and Shanghai are the access points, while the rest are trusted repeater nodes. The backbone network has 135 links in total. Two to eight multiple QKD links lie between adjacent nodes. To conserve fiber resources, the network uses quantum wavelength division multiplexing technology, which combines four quantum channels into a single fiber. The network rents dark fibers deployed by China Cable Television Network Co. The distance between adjacent nodes along the backbone line varies from 34 km to 89 km, with fiber loss varying from 7.26 dB to 22.27 dB.</p>
        <p>The backbone network deploys the QKD devices provided by QuantumCTek Co. The device implements a polarization-coding-based decoy state BB84 protocol. Some of the devices integrate the up-conversion single photon detection technique and thereby achieve a 25% single photon detection rate.The backbone network deploys the QKD devices provided by QuantumCTek Co. The device implements a polarization-coding-based decoy state BB84 protocol. Some of the devices integrate the up-conversion single photon detection technique and thereby achieve a 25% single photon detection rate.</p>
        <p>The backbone network is designed to function as a high bandwidth channel that feeds quantum keys between metropolitan and QKD networks located in different cities. Up to now, the backbone network has been connected to the metropolitan QKD networks already established in Beijing, Shanghai, Jian, and Hefei. A wide area QKD network has been thus formed and provides end-users, including banks, government agencies, and large enterprises, with versatile security services [121].The backbone network is designed to function as a high bandwidth channel that feeds quantum keys between metropolitan and QKD networks located in different cities. Up to now, the backbone network has been connected to the metropolitan QKD networks already established in Beijing, Shanghai, Jian, and Hefei. A wide area QKD network has been thus formed and provides end-users, including banks, government agencies, and large enterprises, with versatile security services [121].</p>
        <p>In November 2018, an extension of the Beijing-Shanghai backbone network was completed by establishing a backbone QKD link between Wuhan and Hefei. The purpose was to connect the Wuhan metropolitan QKD network to the backbone network. The Wuhan-Hefei backbone line is operated by CAS Quantum Network Co. In the long term, the backbone network will be further extended to cover a wider area of China. the fiber resources [122,123]. The network has 33 QKD links in total (Figure 12). The length of the links varies from 1.7 km to 64.7 km, with the fiber loss varying from 1.48 dB to 25.2 dB. The quantum signals are transmitted through dark fibers provided by China Union Shandong Branch. The network deploys QKD systems implementing the polarization-coding-based decoy state BB84 protocol. All systems are provided by 
            <rs type="software">QuantumCTek</rs>.
        </p>
        <p>The network adopts a salable, self-built service channel, which provides secure data transmission services and a minimum bandwidth of 512 Mbps. The Jinan private network integrates VoIP telephone and video conferencing services supplied with quantum keys. The security service is accessed through repeaters that implement an IPSec VPN protocol supplied with quantum keys. The network supports the OTP and several other symmetric encryption algorithms. The typical key refresh rate of symmetric encryption algorithms is once per second [124].The network adopts a salable, self-built service channel, which provides secure data transmission services and a minimum bandwidth of 512 Mbps. The Jinan private network integrates VoIP telephone and video conferencing services supplied with quantum keys. The security service is accessed through repeaters that implement an IPSec VPN protocol supplied with quantum keys. The network supports the OTP and several other symmetric encryption algorithms. The typical key refresh rate of symmetric encryption algorithms is once per second [124].</p>
        <p>Metropolitan Area QKD Network. The Wuhan metropolitan area QKD network was constructed in 2017 from January to December. The network consists of one command center, one centralized control station, 10 trusted repeater nodes, and 60 end-user nodes (Figure 13).Metropolitan Area QKD Network. The Wuhan metropolitan area QKD network was constructed in 2017 from January to December. The network consists of one command center, one centralized control station, 10 trusted repeater nodes, and 60 end-user nodes (Figure 13).</p>
        <p>The network has 74 QKD links in total. The centralized control station and two central trusted repeater nodes are interconnected to form a network ring. Their connections adopt a dual-link structure (two QKD links are established between every other node). The longest QKD link was 16.5 km, and the optical channel loss incurred by the fiber, WDM device, and optical switch was a maximum of 14.6 dB over 6.7 km. This high loss largely results from the complex metropolitan fiber environment. The key rate of the QKD links ranges from 2.8 kbps to 141 kbps. The QKD systems are provided by QuantumCTek [125].The network has 74 QKD links in total. The centralized control station and two central trusted repeater nodes are interconnected to form a network ring. Their connections adopt a dual-link structure (two QKD links are established between every other node). The longest QKD link was 16.5 km, and the optical channel loss incurred by the fiber, WDM device, and optical switch was a maximum of 14.6 dB over 6.7 km. This high loss largely results from the complex metropolitan fiber environment. The key rate of the QKD links ranges from 2.8 kbps to 141 kbps. The QKD systems are provided by QuantumCTek [125].</p>
        <p>One of the network's features is classic quantum WDM technology [126], which integrates the classic service signal, quantum signal, and classic QKD post-processing signal into a single fiber. The security service is accessed via an encryption repeater that implements an IPSec VPN protocol supplied with quantum keys. The typical key refresh rate of the symmetric encryption algorithms is once every five seconds.One of the network's features is classic quantum WDM technology [126], which integrates the classic service signal, quantum signal, and classic QKD post-processing signal into a single fiber. The security service is accessed via an encryption repeater that implements an IPSec VPN protocol supplied with quantum keys. The typical key refresh rate of the symmetric encryption algorithms is once every five seconds.</p>
        <p>Wide Area QKD Network. A QKD wide area network connecting the cities of Hefei, Chaohu. and Wuhu (HCW) in China was reported in 2014 in Reference [119]. The entire HCW QKD network, which has a complete technical description available, operated for more than 5,000 hours from 21 December 2011 to 19 July 2012 and was installed in the Anhui provincial telecommunications network of China Mobile Ltd., with over 150 km of coverage area.Wide Area QKD Network. A QKD wide area network connecting the cities of Hefei, Chaohu. and Wuhu (HCW) in China was reported in 2014 in Reference [119]. The entire HCW QKD network, which has a complete technical description available, operated for more than 5,000 hours from 21 December 2011 to 19 July 2012 and was installed in the Anhui provincial telecommunications network of China Mobile Ltd., with over 150 km of coverage area.</p>
        <p>Thirteen QKD devices over nine nodes were employed in this network [119]. The HCW wide area network consists of two metropolitan networks: the Hefei QKD network, which has five nodes [116,117], and the Wuhu QKD network [118], which has three nodes. These two networks were connected with an intercity QKD link, which combined Hefei and Wuhu metropolitan area QKD networks through a trusted repeater node at the Chaohu Branch of China Mobile Ltd. [119].Thirteen QKD devices over nine nodes were employed in this network [119]. The HCW wide area network consists of two metropolitan networks: the Hefei QKD network, which has five nodes [116,117], and the Wuhu QKD network [118], which has three nodes. These two networks were connected with an intercity QKD link, which combined Hefei and Wuhu metropolitan area QKD networks through a trusted repeater node at the Chaohu Branch of China Mobile Ltd. [119].</p>
        <p>The network deployed QKD systems that implement the phase-coding-based decoy state BB84 protocol. The maximum key rate in the HCW QKD network was 16.15 kbps between the West Campus and North Campus nodes over a 3.1 km link connected to an optical switch located in the Campus Library [119].The network deployed QKD systems that implement the phase-coding-based decoy state BB84 protocol. The maximum key rate in the HCW QKD network was 16.15 kbps between the West Campus and North Campus nodes over a 3.1 km link connected to an optical switch located in the Campus Library [119].</p>
        <p>Strategies. The Beijing-Shanghai backbone QKD network and several other metropolitan area QKD networks employ a number of networking strategies to improve the performance and robustness of the network:Strategies. The Beijing-Shanghai backbone QKD network and several other metropolitan area QKD networks employ a number of networking strategies to improve the performance and robustness of the network:</p>
        <p>• Some metropolitan area networks adopt a ring topology in the network's design to improve its disaster tolerance. • Backbone connections adopt a multiple parallel link networking strategy to improve bandwidth and the network's stability. • Some core nodes such as the centralized control stations deploy backup devices that reduce the probability of system service interruption caused by a single point of failure.• Some metropolitan area networks adopt a ring topology in the network's design to improve its disaster tolerance. • Backbone connections adopt a multiple parallel link networking strategy to improve bandwidth and the network's stability. • Some core nodes such as the centralized control stations deploy backup devices that reduce the probability of system service interruption caused by a single point of failure.</p>
        <p>Routing. Key routing in the Beijing-Shanghai QKD backbone network, Jinan government-private QKD network, and Wuhan metropolitan area QKD network uses a clientserver architecture to maximize channel utilization and provide on-demand quantum keys to end-users.Routing. Key routing in the Beijing-Shanghai QKD backbone network, Jinan government-private QKD network, and Wuhan metropolitan area QKD network uses a clientserver architecture to maximize channel utilization and provide on-demand quantum keys to end-users.</p>
        <p>The centralized control station of each network implements a key routing server that is in charge of managing the routing table for each network node. Based on information collected from the network (the running status of the QKD links, the remaining key storage capacity, and other information), the routing table of each node is periodically updated. The updated routing tables are exchanged with other network nodes to provide information about suitable paths until the next update [127].The centralized control station of each network implements a key routing server that is in charge of managing the routing table for each network node. Based on information collected from the network (the running status of the QKD links, the remaining key storage capacity, and other information), the routing table of each node is periodically updated. The updated routing tables are exchanged with other network nodes to provide information about suitable paths until the next update [127].</p>
        <p>The key routing server supports multiple queuing strategies adapted to different network topology structures. In the case of an emergency fault, such as the failure of the key management machine or unavailability of the key, the node device actively reports the event to the routing server. The server then recalculates routing tables for affected nodes. In the Beijing-Shanghai backbone network, key routing is managed by dividing the network into multiple sub-networks. Each subnetwork adopts the above client-server structure with the key routing server located at the access nodes [127,128].The key routing server supports multiple queuing strategies adapted to different network topology structures. In the case of an emergency fault, such as the failure of the key management machine or unavailability of the key, the node device actively reports the event to the routing server. The server then recalculates routing tables for affected nodes. In the Beijing-Shanghai backbone network, key routing is managed by dividing the network into multiple sub-networks. Each subnetwork adopts the above client-server structure with the key routing server located at the access nodes [127,128].</p>
        <p>With a 2,000-km link connecting Shanghai and Beijing and metropolitan networks in Hefei and Jinan, China is currently leading the QKD race in terms of practical developments [129]. In their described methodologies, unique approaches in implementing existing and Quantum Key Distribution: A Networking Perspective 96:25 available technology can be seen in these QKD networks. However, in addition to using discrete QKD protocols that guarantee high performance but require expensive single-photon detectors, experiments that rely on continuous-variable and measurement-device-independent (MDI) QKD have also been reported. For CV-QKD, results of 5.77 kbps over 50 km have been achieved [73,130].With a 2,000-km link connecting Shanghai and Beijing and metropolitan networks in Hefei and Jinan, China is currently leading the QKD race in terms of practical developments [129]. In their described methodologies, unique approaches in implementing existing and Quantum Key Distribution: A Networking Perspective 96:25 available technology can be seen in these QKD networks. However, in addition to using discrete QKD protocols that guarantee high performance but require expensive single-photon detectors, experiments that rely on continuous-variable and measurement-device-independent (MDI) QKD have also been reported. For CV-QKD, results of 5.77 kbps over 50 km have been achieved [73,130].</p>
        <p>The experiments with MDI-QKD have resulted the higher rates (up to the channel attenuation): 98.2 kbps over 49.1 km and up to 1 Mbps over a dozen kilometers' distance [131]. Moreover, QKD systems based on MDI can work efficiently not only in symmetric channels with similar losses, but even with channels with asymmetric losses [132]. The optimization methods [133] can extend the secure transmission distance in such MDI-QKD implementations by more than 20-50 km in standard telecom fiber. A brief summary of the networks described above with publicly available references is listed in Table 5.The experiments with MDI-QKD have resulted the higher rates (up to the channel attenuation): 98.2 kbps over 49.1 km and up to 1 Mbps over a dozen kilometers' distance [131]. Moreover, QKD systems based on MDI can work efficiently not only in symmetric channels with similar losses, but even with channels with asymmetric losses [132]. The optimization methods [133] can extend the secure transmission distance in such MDI-QKD implementations by more than 20-50 km in standard telecom fiber. A brief summary of the networks described above with publicly available references is listed in Table 5.</p>
        <p>Not discussed here for reasons of space, it is, however, important to mention that China is leading in the field of space-oriented quantum technology. In 2017, the 640-kg "Micius" satellite was launched [134]. In a 273-second satellite pass and using a 1-m telescope on the ground, sifted key rates of about 12 kbps at 645 km to 1 kbps at 1,200 km were expected [135]. After post-processing, 1.1 kbps for the secure key was obtained.Not discussed here for reasons of space, it is, however, important to mention that China is leading in the field of space-oriented quantum technology. In 2017, the 640-kg "Micius" satellite was launched [134]. In a 273-second satellite pass and using a 1-m telescope on the ground, sifted key rates of about 12 kbps at 645 km to 1 kbps at 1,200 km were expected [135]. After post-processing, 1.1 kbps for the secure key was obtained.</p>
        <p>The specific QKD issues and constraints described above pose significant challenges in QKD network design. However, analysis of the characteristics of QKD networks has shown similarities in Reference [136] to Mobile Ad Hoc Networks (MANET) and Vehicular Ad Hoc Networks (VANET) [137][138][139].The specific QKD issues and constraints described above pose significant challenges in QKD network design. However, analysis of the characteristics of QKD networks has shown similarities in Reference [136] to Mobile Ad Hoc Networks (MANET) and Vehicular Ad Hoc Networks (VANET) [137][138][139].</p>
        <p>The main characteristics of QKD technology from a simple point of view can be listed:The main characteristics of QKD technology from a simple point of view can be listed:</p>
        <p>• QKD links such as those described above are always implemented in point-to-point behavior and can be roughly characterized by two features: limited distance and key rate (exponentially) decreasing with distance. Links may become unavailable when there is not enough key material or when the public channel is congested. This is similar to Wi-Fi links, which are limited in range and whose communication speeds depend on the user's distance from the transmitter's antenna. • One of the main features of current QKD networks is the lack of a quantum repeater (Section 3.2), and communication is therefore usually performed on a hop-by-hop basis.• QKD links such as those described above are always implemented in point-to-point behavior and can be roughly characterized by two features: limited distance and key rate (exponentially) decreasing with distance. Links may become unavailable when there is not enough key material or when the public channel is congested. This is similar to Wi-Fi links, which are limited in range and whose communication speeds depend on the user's distance from the transmitter's antenna. • One of the main features of current QKD networks is the lack of a quantum repeater (Section 3.2), and communication is therefore usually performed on a hop-by-hop basis.</p>
        <p>In MANET networks, communication takes place on a hop-by-hop basis, and mobile nodes are typically powered with energy-aware solutions such as batteries. The nodes connect themselves in a self-organizing, decentralized manner with no authority in charge of controlling and network management. The main drawback of MANET networks is the unpredictable mobility of nodes, which can often lead to unstable routing paths [114]. The amount of battery power and the mobility of MANET nodes can be easily linked to the amount of key material in QKD key storage. The limited range of wireless links is much like the limitations in the length of a QKD link. The lack of dedicated network infrastructure (such as routers) is another similarity between these two technologies. The poor mobility of QKD nodes, however, makes it similar to VANET technology, in which communication takes place along a predefined path.In MANET networks, communication takes place on a hop-by-hop basis, and mobile nodes are typically powered with energy-aware solutions such as batteries. The nodes connect themselves in a self-organizing, decentralized manner with no authority in charge of controlling and network management. The main drawback of MANET networks is the unpredictable mobility of nodes, which can often lead to unstable routing paths [114]. The amount of battery power and the mobility of MANET nodes can be easily linked to the amount of key material in QKD key storage. The limited range of wireless links is much like the limitations in the length of a QKD link. The lack of dedicated network infrastructure (such as routers) is another similarity between these two technologies. The poor mobility of QKD nodes, however, makes it similar to VANET technology, in which communication takes place along a predefined path.</p>
        <p>Although at first glance MANET and QKD networks have nothing in common, a simple analysis of the features of these networks reveals their similarity. What clearly distinguishes these two networks, though, is their purpose. MANET networks are designed for fast and straightforward communication in situations where pre-existing installed infrastructure is not available (e.g., search-and-rescue operations during natural disasters or in war zones). By contrast, the primary goal of QKD is to provide ITS communication. This may have a significant impact when choosing network solutions, since a solution required in one situation may not be suitable in another. For example, consider routing solutions based on network flooding. QKD networks rely on the assumption that all nodes are trusted when communication is performed in a hop-by-hop or keyrepeating manner [32,39], and by following this assumption strictly, an eavesdropper is restricted to attacking QKD links only. Because of the nature of QKD, the eavesdropper is not able to gain any information about the key being transported through the link, but service may be denied to disable the communication. Although results have been obtained by combining multiple paths to establish secure key material [27,82], it is thought that the amount of routing information being sent to the nodes should be reduced to a minimum. To prevent a denial-of-service attack, no node (except source and destination) in a network should know the routing request. Therefore, the number of broadcast packets should be minimized. Furthermore, considering the primary objective of QKD, which is to provide ITS communication, routing packets must be either authenticated and encrypted or at least authenticated [140]. This means that the number of routing packets in the network needs to be minimized (routing overhead) concerning the material to be preserved for the protection of data, which is the primary goal of secure communication. From this, it follows that protocols based on flooding are not preferred in QKD networks.Although at first glance MANET and QKD networks have nothing in common, a simple analysis of the features of these networks reveals their similarity. What clearly distinguishes these two networks, though, is their purpose. MANET networks are designed for fast and straightforward communication in situations where pre-existing installed infrastructure is not available (e.g., search-and-rescue operations during natural disasters or in war zones). By contrast, the primary goal of QKD is to provide ITS communication. This may have a significant impact when choosing network solutions, since a solution required in one situation may not be suitable in another. For example, consider routing solutions based on network flooding. QKD networks rely on the assumption that all nodes are trusted when communication is performed in a hop-by-hop or keyrepeating manner [32,39], and by following this assumption strictly, an eavesdropper is restricted to attacking QKD links only. Because of the nature of QKD, the eavesdropper is not able to gain any information about the key being transported through the link, but service may be denied to disable the communication. Although results have been obtained by combining multiple paths to establish secure key material [27,82], it is thought that the amount of routing information being sent to the nodes should be reduced to a minimum. To prevent a denial-of-service attack, no node (except source and destination) in a network should know the routing request. Therefore, the number of broadcast packets should be minimized. Furthermore, considering the primary objective of QKD, which is to provide ITS communication, routing packets must be either authenticated and encrypted or at least authenticated [140]. This means that the number of routing packets in the network needs to be minimized (routing overhead) concerning the material to be preserved for the protection of data, which is the primary goal of secure communication. From this, it follows that protocols based on flooding are not preferred in QKD networks.</p>
        <p>In previously deployed QKD networks, emphasis was placed on quantum channels. The public channel, though, was largely neglected and assumed that it was somehow achievable without any difficulties. The prioritization of network traffic and signaling protocols were ignored, and the solutions in existing conventional networks have consequently been modified for the needs of QKD networks. The first such solution, which is based on modifying the well-known Open Shortest Path First (OSPF) routing protocol [98], was implemented in the DARPA BBN QKD network built in 2004 in the US [92]. Instead of using the routing hop-count metric, a modified OSPFv2 protocol was used to determine link quality according to the amount of key material in key storage. As discussed in Section 5.1.4, the modified version of the OSPFv2 does not take into account the status of the public channel [99].In previously deployed QKD networks, emphasis was placed on quantum channels. The public channel, though, was largely neglected and assumed that it was somehow achievable without any difficulties. The prioritization of network traffic and signaling protocols were ignored, and the solutions in existing conventional networks have consequently been modified for the needs of QKD networks. The first such solution, which is based on modifying the well-known Open Shortest Path First (OSPF) routing protocol [98], was implemented in the DARPA BBN QKD network built in 2004 in the US [92]. Instead of using the routing hop-count metric, a modified OSPFv2 protocol was used to determine link quality according to the amount of key material in key storage. As discussed in Section 5.1.4, the modified version of the OSPFv2 does not take into account the status of the public channel [99].</p>
        <p>A similar approach was offered in Reference [141], where the author proposed using unencrypted and non-authenticated communication to disseminate OSPFv2 routing packets. Obviously, this kind of network is easy prey for an eavesdropper with unlimited resources at their disposal, especially in terms of passive eavesdropping [76]. Since the described solution is based on the use of key material in key storage as a routing metric, it cannot provide efficient routing because of a lack of information about the state of the public channel.A similar approach was offered in Reference [141], where the author proposed using unencrypted and non-authenticated communication to disseminate OSPFv2 routing packets. Obviously, this kind of network is easy prey for an eavesdropper with unlimited resources at their disposal, especially in terms of passive eavesdropping [76]. Since the described solution is based on the use of key material in key storage as a routing metric, it cannot provide efficient routing because of a lack of information about the state of the public channel.</p>
        <p>In the SECOQC network, another modified version of the OSPFv2 protocol was introduced [28,33]. It was based on a local load-balancing policy calculated as the ratio of the number of transmitted bits over a period of time. As discussed in Section 5.2.3, a solution such as this does not consider the available amount of key material, which means that the algorithm may choose a path with insufficient key material for data transmission.In the SECOQC network, another modified version of the OSPFv2 protocol was introduced [28,33]. It was based on a local load-balancing policy calculated as the ratio of the number of transmitted bits over a period of time. As discussed in Section 5.2.3, a solution such as this does not consider the available amount of key material, which means that the algorithm may choose a path with insufficient key material for data transmission.</p>
        <p>When the Chinese HCW QKD network was developed, a Quantum Key Reservation Approach (QKDRA) based on the IntServ model was applied [142,143]. OSPFv2 is used to find the path from the source to the destination node. After the path is determined, the source node issues a key reservation request to all nodes in the path. After receiving a request, the intermediate node responds with a key reservation result message. Finally, the destination node determines the possibility of establishing the connection. Since OSPFv2 focuses on finding the shortest path, hence the name, solutions presented in References [142,143] find the shortest path between the source and destination and reserve a sufficient amount of key material on a selected path. Note that this path may not be optimal. More specifically, the path is the shortest, but it may not be adequate in terms of QoS. It is known that minimum hop-count (shortest) routing typically finds routes with a significantly lower throughput than the best available [144], since it does not consider other link parameters. OSPFv2 in its original form does not consider QoS constraints; therefore, it cannot guarantee that traffic on the selected path will be adequately served. Reservation of resources on the quantum channel, in this case, does not provide a gain, since the path for the public channel may be inappropriate. However, even an extended version of OSPFv2 that includes QoS constraints [145] may not be optimal for QKD networks. Implementation of OSPFv2 in this way can find the path that has the best characteristics of the public channel but does not consider the parameters of the quantum channel.When the Chinese HCW QKD network was developed, a Quantum Key Reservation Approach (QKDRA) based on the IntServ model was applied [142,143]. OSPFv2 is used to find the path from the source to the destination node. After the path is determined, the source node issues a key reservation request to all nodes in the path. After receiving a request, the intermediate node responds with a key reservation result message. Finally, the destination node determines the possibility of establishing the connection. Since OSPFv2 focuses on finding the shortest path, hence the name, solutions presented in References [142,143] find the shortest path between the source and destination and reserve a sufficient amount of key material on a selected path. Note that this path may not be optimal. More specifically, the path is the shortest, but it may not be adequate in terms of QoS. It is known that minimum hop-count (shortest) routing typically finds routes with a significantly lower throughput than the best available [144], since it does not consider other link parameters. OSPFv2 in its original form does not consider QoS constraints; therefore, it cannot guarantee that traffic on the selected path will be adequately served. Reservation of resources on the quantum channel, in this case, does not provide a gain, since the path for the public channel may be inappropriate. However, even an extended version of OSPFv2 that includes QoS constraints [145] may not be optimal for QKD networks. Implementation of OSPFv2 in this way can find the path that has the best characteristics of the public channel but does not consider the parameters of the quantum channel.</p>
        <p>Yang proposed using the Dijkstra algorithm to identify multiple paths but without considering the status of the public channel [146]. The idea is to use thresholds to exclude links that have a lower key material amount and periodically flood routing details, such as the amount of available key material.Yang proposed using the Dijkstra algorithm to identify multiple paths but without considering the status of the public channel [146]. The idea is to use thresholds to exclude links that have a lower key material amount and periodically flood routing details, such as the amount of available key material.</p>
        <p>The impact of public channel states on the key rate can be found in Reference [147]. This study shows that a public channel should not be excluded in route calculations, since the performance of the public channel affects the quantum channel and vice versa. Therefore, novel metrics are introduced to uniquely describe the state of the public and quantum channels as well as the overall QKD link [147,148]. With the aim of minimizing key consumption, network flooding should be avoided and a single-layer network organization and Greedy Perimeter Stateless Routing Protocol for QKD networks (GPSRQ) was introduced [136]. The GPSRQ routing protocol uses distributed geography and reactive routing to achieve high-level scalability. It is equipped with a caching mechanism and detection of returning loops, enabling forwarding while minimizing key material consumption. However, GPSRQ applications are limited to planar topologies only, because geographic routing in networks with non-planar topologies are not able to quickly determine the shortest path, leading to unnecessary forwarding and increased consumption of scarce key material.The impact of public channel states on the key rate can be found in Reference [147]. This study shows that a public channel should not be excluded in route calculations, since the performance of the public channel affects the quantum channel and vice versa. Therefore, novel metrics are introduced to uniquely describe the state of the public and quantum channels as well as the overall QKD link [147,148]. With the aim of minimizing key consumption, network flooding should be avoided and a single-layer network organization and Greedy Perimeter Stateless Routing Protocol for QKD networks (GPSRQ) was introduced [136]. The GPSRQ routing protocol uses distributed geography and reactive routing to achieve high-level scalability. It is equipped with a caching mechanism and detection of returning loops, enabling forwarding while minimizing key material consumption. However, GPSRQ applications are limited to planar topologies only, because geographic routing in networks with non-planar topologies are not able to quickly determine the shortest path, leading to unnecessary forwarding and increased consumption of scarce key material.</p>
        <p>Routing in QKD networks depends primarily on the architecture of the network organization (hierarchical or distributed architecture, overlay or single stack network, hop-by-hop or keyrepeater networking). Unlike conventional networks, routing solutions in QKD networks need to take into account both channels of the QKD link. Based on the requirement to minimize key consumption, it is necessary to reduce the amount of routing packets that have to be encrypted and authenticated or at least authenticated to avoid active and passive eavesdropping QKD network attacks [28,140].Routing in QKD networks depends primarily on the architecture of the network organization (hierarchical or distributed architecture, overlay or single stack network, hop-by-hop or keyrepeater networking). Unlike conventional networks, routing solutions in QKD networks need to take into account both channels of the QKD link. Based on the requirement to minimize key consumption, it is necessary to reduce the amount of routing packets that have to be encrypted and authenticated or at least authenticated to avoid active and passive eavesdropping QKD network attacks [28,140].</p>
        <p>Considering the efforts to extend the QKD network to metropolitan areas, which involves a significant number of network nodes, a hierarchical organization was considered in previously implemented networks [42,125,[149][150][151]. This approach, which is based on a key management layer, converges to a software-based network paradigm and is discussed in more detail in Section 7.Considering the efforts to extend the QKD network to metropolitan areas, which involves a significant number of network nodes, a hierarchical organization was considered in previously implemented networks [42,125,[149][150][151]. This approach, which is based on a key management layer, converges to a software-based network paradigm and is discussed in more detail in Section 7.</p>
        <p>A more evolutionary strategy for adopting QKD in transport networks is taking advantage of the latest developments in networking technologies, more specifically, in network management. Software-defined networking (SDN) [152,153] allows the control (management) and data (forwarding) planes to be separated. Its popularity has increased in both academic and industrial spheres since its creation in 2008. SDN allows the integration of new technologies and services at a faster pace while enabling centralized management and optimization based on network programmability and configurability principles. Although the approach for SDN has changed over the years from OpenFlow-based device programmability towards open and standard interfaces, this transformation has helped network operators increasingly adopt SDN in their systems to reduce the time-to-market and vendor lock-in.A more evolutionary strategy for adopting QKD in transport networks is taking advantage of the latest developments in networking technologies, more specifically, in network management. Software-defined networking (SDN) [152,153] allows the control (management) and data (forwarding) planes to be separated. Its popularity has increased in both academic and industrial spheres since its creation in 2008. SDN allows the integration of new technologies and services at a faster pace while enabling centralized management and optimization based on network programmability and configurability principles. Although the approach for SDN has changed over the years from OpenFlow-based device programmability towards open and standard interfaces, this transformation has helped network operators increasingly adopt SDN in their systems to reduce the time-to-market and vendor lock-in.</p>
        <p>An SDN network is conceptually organized into three layers. The control and management layer knows the status of the entire network and can optimize its behavior through a centralized entity known as the SDN controller. The controller identifies the capabilities of the devices installed in the infrastructure layer through a set of standard mechanisms (southbound interface). It also knows the requirements of the different applications running in a network through standard interfaces (northbound interface). Its role is to optimize resources and provide the means for devices and services to fulfill their tasks. A QKD system installed in infrastructure can export its requirements to the controller so it can create a specific path with the required optical characteristics (i.e., maximum tolerated noise, attenuation, etc.) to connect the emitter to the receiver (either on a single or multi-hop path) and satisfy an application's requirements. This allows an unprecedented means of creating a fully integrated classic/quantum network and genuinely zero-configuration QKD devices that can be directly plugged into a standard telecommunications network.An SDN network is conceptually organized into three layers. The control and management layer knows the status of the entire network and can optimize its behavior through a centralized entity known as the SDN controller. The controller identifies the capabilities of the devices installed in the infrastructure layer through a set of standard mechanisms (southbound interface). It also knows the requirements of the different applications running in a network through standard interfaces (northbound interface). Its role is to optimize resources and provide the means for devices and services to fulfill their tasks. A QKD system installed in infrastructure can export its requirements to the controller so it can create a specific path with the required optical characteristics (i.e., maximum tolerated noise, attenuation, etc.) to connect the emitter to the receiver (either on a single or multi-hop path) and satisfy an application's requirements. This allows an unprecedented means of creating a fully integrated classic/quantum network and genuinely zero-configuration QKD devices that can be directly plugged into a standard telecommunications network.</p>
        <p>Before this technology, demonstrations required either an ad hoc, separate network just for the quantum channel (i.e., typically a network of dark fibers) or specific network modifications for each link [154,155]. These are very expensive and entirely orthogonal deployments for common telecommunications activities, in which devices are expected to work out of the box and share the fiber with many other conventional communications channels. For QKD to become mainstream, it is critically important that QKD systems follow the trends and architectures used in the transport network segment.Before this technology, demonstrations required either an ad hoc, separate network just for the quantum channel (i.e., typically a network of dark fibers) or specific network modifications for each link [154,155]. These are very expensive and entirely orthogonal deployments for common telecommunications activities, in which devices are expected to work out of the box and share the fiber with many other conventional communications channels. For QKD to become mainstream, it is critically important that QKD systems follow the trends and architectures used in the transport network segment.</p>
        <p>Other projects and demonstrations have shown initial steps towards automating QKD networks. In References [156,157], the authors implemented a mechanism for automating the switching of a quantum channel between a transmitter and two simulated receivers using optical cross-connect switches that were OpenFlow-enabled. In this sense and despite the enabler, in this case, being a software-defined optical network (SDON) controller, the research focused more on applying secure virtual machine migrations in a distributed data center scenario.Other projects and demonstrations have shown initial steps towards automating QKD networks. In References [156,157], the authors implemented a mechanism for automating the switching of a quantum channel between a transmitter and two simulated receivers using optical cross-connect switches that were OpenFlow-enabled. In this sense and despite the enabler, in this case, being a software-defined optical network (SDON) controller, the research focused more on applying secure virtual machine migrations in a distributed data center scenario.</p>
        <p>The most advanced contribution towards Software-Defined QKD Networks was presented in References [158][159][160] (Figure 14(b)). Three production sites in the Telefonica in Spain network were connected. The proposed architecture and demonstrations aimed to demonstrate the technological maturity of QKD systems for integration into production networks. The CV-QKD systems used for the trial were implemented so they could be managed and optimized with software processes and were robust enough to coexist with traditional communications channels. The software integrated the first version of an SDN interface defined by the Industry Specification Group (ISG) for QKD at the European Standards Telecommunications Institute (ETSI). With this interface, the QKD systems and the key delivery processes are centrally managed by an SDN controller, allowing quantum channels (via optical switches) to be dynamically instantiated, multi-hop associations to be created, and demands for keys from external applications to be identified. This setup was also designed so any control and data channel could integrate QKD-derived keys to secure communications related to either the QKD network or traditional telecommunications services running in the production network.The most advanced contribution towards Software-Defined QKD Networks was presented in References [158][159][160] (Figure 14(b)). Three production sites in the Telefonica in Spain network were connected. The proposed architecture and demonstrations aimed to demonstrate the technological maturity of QKD systems for integration into production networks. The CV-QKD systems used for the trial were implemented so they could be managed and optimized with software processes and were robust enough to coexist with traditional communications channels. The software integrated the first version of an SDN interface defined by the Industry Specification Group (ISG) for QKD at the European Standards Telecommunications Institute (ETSI). With this interface, the QKD systems and the key delivery processes are centrally managed by an SDN controller, allowing quantum channels (via optical switches) to be dynamically instantiated, multi-hop associations to be created, and demands for keys from external applications to be identified. This setup was also designed so any control and data channel could integrate QKD-derived keys to secure communications related to either the QKD network or traditional telecommunications services running in the production network.</p>
        <p>QKD can also be seen as an additional security layer for transport networks. The integration of QKD in SDN is a mutually beneficial relationship, since QKD-derived keys can be used to secure the different layers of a transport network. Apart from the demonstration conducted in Reference [157] in which the encryption algorithm (AES) was used to provide security, the authors in Reference [161] showed how existing security protocols used in the control plane could integrate quantum cryptography in a seamless evolutionary manner without affecting current schemes. Being composable in both cryptosystems (QKD and traditional or even post-quantum schemes), the security of the proposed system brings the best of both: certification from traditional schemes is still applicable to the hybrid system, while the security of the resulting solution is the highest possible, because breaking the final key means both cryptosystems must be compromised. This solution is deployed in control channels orchestrating an SDN controller and a network function virtualization (NFV) architecture through SSH and TLS protocols.QKD can also be seen as an additional security layer for transport networks. The integration of QKD in SDN is a mutually beneficial relationship, since QKD-derived keys can be used to secure the different layers of a transport network. Apart from the demonstration conducted in Reference [157] in which the encryption algorithm (AES) was used to provide security, the authors in Reference [161] showed how existing security protocols used in the control plane could integrate quantum cryptography in a seamless evolutionary manner without affecting current schemes. Being composable in both cryptosystems (QKD and traditional or even post-quantum schemes), the security of the proposed system brings the best of both: certification from traditional schemes is still applicable to the hybrid system, while the security of the resulting solution is the highest possible, because breaking the final key means both cryptosystems must be compromised. This solution is deployed in control channels orchestrating an SDN controller and a network function virtualization (NFV) architecture through SSH and TLS protocols.</p>
        <p>The SDN-based experiment of monitoring and mitigation of physical layer attacks was reported [162]. Real-time monitoring of QBER and the secret key rate was used to recalculate routes for the quantum channel establishment.The SDN-based experiment of monitoring and mitigation of physical layer attacks was reported [162]. Real-time monitoring of QBER and the secret key rate was used to recalculate routes for the quantum channel establishment.</p>
        <p>Other cases have focused more on data plane security and service establishment. Marksteiner presented an integration of QKD-derived keys in IPSec channels, focusing its research on the security and scalability of the solution depending on the service throughput [163]. In addition to this research, the approach reported in Reference [164] focuses on service automation for encrypted channels in an end-to-end network. Automation was suggested for data center scenarios (implementing extensions in OpenFlow) and for transport segments (using MPLS and NET-CONF for configuration). This was integrated into virtual network functions implementing the extensions and the security channel using IPSec, as in Reference [163]. Mavromatis demonstrated the usage of QKD for energy-efficient SDN management of Internet of Things devices [165]. We also point out experiments with the use of SDN to control the WDM organization of QKD links [156,[166][167][168] as well as the use of machine learning (ML) models for the prediction of Ch-QKD quality in QKD-DWDM networks with increasing efficiency of SDN-enabled optical networks [169].Other cases have focused more on data plane security and service establishment. Marksteiner presented an integration of QKD-derived keys in IPSec channels, focusing its research on the security and scalability of the solution depending on the service throughput [163]. In addition to this research, the approach reported in Reference [164] focuses on service automation for encrypted channels in an end-to-end network. Automation was suggested for data center scenarios (implementing extensions in OpenFlow) and for transport segments (using MPLS and NET-CONF for configuration). This was integrated into virtual network functions implementing the extensions and the security channel using IPSec, as in Reference [163]. Mavromatis demonstrated the usage of QKD for energy-efficient SDN management of Internet of Things devices [165]. We also point out experiments with the use of SDN to control the WDM organization of QKD links [156,[166][167][168] as well as the use of machine learning (ML) models for the prediction of Ch-QKD quality in QKD-DWDM networks with increasing efficiency of SDN-enabled optical networks [169].</p>
        <p>In a broad QKD network where multiple QKD tenants share the same underlying infrastructure, addressing the secure-key assignment is essential for efficient network managment. Cao proposed the SDN-based secret-key rate sharing approach using heuristic algorithm using simulations [170]. The multi-tenant organization can be served using Key as a Service (KaaS) approach where key pools (KP) defined at the control layer of SDN hierarchy mapped to virtual key pools using RESTful API at the application layer.In a broad QKD network where multiple QKD tenants share the same underlying infrastructure, addressing the secure-key assignment is essential for efficient network managment. Cao proposed the SDN-based secret-key rate sharing approach using heuristic algorithm using simulations [170]. The multi-tenant organization can be served using Key as a Service (KaaS) approach where key pools (KP) defined at the control layer of SDN hierarchy mapped to virtual key pools using RESTful API at the application layer.</p>
        <p>These results show how SDN must be seen as a technological enabler for QKD's integration into transport networks. At the same time, QKD also benefits the network, since it implements an additional ITS layer for critical infrastructures. This integrative approach allows QKD systems to be smoothly integrated into the network and for QKD to be commercialized at different service levels (self-healed network infrastructures, end-to-end services at different OSI layers, etc.).These results show how SDN must be seen as a technological enabler for QKD's integration into transport networks. At the same time, QKD also benefits the network, since it implements an additional ITS layer for critical infrastructures. This integrative approach allows QKD systems to be smoothly integrated into the network and for QKD to be commercialized at different service levels (self-healed network infrastructures, end-to-end services at different OSI layers, etc.).</p>
        <p>Quantum cryptography is an attractive cryptographic technology that has received the attention of various organizations in academic and industrial communities. In recent years, notable progress in the development of optical equipment has been reflected through a number of successful demonstrations of QKD technology. These demonstrations show great achievements in quantum cryptography and highlight the practical difficulties that still need to be resolved.Quantum cryptography is an attractive cryptographic technology that has received the attention of various organizations in academic and industrial communities. In recent years, notable progress in the development of optical equipment has been reflected through a number of successful demonstrations of QKD technology. These demonstrations show great achievements in quantum cryptography and highlight the practical difficulties that still need to be resolved.</p>
        <p>We provide a summary of the major key points related to QKD networks in Table 6. Trusted repeaters are necessary to extend the secure transmission distance of quantum channels. Solutions for integrating QKD networks into existing optical communications networks are currently the hot topic in optical research. Real quantum cryptography networks employed by end-users for real-life information transfer applications will be the next milestone. In terms of the industry, standards for security evaluation, production, and application of QKD are already being defined [189,190].We provide a summary of the major key points related to QKD networks in Table 6. Trusted repeaters are necessary to extend the secure transmission distance of quantum channels. Solutions for integrating QKD networks into existing optical communications networks are currently the hot topic in optical research. Real quantum cryptography networks employed by end-users for real-life information transfer applications will be the next milestone. In terms of the industry, standards for security evaluation, production, and application of QKD are already being defined [189,190].</p>
        <p>Currently, a person finding himself in a QKD laboratory and asking for the maximum achievable key rate will receive a response with a question about the distance she/he is looking to cover. As mentioned in Section 3, one of the main drawbacks of QKD links is length limitations. However, the networks discussed in this document demonstrate the significant development in optical equipment in recent times. In 2002, QKD systems achieved a key rate of 1 kbps [29], which was used in the DARPA QKD network. In 2007 in SECOQC, this key rate increased tenfold [37], while in 2011 in the Tokyo QKD network, a key rate of 300 kbps was achieved [38]. This key rate was sufficient to establish a video conference secured with an OTP cipher provided by QKD. It is also interesting to compare the length of links in these networks. The maximum length in the DARPA QKD network was a 29-km connection via the optical switch between Harvard and Boston Universities [91]. In SECOQC, the maximum length of the QKD link was 82 km between the BREIT and St. Pölten nodes [37]. In Tokyo, the maximum distance was a record 90 km between the Koganei-1 and Koganei-2 nodes [171]. In Hefei-Chaohu-Wuhu (HCW) in China, the maximum distance was 85.1 km via the HCW intercity link between Hefei and Chaohu [119,191].Currently, a person finding himself in a QKD laboratory and asking for the maximum achievable key rate will receive a response with a question about the distance she/he is looking to cover. As mentioned in Section 3, one of the main drawbacks of QKD links is length limitations. However, the networks discussed in this document demonstrate the significant development in optical equipment in recent times. In 2002, QKD systems achieved a key rate of 1 kbps [29], which was used in the DARPA QKD network. In 2007 in SECOQC, this key rate increased tenfold [37], while in 2011 in the Tokyo QKD network, a key rate of 300 kbps was achieved [38]. This key rate was sufficient to establish a video conference secured with an OTP cipher provided by QKD. It is also interesting to compare the length of links in these networks. The maximum length in the DARPA QKD network was a 29-km connection via the optical switch between Harvard and Boston Universities [91]. In SECOQC, the maximum length of the QKD link was 82 km between the BREIT and St. Pölten nodes [37]. In Tokyo, the maximum distance was a record 90 km between the Koganei-1 and Koganei-2 nodes [171]. In Hefei-Chaohu-Wuhu (HCW) in China, the maximum distance was 85.1 km via the HCW intercity link between Hefei and Chaohu [119,191].</p>
        <p>It is reasonable therefore to expect a higher key rate and longer distances in the coming years. Since optical quantum repeaters are predicted to become available for practical use in the future [57], QKD networks are currently implemented solely through the Trusted Repeater Approach (TRA). TRA is essential for overcoming the distance limitations between QKD links and in providing routing in QKD networks. TRA, however, has several restrictions that will have to be resolved if a QKD network is to be applied in everyday life and integrated with conventional IP networks. One means for widespread application of QKD technology is integration with telecommunications networks using an approach such as SDN-QKD.It is reasonable therefore to expect a higher key rate and longer distances in the coming years. Since optical quantum repeaters are predicted to become available for practical use in the future [57], QKD networks are currently implemented solely through the Trusted Repeater Approach (TRA). TRA is essential for overcoming the distance limitations between QKD links and in providing routing in QKD networks. TRA, however, has several restrictions that will have to be resolved if a QKD network is to be applied in everyday life and integrated with conventional IP networks. One means for widespread application of QKD technology is integration with telecommunications networks using an approach such as SDN-QKD.</p>
        <p>Quantum Key Distribution: A Networking Perspective 96:31Quantum Key Distribution: A Networking Perspective 96:31</p>
        <p>ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>Some studies, however, analyze the use of bright light for data communication and the quantum signal in a single optical fiber[11][12][13]. In previously deployed QKD networks, most often dedicated optical connections have been used for QKD purposes[14][15][16].Some studies, however, analyze the use of bright light for data communication and the quantum signal in a single optical fiber[11][12][13]. In previously deployed QKD networks, most often dedicated optical connections have been used for QKD purposes[14][15][16].</p>
        <p>A dark count is an event where a single-photon detector clicks even though no photon is present[25].ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.A dark count is an event where a single-photon detector clicks even though no photon is present[25].ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>Note that in this publication (unless otherwise stated) the focus is on the more traditional Discrete Variable QKD modules. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.Note that in this publication (unless otherwise stated) the focus is on the more traditional Discrete Variable QKD modules. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>Other QKD systems have also been reported, usually with significantly fewer nodes and lower key rates. Some of these systems used a QKD system to secure ballot paper transmissions to counting stations during the federal elections in Switzerland in 2007[55]; In Durban, South Africa, QKD was used to secure the 2010 Fifa World Cup communications link[56]. Other practical applications of QKD can be found in Reference[57].ACM Computing Surveys, Vol.Other QKD systems have also been reported, usually with significantly fewer nodes and lower key rates. Some of these systems used a QKD system to secure ballot paper transmissions to counting stations during the federal elections in Switzerland in 2007[55]; In Durban, South Africa, QKD was used to secure the 2010 Fifa World Cup communications link[56]. Other practical applications of QKD can be found in Reference[57].ACM Computing Surveys, Vol.</p>
        <p>53, No. 5, Article 96. Publication date: September 2020.53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>The usual fiber loss is around 0.21 dB per km for telecommunications wavelengths. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.The usual fiber loss is around 0.21 dB per km for telecommunications wavelengths. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>User Datagram Protocol (UDP) is a message-based transport layer protocol based on the "fire-and-forget" connectionless principle. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.User Datagram Protocol (UDP) is a message-based transport layer protocol based on the "fire-and-forget" connectionless principle. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>Denotes the key rate of the final material ready for further use and stored in the storage reservoir. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.Denotes the key rate of the final material ready for further use and stored in the storage reservoir. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>Time after a total restart of the system. ACM Computing Surveys, Vol. 53, No. 5, ArticleTime after a total restart of the system. ACM Computing Surveys, Vol. 53, No. 5, Article</p>
        <p>Publication date: September 2020.Publication date: September 2020.</p>
        <p>The key was refreshed every 20 seconds regardless of whether there was traffic to be protected by that key. Although AES encryption with frequent key exchange cannot provide ITS communication, this mode may be acceptable for certain applications that do not require more stringent security criteria. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.The key was refreshed every 20 seconds regardless of whether there was traffic to be protected by that key. Although AES encryption with frequent key exchange cannot provide ITS communication, this mode may be acceptable for certain applications that do not require more stringent security criteria. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>Denotes the key rate of the final material ready for use and stored in the storage reservoir. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.Denotes the key rate of the final material ready for use and stored in the storage reservoir. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>Denotes the key rate of the final material ready for use and stored in the storage reservoir. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.Denotes the key rate of the final material ready for use and stored in the storage reservoir. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>This key rate is achieved by multiplexing four QKD systems in parallel between the two nodes. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.This key rate is achieved by multiplexing four QKD systems in parallel between the two nodes. ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>Received March 2019; revised April 2020; accepted May 2020 ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.Received March 2019; revised April 2020; accepted May 2020 ACM Computing Surveys, Vol. 53, No. 5, Article 96. Publication date: September 2020.</p>
        <p>The authors would like to thank the anonymous reviewers for their suggestions on the clarity and coverage of topics in the article. The discussion was strongly improved through their careful reading and constructive input.The authors would like to thank the anonymous reviewers for their suggestions on the clarity and coverage of topics in the article. The discussion was strongly improved through their careful reading and constructive input.</p>
        <p>The research leading to the published results was supported by the project SGS reg. no. SP2020/65 conducted at VSB -Technical University of Ostrava, Czech Republic, partly by the H2020 project OPENQKD under grant agreement No. 857156 and CiViQ under grand agreement No. 820466. This work was also supported by the MONKS Ministry of Education, Science and Youth of Canton Sarajevo, Bosnia and Herzegovina under Grant No. 11/05-14-27719-1/19.The research leading to the published results was supported by the project SGS reg. no. SP2020/65 conducted at VSB -Technical University of Ostrava, Czech Republic, partly by the H2020 project OPENQKD under grant agreement No. 857156 and CiViQ under grand agreement No. 820466. This work was also supported by the MONKS Ministry of Education, Science and Youth of Canton Sarajevo, Bosnia and Herzegovina under Grant No. 11/05-14-27719-1/19.</p>
    </text>
</tei>
